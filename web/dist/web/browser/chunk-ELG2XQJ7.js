import{a as C,b as _,c as qt,d as ut,e as Ty,f as h}from"./chunk-42NE2CY3.js";var Ff;function pl(){return Ff}function Kt(n){let e=Ff;return Ff=n,e}var _y=Symbol("NotFound");function di(n){return n===_y||n?.name==="\u0275NotFound"}var Fe=null,gl=!1,Lf=1,lA=null,Le=Symbol("SIGNAL");function B(n){let e=Fe;return Fe=n,e}function vl(){return Fe}var fi={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function hi(n){if(gl)throw new Error("");if(Fe===null)return;Fe.consumerOnSignalRead(n);let e=Fe.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Fe.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Fe.producers,t!==void 0&&t.producer===n)){Fe.producersTail=t,t.lastReadVersion=n.version;return}let o=n.consumersTail;if(o!==void 0&&o.consumer===Fe&&(!r||dA(o,Fe)))return;let i=gi(Fe),s={producer:n,consumer:Fe,nextProducer:t,prevConsumer:o,lastReadVersion:n.version,nextConsumer:void 0};Fe.producersTail=s,e!==void 0?e.nextProducer=s:Fe.producers=s,i&&Sy(n,s)}function Ay(){Lf++}function El(n){if(!(gi(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Lf)){if(!n.producerMustRecompute(n)&&!ea(n)){Cl(n);return}n.producerRecomputeValue(n),Cl(n)}}function Uf(n){if(n.consumers===void 0)return;let e=gl;gl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||uA(r)}}finally{gl=e}}function Hf(){return Fe?.consumerAllowSignalWrites!==!1}function uA(n){n.dirty=!0,Uf(n),n.consumerMarkedDirty?.(n)}function Cl(n){n.dirty=!1,n.lastCleanEpoch=Lf}function pi(n){return n&&wy(n),B(n)}function wy(n){n.producersTail=void 0,n.recomputing=!0}function Xs(n,e){B(e),n&&Dy(n)}function Dy(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(gi(n))do t=Bf(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function ea(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(El(t),r!==t.version))return!0}return!1}function ta(n){if(gi(n)){let e=n.producers;for(;e!==void 0;)e=Bf(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function Sy(n,e){let t=n.consumersTail,r=gi(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let o=n.producers;o!==void 0;o=o.nextProducer)Sy(o.producer,o)}function Bf(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,o=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:e.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(e.consumers=r,!gi(e)){let i=e.producers;for(;i!==void 0;)i=Bf(i)}return t}function gi(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Il(n){lA?.(n)}function dA(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Tl(n,e){return Object.is(n,e)}function _l(n,e){let t=Object.create(fA);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(El(t),hi(t),t.value===Zs)throw t.error;return t.value};return r[Le]=t,Il(t),r}var ml=Symbol("UNSET"),yl=Symbol("COMPUTING"),Zs=Symbol("ERRORED"),fA=_(C({},fi),{value:ml,dirty:!0,error:null,equal:Tl,kind:"computed",producerMustRecompute(n){return n.value===ml||n.value===yl},producerRecomputeValue(n){if(n.value===yl)throw new Error("");let e=n.value;n.value=yl;let t=pi(n),r,o=!1;try{r=n.computation(),B(null),o=e!==ml&&e!==Zs&&r!==Zs&&n.equal(e,r)}catch(i){r=Zs,n.error=i}finally{Xs(n,t)}if(o){n.value=e;return}n.value=r,n.version++}});function hA(){throw new Error}var by=hA;function Ry(n){by(n)}function Vf(n){by=n}var pA=null;function jf(n,e){let t=Object.create(Al);t.value=n,e!==void 0&&(t.equal=e);let r=()=>My(t);return r[Le]=t,Il(t),[r,s=>mi(t,s),s=>$f(t,s)]}function My(n){return hi(n),n.value}function mi(n,e){Hf()||Ry(n),n.equal(n.value,e)||(n.value=e,gA(n))}function $f(n,e){Hf()||Ry(n),mi(n,e(n.value))}var Al=_(C({},fi),{equal:Tl,value:void 0,kind:"signal"});function gA(n){n.version++,Ay(),Uf(n),pA?.(n)}function x(n){return typeof n=="function"}function yi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var wl=yi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function na(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Me=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(x(r))try{r()}catch(i){e=i instanceof wl?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{Ny(i)}catch(s){e=e??[],s instanceof wl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ny(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&na(t,e)}remove(e){let{_finalizers:t}=this;t&&na(t,e),e instanceof n&&e._removeParent(this)}};Me.EMPTY=(()=>{let n=new Me;return n.closed=!0,n})();var Gf=Me.EMPTY;function Dl(n){return n instanceof Me||n&&"closed"in n&&x(n.remove)&&x(n.add)&&x(n.unsubscribe)}function Ny(n){x(n)?n():n.unsubscribe()}var Mt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ci={setTimeout(n,e,...t){let{delegate:r}=Ci;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ci;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Sl(n){Ci.setTimeout(()=>{let{onUnhandledError:e}=Mt;if(e)e(n);else throw n})}function ra(){}var ky=zf("C",void 0,void 0);function Oy(n){return zf("E",void 0,n)}function Py(n){return zf("N",n,void 0)}function zf(n,e,t){return{kind:n,value:e,error:t}}var Lr=null;function vi(n){if(Mt.useDeprecatedSynchronousErrorHandling){let e=!Lr;if(e&&(Lr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Lr;if(Lr=null,t)throw r}}else n()}function xy(n){Mt.useDeprecatedSynchronousErrorHandling&&Lr&&(Lr.errorThrown=!0,Lr.error=n)}var Ur=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Dl(e)&&e.add(this)):this.destination=CA}static create(e,t,r){return new Ei(e,t,r)}next(e){this.isStopped?Kf(Py(e),this):this._next(e)}error(e){this.isStopped?Kf(Oy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Kf(ky,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},mA=Function.prototype.bind;function qf(n,e){return mA.call(n,e)}var Wf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){bl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){bl(r)}else bl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){bl(t)}}},Ei=class extends Ur{constructor(e,t,r){super();let o;if(x(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Mt.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&qf(e.next,i),error:e.error&&qf(e.error,i),complete:e.complete&&qf(e.complete,i)}):o=e}this.destination=new Wf(o)}};function bl(n){Mt.useDeprecatedSynchronousErrorHandling?xy(n):Sl(n)}function yA(n){throw n}function Kf(n,e){let{onStoppedNotification:t}=Mt;t&&Ci.setTimeout(()=>t(n,e))}var CA={closed:!0,next:ra,error:yA,complete:ra};var Ii=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(n){return n}function vA(...n){return Qf(n)}function Qf(n){return n.length===0?dt:n.length===1?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}var z=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){let i=IA(t)?t:new Ei(t,r,o);return vi(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Fy(r),new r((o,i)=>{let s=new Ei({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ii](){return this}pipe(...t){return Qf(t)(this)}toPromise(t){return t=Fy(t),new t((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function Fy(n){var e;return(e=n??Mt.Promise)!==null&&e!==void 0?e:Promise}function EA(n){return n&&x(n.next)&&x(n.error)&&x(n.complete)}function IA(n){return n&&n instanceof Ur||EA(n)&&Dl(n)}function Yf(n){return x(n?.lift)}function K(n){return e=>{if(Yf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function G(n,e,t,r,o){return new Jf(n,e,t,r,o)}var Jf=class extends Ur{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Zf(){return K((n,e)=>{let t=null;n._refCount++;let r=G(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Xf=class extends z{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Yf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let t=this.getSubject();e.add(this.source.subscribe(G(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return Zf()(this)}};var Ly=yi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Nt=(()=>{class n extends z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Rl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ly}next(t){vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Gf:(this.currentObservers=null,i.push(t),new Me(()=>{this.currentObservers=null,na(i,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){let t=new z;return t.source=this,t}}return n.create=(e,t)=>new Rl(e,t),n})(),Rl=class extends Nt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Gf}};var oa=class extends Nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ia=new z(n=>n.complete());function Uy(n){return n&&x(n.schedule)}function Hy(n){return n[n.length-1]}function Ml(n){return x(Hy(n))?n.pop():void 0}function qn(n){return Uy(Hy(n))?n.pop():void 0}function Vy(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function By(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hr(n){return this instanceof Hr?(this.v=n,this):new Hr(n)}function jy(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(I){return Promise.resolve(I).then(g,f)}}function a(g,I){r[g]&&(o[g]=function(T){return new Promise(function(A,w){i.push([g,T,A,w])>1||c(g,T)})},I&&(o[g]=I(o[g])))}function c(g,I){try{l(r[g](I))}catch(T){p(i[0][3],T)}}function l(g){g.value instanceof Hr?Promise.resolve(g.value.v).then(u,f):p(i[0][2],g)}function u(g){c("next",g)}function f(g){c("throw",g)}function p(g,I){g(I),i.shift(),i.length&&c(i[0][0],i[0][1])}}function $y(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof By=="function"?By(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){s=n[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var Nl=n=>n&&typeof n.length=="number"&&typeof n!="function";function kl(n){return x(n?.then)}function Ol(n){return x(n[Ii])}function Pl(n){return Symbol.asyncIterator&&x(n?.[Symbol.asyncIterator])}function xl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function TA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fl=TA();function Ll(n){return x(n?.[Fl])}function Ul(n){return jy(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:o}=yield Hr(t.read());if(o)return yield Hr(void 0);yield yield Hr(r)}}finally{t.releaseLock()}})}function Hl(n){return x(n?.getReader)}function Ie(n){if(n instanceof z)return n;if(n!=null){if(Ol(n))return _A(n);if(Nl(n))return AA(n);if(kl(n))return wA(n);if(Pl(n))return Gy(n);if(Ll(n))return DA(n);if(Hl(n))return SA(n)}throw xl(n)}function _A(n){return new z(e=>{let t=n[Ii]();if(x(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function AA(n){return new z(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function wA(n){return new z(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Sl)})}function DA(n){return new z(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Gy(n){return new z(e=>{bA(n,e).catch(t=>e.error(t))})}function SA(n){return Gy(Ul(n))}function bA(n,e){var t,r,o,i;return Vy(this,void 0,void 0,function*(){try{for(t=$y(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})}function et(n,e,t,r=0,o=!1){let i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function Bl(n,e=0){return K((t,r)=>{t.subscribe(G(r,o=>et(r,n,()=>r.next(o),e),()=>et(r,n,()=>r.complete(),e),o=>et(r,n,()=>r.error(o),e)))})}function Vl(n,e=0){return K((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function zy(n,e){return Ie(n).pipe(Vl(e),Bl(e))}function qy(n,e){return Ie(n).pipe(Vl(e),Bl(e))}function Ky(n,e){return new z(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Wy(n,e){return new z(t=>{let r;return et(t,e,()=>{r=n[Fl](),et(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){t.error(s);return}i?t.complete():t.next(o)},0,!0)}),()=>x(r?.return)&&r.return()})}function jl(n,e){if(!n)throw new Error("Iterable cannot be null");return new z(t=>{et(t,e,()=>{let r=n[Symbol.asyncIterator]();et(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function Qy(n,e){return jl(Ul(n),e)}function Yy(n,e){if(n!=null){if(Ol(n))return zy(n,e);if(Nl(n))return Ky(n,e);if(kl(n))return qy(n,e);if(Pl(n))return jl(n,e);if(Ll(n))return Wy(n,e);if(Hl(n))return Qy(n,e)}throw xl(n)}function Wt(n,e){return e?Yy(n,e):Ie(n)}function $l(...n){let e=qn(n);return Wt(n,e)}function RA(n,e){let t=x(n)?n:()=>n,r=o=>o.error(t());return new z(e?o=>e.schedule(r,0,o):r)}function MA(n){return!!n&&(n instanceof z||x(n.lift)&&x(n.subscribe))}var Br=yi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function tt(n,e){return K((t,r)=>{let o=0;t.subscribe(G(r,i=>{r.next(n.call(e,i,o++))}))})}var{isArray:NA}=Array;function kA(n,e){return NA(e)?n(...e):n(e)}function Gl(n){return tt(e=>kA(n,e))}var{isArray:OA}=Array,{getPrototypeOf:PA,prototype:xA,keys:FA}=Object;function zl(n){if(n.length===1){let e=n[0];if(OA(e))return{args:e,keys:null};if(LA(e)){let t=FA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function LA(n){return n&&typeof n=="object"&&PA(n)===xA}function ql(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function UA(...n){let e=qn(n),t=Ml(n),{args:r,keys:o}=zl(n);if(r.length===0)return Wt([],e);let i=new z(HA(r,e,o?s=>ql(o,s):dt));return t?i.pipe(Gl(t)):i}function HA(n,e,t=dt){return r=>{Jy(e,()=>{let{length:o}=n,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)Jy(e,()=>{let l=Wt(n[c],e),u=!1;l.subscribe(G(r,f=>{i[c]=f,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Jy(n,e,t){n?et(t,n,e):e()}function Zy(n,e,t,r,o,i,s,a){let c=[],l=0,u=0,f=!1,p=()=>{f&&!c.length&&!l&&e.complete()},g=T=>l<r?I(T):c.push(T),I=T=>{i&&e.next(T),l++;let A=!1;Ie(t(T,u++)).subscribe(G(e,w=>{o?.(w),i?g(w):e.next(w)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){let w=c.shift();s?et(e,s,()=>I(w)):I(w)}p()}catch(w){e.error(w)}}))};return n.subscribe(G(e,g,()=>{f=!0,p()})),()=>{a?.()}}function Vr(n,e,t=1/0){return x(e)?Vr((r,o)=>tt((i,s)=>e(r,i,o,s))(Ie(n(r,o))),t):(typeof e=="number"&&(t=e),K((r,o)=>Zy(r,o,n,t)))}function Xy(n=1/0){return Vr(dt,n)}function eC(){return Xy(1)}function Kl(...n){return eC()(Wt(n,qn(n)))}function BA(n){return new z(e=>{Ie(n()).subscribe(e)})}function eh(...n){let e=Ml(n),{args:t,keys:r}=zl(n),o=new z(i=>{let{length:s}=t;if(!s){i.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let f=!1;Ie(t[u]).subscribe(G(i,p=>{f||(f=!0,l--),a[u]=p},()=>c--,void 0,()=>{(!c||!f)&&(l||i.next(r?ql(r,a):a),i.complete())}))}});return e?o.pipe(Gl(e)):o}function jr(n,e){return K((t,r)=>{let o=0;t.subscribe(G(r,i=>n.call(e,i,o++)&&r.next(i)))})}function tC(n){return K((e,t)=>{let r=null,o=!1,i;r=e.subscribe(G(t,void 0,void 0,s=>{i=Ie(n(s,tC(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function nC(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(G(s,u=>{let f=l++;c=a?n(c,u,f):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function th(n,e){return x(e)?Vr(n,e,1):Vr(n,1)}function sa(n){return K((e,t)=>{let r=!1;e.subscribe(G(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function nh(n){return n<=0?()=>ia:K((e,t)=>{let r=0;e.subscribe(G(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Wl(n=VA){return K((e,t)=>{let r=!1;e.subscribe(G(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function VA(){return new Br}function rh(n){return K((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function jA(n,e){let t=arguments.length>=2;return r=>r.pipe(n?jr((o,i)=>n(o,i,r)):dt,nh(1),t?sa(e):Wl(()=>new Br))}function oh(n){return n<=0?()=>ia:K((e,t)=>{let r=[];e.subscribe(G(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function $A(n,e){let t=arguments.length>=2;return r=>r.pipe(n?jr((o,i)=>n(o,i,r)):dt,oh(1),t?sa(e):Wl(()=>new Br))}function GA(n,e){return K(nC(n,e,arguments.length>=2,!0))}function zA(...n){let e=qn(n);return K((t,r)=>{(e?Kl(n,t,e):Kl(n,t)).subscribe(r)})}function Ql(n,e){return K((t,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();t.subscribe(G(r,c=>{o?.unsubscribe();let l=0,u=i++;Ie(n(c,u)).subscribe(o=G(r,f=>r.next(e?e(c,f,u,l++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function qA(n){return K((e,t)=>{Ie(n).subscribe(G(t,()=>t.complete(),ra)),!t.closed&&e.subscribe(t)})}function KA(n,e,t){let r=x(n)||e||t?{next:n,error:e,complete:t}:n;return r?K((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(G(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}function rC(n){let e=B(null);try{return n()}finally{B(e)}}var Xl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",b=class extends Error{code;constructor(e,t){super(ua(e,t)),this.code=e}};function WA(n){return`NG0${Math.abs(n)}`}function ua(n,e){return`${WA(n)}${e?": "+e:""}`}var _i=globalThis;function J(n){for(let e in n)if(n[e]===J)return e;throw Error("")}function sC(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function vn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(vn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function mh(n,e){return n?e?`${n} ${e}`:n:e||""}var QA=J({__forward_ref__:J});function En(n){return n.__forward_ref__=En,n.toString=function(){return vn(this())},n}function Oe(n){return yh(n)?n():n}function yh(n){return typeof n=="function"&&n.hasOwnProperty(QA)&&n.__forward_ref__===En}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Jn(n){return{providers:n.providers||[],imports:n.imports||[]}}function da(n){return JA(n,eu)}function YA(n){return da(n)!==null}function JA(n,e){return n.hasOwnProperty(e)&&n[e]||null}function ZA(n){let e=n?.[eu]??null;return e||null}function sh(n){return n&&n.hasOwnProperty(Jl)?n[Jl]:null}var eu=J({\u0275prov:J}),Jl=J({\u0275inj:J}),M=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ch(n){return n&&!!n.\u0275providers}var vh=J({\u0275cmp:J}),Eh=J({\u0275dir:J}),Ih=J({\u0275pipe:J}),Th=J({\u0275mod:J}),ca=J({\u0275fac:J}),Wr=J({__NG_ELEMENT_ID__:J}),oC=J({__NG_ENV_ID__:J});function Qr(n){return typeof n=="string"?n:n==null?"":String(n)}function aC(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Qr(n)}var cC=J({ngErrorCode:J}),XA=J({ngErrorMessage:J}),ew=J({ngTokenPath:J});function _h(n,e){return lC("",-200,e)}function tu(n,e){throw new b(-201,!1)}function lC(n,e,t){let r=new b(e,n);return r[cC]=e,r[XA]=n,t&&(r[ew]=t),r}function tw(n){return n[cC]}var ah;function uC(){return ah}function $e(n){let e=ah;return ah=n,e}function Ah(n,e,t){let r=da(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;tu(n,"Injector")}var nw={},$r=nw,rw="__NG_DI_FLAG__",ch=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Gr(t)||0;try{return this.injector.get(e,r&8?null:$r,r)}catch(o){if(di(o))return o;throw o}}};function ow(n,e=0){let t=pl();if(t===void 0)throw new b(-203,!1);if(t===null)return Ah(n,void 0,e);{let r=iw(e),o=t.retrieve(n,r);if(di(o)){if(r.optional)return null;throw o}return o}}function ae(n,e=0){return(uC()||ow)(Oe(n),e)}function D(n,e){return ae(n,Gr(e))}function Gr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function iw(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function lh(n){let e=[];for(let t=0;t<n.length;t++){let r=Oe(n[t]);if(Array.isArray(r)){if(r.length===0)throw new b(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],c=sw(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(ae(o,i))}else e.push(ae(r))}return e}function sw(n){return n[rw]}function Kn(n,e){let t=n.hasOwnProperty(ca);return t?n[ca]:null}function nu(n,e){n.forEach(t=>Array.isArray(t)?nu(t,e):e(t))}function wh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fa(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function dC(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(o===1)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let i=o-2;n[o]=n[i],o--}n[e]=t,n[e+1]=r}}function fC(n,e,t){let r=Ai(n,e);return r>=0?n[r|1]=t:(r=~r,dC(n,r,e,t)),r}function ru(n,e){let t=Ai(n,e);if(t>=0)return n[t|1]}function Ai(n,e){return aw(n,e,1)}function aw(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){let i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}var Zn={},ft=[],Xn=new M(""),Dh=new M("",-1),Sh=new M(""),la=class{get(e,t=$r){if(t===$r){let o=lC("",-201);throw o.name="\u0275NotFound",o}return t}};function bh(n){return n[Th]||null}function er(n){return n[vh]||null}function Rh(n){return n[Eh]||null}function hC(n){return n[Ih]||null}function Yr(n){return{\u0275providers:n}}function pC(n){return Yr([{provide:Xn,multi:!0,useValue:n}])}function gC(...n){return{\u0275providers:Mh(!0,n),\u0275fromNgModule:!0}}function Mh(n,...e){let t=[],r=new Set,o,i=s=>{t.push(s)};return nu(e,s=>{let a=s;Zl(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&mC(o,i),t}function mC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:o}=n[t];Nh(o,i=>{e(i,r)})}}function Zl(n,e,t,r){if(n=Oe(n),!n)return!1;let o=null,i=sh(n),s=!i&&er(n);if(!i&&!s){let c=n.ngModule;if(i=sh(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Zl(l,e,t,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{nu(i.imports,u=>{Zl(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&mC(l,e)}if(!a){let l=Kn(o)||(()=>new o);e({provide:o,useFactory:l,deps:ft},o),e({provide:Sh,useValue:o,multi:!0},o),e({provide:Xn,useValue:()=>ae(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=n;Nh(c,u=>{e(u,l)})}}else return!1;return o!==n&&n.providers!==void 0}function Nh(n,e){for(let t of n)Ch(t)&&(t=t.\u0275providers),Array.isArray(t)?Nh(t,e):e(t)}var cw=J({provide:String,useValue:J});function yC(n){return n!==null&&typeof n=="object"&&cw in n}function lw(n){return!!(n&&n.useExisting)}function uw(n){return!!(n&&n.useFactory)}function zr(n){return typeof n=="function"}function CC(n){return!!n.useClass}var kh=new M(""),Yl={},iC={},ih;function ha(){return ih===void 0&&(ih=new la),ih}var nt=class{},qr=class extends nt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,dh(e,s=>this.processProvider(s)),this.records.set(Dh,Ti(void 0,this)),o.has("environment")&&this.records.set(nt,Ti(void 0,this));let i=this.records.get(kh);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Sh,ft,{self:!0}))}retrieve(e,t){let r=Gr(t)||0;try{return this.get(e,$r,r)}catch(o){if(di(o))return o;throw o}}destroy(){aa(this),this._destroyed=!0;let e=B(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),B(e)}}onDestroy(e){return aa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){aa(this);let t=Kt(this),r=$e(void 0),o;try{return e()}finally{Kt(t),$e(r)}}get(e,t=$r,r){if(aa(this),e.hasOwnProperty(oC))return e[oC](this);let o=Gr(r),i,s=Kt(this),a=$e(void 0);try{if(!(o&4)){let l=this.records.get(e);if(l===void 0){let u=gw(e)&&da(e);u&&this.injectableDefInScope(u)?l=Ti(uh(e),Yl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,o)}let c=o&2?ha():this.parent;return t=o&8&&t===$r?null:t,c.get(e,t)}catch(c){let l=tw(c);throw l===-200||l===-201?new b(l,null):c}finally{$e(a),Kt(s)}}resolveInjectorInitializers(){let e=B(null),t=Kt(this),r=$e(void 0),o;try{let i=this.get(Xn,ft,{self:!0});for(let s of i)s()}finally{Kt(t),$e(r),B(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(vn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Oe(e);let t=zr(e)?e:Oe(e&&e.provide),r=fw(e);if(!zr(e)&&e.multi===!0){let o=this.records.get(t);o||(o=Ti(void 0,Yl,!0),o.factory=()=>lh(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let o=B(null);try{if(t.value===iC)throw _h(vn(e));return t.value===Yl&&(t.value=iC,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&pw(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{B(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Oe(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function uh(n){let e=da(n),t=e!==null?e.factory:Kn(n);if(t!==null)return t;if(n instanceof M)throw new b(204,!1);if(n instanceof Function)return dw(n);throw new b(204,!1)}function dw(n){if(n.length>0)throw new b(204,!1);let t=ZA(n);return t!==null?()=>t.factory(n):()=>new n}function fw(n){if(yC(n))return Ti(void 0,n.useValue);{let e=Oh(n);return Ti(e,Yl)}}function Oh(n,e,t){let r;if(zr(n)){let o=Oe(n);return Kn(o)||uh(o)}else if(yC(n))r=()=>Oe(n.useValue);else if(uw(n))r=()=>n.useFactory(...lh(n.deps||[]));else if(lw(n))r=(o,i)=>ae(Oe(n.useExisting),i!==void 0&&i&8?8:void 0);else{let o=Oe(n&&(n.useClass||n.provide));if(hw(n))r=()=>new o(...lh(n.deps));else return Kn(o)||uh(o)}return r}function aa(n){if(n.destroyed)throw new b(205,!1)}function Ti(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function hw(n){return!!n.deps}function pw(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function gw(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function dh(n,e){for(let t of n)Array.isArray(t)?dh(t,e):t&&Ch(t)?dh(t.\u0275providers,e):e(t)}function wi(n,e){let t;n instanceof qr?(aa(n),t=n):t=new ch(n);let r,o=Kt(t),i=$e(void 0);try{return e()}finally{Kt(o),$e(i)}}function vC(){return uC()!==void 0||pl()!=null}var kt=0,L=1,F=2,Pe=3,vt=4,Et=5,pa=6,Di=7,Ue=8,tr=9,Qt=10,le=11,Si=12,Ph=13,Jr=14,It=15,Zr=16,Xr=17,eo=18,ga=19,xh=20,Cn=21,ou=22,ma=23,ht=24,iu=25,ya=26,xe=27,EC=1;var nr=7,Ca=8,va=9,rt=10;function Yt(n){return Array.isArray(n)&&typeof n[EC]=="object"}function Ot(n){return Array.isArray(n)&&n[EC]===!0}function Fh(n){return(n.flags&4)!==0}function rr(n){return n.componentOffset>-1}function Ea(n){return(n.flags&1)===1}function Jt(n){return!!n.template}function bi(n){return(n[F]&512)!==0}function to(n){return(n[F]&256)===256}var IC="svg",TC="math";function Tt(n){for(;Array.isArray(n);)n=n[kt];return n}function Lh(n,e){return Tt(e[n])}function Pt(n,e){return Tt(e[n.index])}function su(n,e){return n.data[e]}function Uh(n,e){return n[e]}function Hh(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function _t(n,e){let t=e[n];return Yt(t)?t:t[kt]}function au(n){return(n[F]&128)===128}function _C(n){return Ot(n[Pe])}function no(n,e){return e==null?null:n[e]}function Bh(n){n[Xr]=0}function Vh(n){n[F]&1024||(n[F]|=1024,au(n)&&Ta(n))}function AC(n,e){for(;n>0;)e=e[Jr],n--;return e}function Ia(n){return!!(n[F]&9216||n[ht]?.dirty)}function cu(n){n[Qt].changeDetectionScheduler?.notify(8),n[F]&64&&(n[F]|=1024),Ia(n)&&Ta(n)}function Ta(n){n[Qt].changeDetectionScheduler?.notify(0);let e=Wn(n);for(;e!==null&&!(e[F]&8192||(e[F]|=8192,!au(e)));)e=Wn(e)}function jh(n,e){if(to(n))throw new b(911,!1);n[Cn]===null&&(n[Cn]=[]),n[Cn].push(e)}function wC(n,e){if(n[Cn]===null)return;let t=n[Cn].indexOf(e);t!==-1&&n[Cn].splice(t,1)}function Wn(n){let e=n[Pe];return Ot(e)?e[Pe]:e}function DC(n){return n[Di]??=[]}function SC(n){return n.cleanup??=[]}var V={lFrame:GC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fh=!1;function bC(){return V.lFrame.elementDepthCount}function RC(){V.lFrame.elementDepthCount++}function $h(){V.lFrame.elementDepthCount--}function Gh(){return V.bindingsEnabled}function MC(){return V.skipHydrationRootTNode!==null}function zh(n){return V.skipHydrationRootTNode===n}function qh(){V.skipHydrationRootTNode=null}function Q(){return V.lFrame.lView}function Ge(){return V.lFrame.tView}function NC(n){return V.lFrame.contextLView=n,n[Ue]}function kC(n){return V.lFrame.contextLView=null,n}function He(){let n=Kh();for(;n!==null&&n.type===64;)n=n.parent;return n}function Kh(){return V.lFrame.currentTNode}function OC(){let n=V.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ri(n,e){let t=V.lFrame;t.currentTNode=n,t.isParent=e}function Wh(){return V.lFrame.isParent}function PC(){V.lFrame.isParent=!1}function xC(){return V.lFrame.contextLView}function Qh(){return fh}function Yh(n){let e=fh;return fh=n,e}function FC(){let n=V.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function LC(){return V.lFrame.bindingIndex}function UC(n){return V.lFrame.bindingIndex=n}function _a(){return V.lFrame.bindingIndex++}function Jh(n){let e=V.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function HC(){return V.lFrame.inI18n}function BC(n,e){let t=V.lFrame;t.bindingIndex=t.bindingRootIndex=n,lu(e)}function VC(){return V.lFrame.currentDirectiveIndex}function lu(n){V.lFrame.currentDirectiveIndex=n}function jC(n){let e=V.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Zh(n){V.lFrame.currentQueryIndex=n}function mw(n){let e=n[L];return e.type===2?e.declTNode:e.type===1?n[Et]:null}function Xh(n,e,t){if(t&4){let o=e,i=n;for(;o=o.parent,o===null&&!(t&1);)if(o=mw(i),o===null||(i=i[Jr],o.type&10))break;if(o===null)return!1;e=o,n=i}let r=V.lFrame=$C();return r.currentTNode=e,r.lView=n,!0}function uu(n){let e=$C(),t=n[L];V.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $C(){let n=V.lFrame,e=n===null?null:n.child;return e===null?GC(n):e}function GC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function zC(){let n=V.lFrame;return V.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ep=zC;function du(){let n=zC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qC(n){return(V.lFrame.contextLView=AC(n,V.lFrame.contextLView))[Ue]}function or(){return V.lFrame.selectedIndex}function ir(n){V.lFrame.selectedIndex=n}function fu(){let n=V.lFrame;return su(n.tView,n.selectedIndex)}function KC(){return V.lFrame.currentNamespace}var WC=!0;function hu(){return WC}function pu(n){WC=n}function hh(n,e=null,t=null,r){let o=tp(n,e,t,r);return o.resolveInjectorInitializers(),o}function tp(n,e=null,t=null,r,o=new Set){let i=[t||ft,gC(n)];return r=r||(typeof n=="object"?void 0:vn(n)),new qr(i,e||ha(),r||null,o)}var Qn=class n{static THROW_IF_NOT_FOUND=$r;static NULL=new la;static create(e,t){if(Array.isArray(e))return hh({name:""},t,e,"");{let r=e.name??"";return hh({name:r},e.parent,e.providers,r)}}static \u0275prov=W({token:n,providedIn:"any",factory:()=>ae(Dh)});static __NG_ELEMENT_ID__=-1},sr=new M(""),ro=(()=>{class n{static __NG_ELEMENT_ID__=yw;static __NG_ENV_ID__=t=>t}return n})(),ph=class extends ro{_lView;constructor(e){super(),this._lView=e}get destroyed(){return to(this._lView)}onDestroy(e){let t=this._lView;return jh(t,e),()=>wC(t,e)}};function yw(){return new ph(Q())}var Kr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},xt=new M("",{providedIn:"root",factory:()=>{let n=D(nt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Kr),e.handleError(t))}}}),QC={provide:Xn,useValue:()=>void D(Kr),multi:!0},Cw=new M("",{providedIn:"root",factory:()=>{let n=D(sr).defaultView;if(!n)return;let e=D(xt),t=i=>{e(i.reason),i.preventDefault()},r=i=>{i.error?e(i.error):e(new Error(i.message,{cause:i})),i.preventDefault()},o=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(o):o(),D(ro).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function vw(){return Yr([pC(()=>void D(Cw))])}function np(n){return typeof n=="function"&&n[Le]!==void 0}function oo(n,e){let[t,r,o]=jf(n,e?.equal),i=t,s=i[Le];return i.set=r,i.update=o,i.asReadonly=YC.bind(i),i}function YC(){let n=this[Le];if(n.readonlyFn===void 0){let e=()=>this();e[Le]=n,n.readonlyFn=e}return n.readonlyFn}function rp(n){return np(n)&&typeof n.set=="function"}var Yn=class{},Aa=new M("",{providedIn:"root",factory:()=>!1});var op=new M(""),ip=new M(""),ar=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new oa(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new z(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})(),gu=(()=>{class n{internalPendingTasks=D(ar);scheduler=D(Yn);errorHandler=D(xt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})();function wa(...n){}var sp=(()=>{class n{static \u0275prov=W({token:n,providedIn:"root",factory:()=>new gh})}return n})(),gh=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Oa(n){return{toString:n}.toString()}function Rw(n){return typeof n=="function"}var Tu=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Dv(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Pa=(()=>{let n=()=>Sv;return n.ngInherit=!0,n})();function Sv(n){return n.type.prototype.ngOnChanges&&(n.setInput=Nw),Mw}function Mw(){let n=Rv(this),e=n?.current;if(e){let t=n.previous;if(t===Zn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Nw(n,e,t,r,o){let i=this.declaredInputs[r],s=Rv(n)||kw(n,{previous:Zn,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new Tu(l&&l.currentValue,t,c===Zn),Dv(n,e,o,t)}var bv="__ngSimpleChanges__";function Rv(n){return n[bv]||null}function kw(n,e){return n[bv]=e}var JC=[];var te=function(n,e=null,t){for(let r=0;r<JC.length;r++){let o=JC[r];o(n,e,t)}};function Ow(n,e,t){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=Sv(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}function Mv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Cu(n,e,t){Nv(n,e,3,t)}function vu(n,e,t,r){(n[F]&3)===t&&Nv(n,e,t,r)}function ap(n,e){let t=n[F];(t&3)===e&&(t&=16383,t+=1,n[F]=t)}function Nv(n,e,t,r){let o=r!==void 0?n[Xr]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Xr]+=65536),(a<i||i==-1)&&(Pw(n,t,e,c),n[Xr]=(n[Xr]&4294901760)+c+2),c++}function ZC(n,e){te(4,n,e);let t=B(null);try{e.call(n)}finally{B(t),te(5,n,e)}}function Pw(n,e,t,r){let o=t[r]<0,i=t[r+1],s=o?-t[r]:t[r],a=n[s];o?n[F]>>14<n[Xr]>>16&&(n[F]&3)===e&&(n[F]+=16384,ZC(a,i)):ZC(a,i)}var Ni=-1,so=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,o){this.factory=e,this.name=o,this.canSeeViewProviders=t,this.injectImpl=r}};function xw(n){return(n.flags&8)!==0}function Fw(n){return(n.flags&16)!==0}function Lw(n,e,t){let r=0;for(;r<t.length;){let o=t[r];if(typeof o=="number"){if(o!==0)break;r++;let i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{let i=o,s=t[++r];Hw(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function Uw(n){return n===3||n===4||n===6}function Hw(n){return n.charCodeAt(0)===64}function ki(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?t=o:t===0||(t===-1||t===2?XC(n,t,o,null,e[++r]):XC(n,t,o,null,null))}}return n}function XC(n,e,t,r,o){let i=0,s=n.length;if(e===-1)s=-1;else for(;i<n.length;){let a=n[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<n.length;){let a=n[i];if(typeof a=="number")break;if(a===t){o!==null&&(n[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),o!==null&&n.splice(i++,0,o)}function kv(n){return n!==Ni}function _u(n){return n&32767}function Bw(n){return n>>16}function Au(n,e){let t=Bw(n),r=e;for(;t>0;)r=r[Jr],t--;return r}var yp=!0;function wu(n){let e=yp;return yp=n,e}var Vw=256,Ov=Vw-1,Pv=5,jw=0,Zt={};function $w(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Wr)&&(r=t[Wr]),r==null&&(r=t[Wr]=jw++);let o=r&Ov,i=1<<o;e.data[n+(o>>Pv)]|=i}function Du(n,e){let t=xv(n,e);if(t!==-1)return t;let r=e[L];r.firstCreatePass&&(n.injectorIndex=e.length,cp(r.data,n),cp(e,null),cp(r.blueprint,null));let o=Fp(n,e),i=n.injectorIndex;if(kv(o)){let s=_u(o),a=Au(o,e),c=a[L].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function cp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function xv(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Fp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;o!==null;){if(r=Bv(o),r===null)return Ni;if(t++,o=o[Jr],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ni}function Cp(n,e,t){$w(n,e,t)}function Fv(n,e,t){if(t&8||n!==void 0)return n;tu(e,"NodeInjector")}function Lv(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let o=n[tr],i=$e(void 0);try{return o?o.get(e,r,t&8):Ah(e,r,t&8)}finally{$e(i)}}return Fv(r,e,t)}function Uv(n,e,t,r=0,o){if(n!==null){if(e[F]&2048&&!(r&2)){let s=Ww(n,e,t,r,Zt);if(s!==Zt)return s}let i=Hv(n,e,t,r,Zt);if(i!==Zt)return i}return Lv(e,t,r,o)}function Hv(n,e,t,r,o){let i=qw(t);if(typeof i=="function"){if(!Xh(e,n,r))return r&1?Fv(o,t,r):Lv(e,t,r,o);try{let s;if(s=i(r),s==null&&!(r&8))tu(t);else return s}finally{ep()}}else if(typeof i=="number"){let s=null,a=xv(n,e),c=Ni,l=r&1?e[It][Et]:null;for((a===-1||r&4)&&(c=a===-1?Fp(n,e):e[a+8],c===Ni||!tv(r,!1)?a=-1:(s=e[L],a=_u(c),e=Au(c,e)));a!==-1;){let u=e[L];if(ev(i,a,u.data)){let f=Gw(a,e,t,s,r,l);if(f!==Zt)return f}c=e[a+8],c!==Ni&&tv(r,e[L].data[a+8]===l)&&ev(i,a,e)?(s=u,a=_u(c),e=Au(c,e)):a=-1}}return o}function Gw(n,e,t,r,o,i){let s=e[L],a=s.data[n+8],c=r==null?rr(a)&&yp:r!=s&&(a.type&3)!==0,l=o&1&&i===a,u=zw(a,s,t,c,l);return u!==null?Su(e,s,u,a,o):Zt}function zw(n,e,t,r,o){let i=n.providerIndexes,s=e.data,a=i&1048575,c=n.directiveStart,l=n.directiveEnd,u=i>>20,f=r?a:a+u,p=o?a+u:l;for(let g=f;g<p;g++){let I=s[g];if(g<c&&t===I||g>=c&&I.type===t)return g}if(o){let g=s[c];if(g&&Jt(g)&&g.type===t)return c}return null}function Su(n,e,t,r,o){let i=n[t],s=e.data;if(i instanceof so){let a=i;if(a.resolving){let g=aC(s[t]);throw _h(g)}let c=wu(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,f=a.injectImpl?$e(a.injectImpl):null,p=Xh(n,r,0);try{i=n[t]=a.factory(void 0,o,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Ow(t,s[t],e)}finally{f!==null&&$e(f),wu(c),a.resolving=!1,ep()}}return i}function qw(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Wr)?n[Wr]:void 0;return typeof e=="number"?e>=0?e&Ov:Kw:e}function ev(n,e,t){let r=1<<n;return!!(t[e+(n>>Pv)]&r)}function tv(n,e){return!(n&2)&&!(n&1&&e)}var io=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Uv(this._tNode,this._lView,e,Gr(r),t)}};function Kw(){return new io(He(),Q())}function Bu(n){return Oa(()=>{let e=n.prototype.constructor,t=e[ca]||vp(e),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let i=o[ca]||vp(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function vp(n){return yh(n)?()=>{let e=vp(Oe(n));return e&&e()}:Kn(n)}function Ww(n,e,t,r,o){let i=n,s=e;for(;i!==null&&s!==null&&s[F]&2048&&!bi(s);){let a=Hv(i,s,t,r|2,Zt);if(a!==Zt)return a;let c=i.parent;if(!c){let l=s[xh];if(l){let u=l.get(t,Zt,r);if(u!==Zt)return u}c=Bv(s),s=s[Jr]}i=c}return o}function Bv(n){let e=n[L],t=e.type;return t===2?e.declTNode:t===1?n[Et]:null}function Qw(){return Vu(He(),Q())}function Vu(n,e){return new Li(Pt(n,e))}var Li=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Qw}return n})();function Vv(n){return(n.flags&128)===128}var Lp=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Lp||{}),jv=new Map,Yw=0;function Jw(){return Yw++}function Zw(n){jv.set(n[ga],n)}function Ep(n){jv.delete(n[ga])}var nv="__ngContext__";function Oi(n,e){Yt(e)?(n[nv]=e[ga],Zw(e)):n[nv]=e}function $v(n){return zv(n[Si])}function Gv(n){return zv(n[vt])}function zv(n){for(;n!==null&&!Ot(n);)n=n[vt];return n}var Ip;function Xw(n){Ip=n}function qv(){if(Ip!==void 0)return Ip;if(typeof document<"u")return document;throw new b(210,!1)}var eD=new M("",{providedIn:"root",factory:()=>tD}),tD="ng",Kv=new M(""),nD=new M("",{providedIn:"platform",factory:()=>"unknown"});var rD=new M("",{providedIn:"root",factory:()=>qv().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oD="h",iD="b";var Wv=!1,Qv=new M("",{providedIn:"root",factory:()=>Wv});var sD=(n,e,t,r)=>{};function aD(n,e,t,r){sD(n,e,t,r)}function Up(n){return(n.flags&32)===32}var cD=()=>null;function Yv(n,e,t=!1){return cD(n,e,t)}function Jv(n,e){let t=n.contentQueries;if(t!==null){let r=B(null);try{for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];Zh(i),a.contentQueries(2,e[s],s)}}}finally{B(r)}}}function Tp(n,e,t){Zh(0);let r=B(null);try{e(n,t)}finally{B(r)}}function Zv(n,e,t){if(Fh(e)){let r=B(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{B(r)}}}var Pi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Pi||{});var bu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xl})`}};function Hp(n){return n instanceof bu?n.changingThisBreaksApplicationSecurity:n}function Xv(n,e){let t=eE(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Xl})`)}return t===e}function eE(n){return n instanceof bu&&n.getTypeName()||null}var lD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function tE(n){return n=String(n),n.match(lD)?n:"unsafe:"+n}var Bp=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Bp||{});function uD(n){let e=dD();return e?e.sanitize(Bp.URL,n)||"":Xv(n,"URL")?Hp(n):tE(Qr(n))}function dD(){let n=Q();return n&&n[Qt].sanitizer}function nE(n){return n instanceof Function?n():n}function fD(n,e,t){let r=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}var rE="ng-template";function hD(n,e,t,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&fD(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(Vp(n))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===t)return!0}return!1}function Vp(n){return n.type===4&&n.value!==rE}function pD(n,e,t){let r=n.type===4&&!t?rE:n.value;return e===r}function gD(n,e,t){let r=4,o=n.attrs,i=o!==null?CD(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ft(r)&&!Ft(c))return!1;if(s&&Ft(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!pD(n,c,t)||c===""&&e.length===1){if(Ft(r))return!1;s=!0}}else if(r&8){if(o===null||!hD(n,o,c,t)){if(Ft(r))return!1;s=!0}}else{let l=e[++a],u=mD(c,o,Vp(n),t);if(u===-1){if(Ft(r))return!1;s=!0;continue}if(l!==""){let f;if(u>i?f="":f=o[u+1].toLowerCase(),r&2&&l!==f){if(Ft(r))return!1;s=!0}}}}return Ft(r)||s}function Ft(n){return(n&1)===0}function mD(n,e,t,r){if(e===null)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return vD(e,n)}function yD(n,e,t=!1){for(let r=0;r<e.length;r++)if(gD(n,e[r],t))return!0;return!1}function CD(n){for(let e=0;e<n.length;e++){let t=n[e];if(Uw(t))return e}return n.length}function vD(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function rv(n,e){return n?":not("+e.trim()+")":e}function ED(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!Ft(s)&&(e+=rv(i,o),o=""),r=s,i=i||!Ft(r);t++}return o!==""&&(e+=rv(i,o)),e}function ID(n){return n.map(ED).join(",")}function TD(n){let e=[],t=[],r=1,o=2;for(;r<n.length;){let i=n[r];if(typeof i=="string")o===2?i!==""&&e.push(i,n[++r]):o===8&&t.push(i);else{if(!Ft(o))break;o=i}r++}return t.length&&e.push(1,...t),e}var Lt={};function _D(n,e){return n.createText(e)}function AD(n,e,t){n.setValue(e,t)}function oE(n,e,t){return n.createElement(e,t)}function Ru(n,e,t,r,o){n.insertBefore(e,t,r,o)}function iE(n,e,t){n.appendChild(e,t)}function ov(n,e,t,r,o){r!==null?Ru(n,e,t,r,o):iE(n,e,t)}function wD(n,e,t,r){n.removeChild(null,e,t,r)}function DD(n,e,t){n.setAttribute(e,"style",t)}function SD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function sE(n,e,t){let{mergedAttrs:r,classes:o,styles:i}=t;r!==null&&Lw(n,e,r),o!==null&&SD(n,e,o),i!==null&&DD(n,e,i)}function jp(n,e,t,r,o,i,s,a,c,l,u){let f=xe+r,p=f+o,g=bD(f,p),I=typeof l=="function"?l():l;return g[L]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:u}}function bD(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Lt);return t}function RD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $p(n,e,t,r,o,i,s,a,c,l,u){let f=e.blueprint.slice();return f[kt]=o,f[F]=r|4|128|8|64|1024,(l!==null||n&&n[F]&2048)&&(f[F]|=2048),Bh(f),f[Pe]=f[Jr]=n,f[Ue]=t,f[Qt]=s||n&&n[Qt],f[le]=a||n&&n[le],f[tr]=c||n&&n[tr]||null,f[Et]=i,f[ga]=Jw(),f[pa]=u,f[xh]=l,f[It]=e.type==2?n[It]:f,f}function MD(n,e,t){let r=Pt(e,n),o=RD(t),i=n[Qt].rendererFactory,s=Gp(n,$p(n,o,null,aE(t),r,e,null,i.createRenderer(r,t),null,null,null));return n[e.index]=s}function aE(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function cE(n,e,t,r){if(t===0)return-1;let o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function Gp(n,e){return n[Si]?n[Ph][vt]=e:n[Si]=e,n[Ph]=e,e}function ND(n=1){lE(Ge(),Q(),or()+n,!1)}function lE(n,e,t,r){if(!r)if((e[F]&3)===3){let i=n.preOrderCheckHooks;i!==null&&Cu(e,i,t)}else{let i=n.preOrderHooks;i!==null&&vu(e,i,0,t)}ir(t)}var ju=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(ju||{});function _p(n,e,t,r){let o=B(null);try{let[i,s,a]=n.inputs[t],c=null;(s&ju.SignalBased)!==0&&(c=e[i][Le]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,i):Dv(e,c,i,r)}finally{B(o)}}var ba=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ba||{}),kD;function zp(n,e){return kD(n,e)}var Mu=new Set,qp=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(qp||{}),Kp=new M(""),iv=new Set;function Wp(n){iv.has(n)||(iv.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var uE=!1,Ap=class extends Nt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,vC()&&(this.destroyRef=D(ro,{optional:!0})??void 0,this.pendingTasks=D(ar,{optional:!0})??void 0)}emit(e){let t=B(null);try{super.next(e)}finally{B(t)}}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof Me&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ot=Ap;function dE(n){let e,t;function r(){n=wa;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function sv(n){return queueMicrotask(()=>n()),()=>{n=wa}}var Qp="isAngularZone",Nu=Qp+"_ID",OD=0,ze=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ot(!1);onMicrotaskEmpty=new ot(!1);onStable=new ot(!1);onError=new ot(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=uE}=e;if(typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,FD(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Qp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new b(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,PD,wa,wa);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},PD={};function Yp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xD(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){dE(()=>{n.callbackScheduled=!1,wp(n),n.isCheckStableRunning=!0,Yp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),wp(n)}function FD(n){let e=()=>{xD(n)},t=OD++;n._inner=n._inner.fork({name:"angular",properties:{[Qp]:!0,[Nu]:t,[Nu+t]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(LD(c))return r.invokeTask(i,s,a,c);try{return av(n),r.invokeTask(i,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),cv(n)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return av(n),r.invoke(i,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!UD(c)&&e(),cv(n)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,wp(n),Yp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function wp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function av(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function cv(n){n._nesting--,Yp(n)}var ku=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ot;onMicrotaskEmpty=new ot;onStable=new ot;onError=new ot;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}};function LD(n){return fE(n,"__ignore_ng_zone__")}function UD(n){return fE(n,"__scheduler_tick__")}function fE(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var hE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=W({token:n,providedIn:"root",factory:()=>new n})}return n})();var HD=new M("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function pE(n,e,t){let r=n.get(HD);if(Array.isArray(e))for(let o of e)r.queue.add(o),t?.detachedLeaveAnimationFns?.push(o);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function BD(n,e){for(let[t,r]of e)pE(n,r.animateFns)}function lv(n,e,t,r){let o=n?.[ya]?.enter;e!==null&&o&&o.has(t.index)&&BD(r,o)}function Mi(n,e,t,r,o,i,s,a){if(o!=null){let c,l=!1;Ot(o)?c=o:Yt(o)&&(l=!0,o=o[kt]);let u=Tt(o);n===0&&r!==null?(lv(a,r,i,t),s==null?iE(e,r,u):Ru(e,r,u,s||null,!0)):n===1&&r!==null?(lv(a,r,i,t),Ru(e,r,u,s||null,!0)):n===2?uv(a,i,t,f=>{wD(e,u,l,f)}):n===3&&uv(a,i,t,()=>{e.destroyNode(u)}),c!=null&&XD(e,n,t,c,i,r,s)}}function VD(n,e){gE(n,e),e[kt]=null,e[Et]=null}function jD(n,e,t,r,o,i){r[kt]=o,r[Et]=e,$u(n,r,t,1,o,i)}function gE(n,e){e[Qt].changeDetectionScheduler?.notify(9),$u(n,e,e[le],2,null,null)}function $D(n){let e=n[Si];if(!e)return lp(n[L],n);for(;e;){let t=null;if(Yt(e))t=e[Si];else{let r=e[rt];r&&(t=r)}if(!t){for(;e&&!e[vt]&&e!==n;)Yt(e)&&lp(e[L],e),e=e[Pe];e===null&&(e=n),Yt(e)&&lp(e[L],e),t=e&&e[vt]}e=t}}function Jp(n,e){let t=n[va],r=t.indexOf(e);t.splice(r,1)}function mE(n,e){if(to(e))return;let t=e[le];t.destroyNode&&$u(n,e,t,3,null,null),$D(e)}function lp(n,e){if(to(e))return;let t=B(null);try{e[F]&=-129,e[F]|=256,e[ht]&&ta(e[ht]),qD(n,e),zD(n,e),e[L].type===1&&e[le].destroy();let r=e[Zr];if(r!==null&&Ot(e[Pe])){r!==e[Pe]&&Jp(r,e);let o=e[eo];o!==null&&o.detachView(n)}Ep(e)}finally{B(t)}}function uv(n,e,t,r){let o=n?.[ya];if(o==null||o.leave==null||!o.leave.has(e.index))return r(!1);n&&Mu.add(n),pE(t,()=>{if(o.leave&&o.leave.has(e.index)){let s=o.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(a),GD(n,r)}else n&&Mu.delete(n),r(!1)},o)}function GD(n,e){let t=n[ya]?.running;if(t){t.then(()=>{n[ya].running=void 0,Mu.delete(n),e(!0)});return}e(!1)}function zD(n,e){let t=n.cleanup,r=e[Di];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Di]=null);let o=e[Cn];if(o!==null){e[Cn]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=e[ma];if(i!==null){e[ma]=null;for(let s of i)s.destroy()}}function qD(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let o=e[t[r]];if(!(o instanceof so)){let i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];te(4,a,c);try{c.call(a)}finally{te(5,a,c)}}else{te(4,o,i);try{i.call(o)}finally{te(5,o,i)}}}}}function KD(n,e,t){return WD(n,e.parent,t)}function WD(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[kt];if(rr(r)){let{encapsulation:o}=n.data[r.directiveStart+r.componentOffset];if(o===Pi.None||o===Pi.Emulated)return null}return Pt(r,t)}function QD(n,e,t){return JD(n,e,t)}function YD(n,e,t){return n.type&40?Pt(n,t):null}var JD=YD,dv;function Zp(n,e,t,r){let o=KD(n,r,e),i=e[le],s=r.parent||e[Et],a=QD(s,r,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)ov(i,o,t[c],a,!1);else ov(i,o,t,a,!1);dv!==void 0&&dv(i,r,e,t,o)}function Da(n,e){if(e!==null){let t=e.type;if(t&3)return Pt(e,n);if(t&4)return Dp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Da(n,r);{let o=n[e.index];return Ot(o)?Dp(-1,o):Tt(o)}}else{if(t&128)return Da(n,e.next);if(t&32)return zp(e,n)()||Tt(n[e.index]);{let r=yE(n,e);if(r!==null){if(Array.isArray(r))return r[0];let o=Wn(n[It]);return Da(o,r)}else return Da(n,e.next)}}}return null}function yE(n,e){if(e!==null){let r=n[It][Et],o=e.projection;return r.projection[o]}return null}function Dp(n,e){let t=rt+n+1;if(t<e.length){let r=e[t],o=r[L].firstChild;if(o!==null)return Da(r,o)}return e[nr]}function Xp(n,e,t,r,o,i,s){for(;t!=null;){let a=r[tr];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&Oi(Tt(c),r),t.flags|=2),!Up(t))if(l&8)Xp(n,e,t.child,r,o,i,!1),Mi(e,n,a,o,c,t,i,r);else if(l&32){let u=zp(t,r),f;for(;f=u();)Mi(e,n,a,o,f,t,i,r);Mi(e,n,a,o,c,t,i,r)}else l&16?ZD(n,e,r,t,o,i):Mi(e,n,a,o,c,t,i,r);t=s?t.projectionNext:t.next}}function $u(n,e,t,r,o,i){Xp(t,r,n.firstChild,e,o,i,!1)}function ZD(n,e,t,r,o,i){let s=t[It],c=s[Et].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Mi(e,n,t[tr],o,u,r,i,t)}else{let l=c,u=s[Pe];Vv(r)&&(l.flags|=128),Xp(n,e,l,u,o,i,!0)}}function XD(n,e,t,r,o,i,s){let a=r[nr],c=Tt(r);a!==c&&Mi(e,n,t,i,a,o,s);for(let l=rt;l<r.length;l++){let u=r[l];$u(u[L],u,n,e,i,a)}}function eS(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=r.indexOf("-")===-1?void 0:ba.DashCase;o==null?n.removeStyle(t,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=ba.Important),n.setStyle(t,r,o,i))}}function CE(n,e,t,r,o){let i=or(),s=r&2;try{ir(-1),s&&e.length>xe&&lE(n,e,xe,!1),te(s?2:0,o,t),t(r,o)}finally{ir(i),te(s?3:1,o,t)}}function eg(n,e,t){aS(n,e,t),(t.flags&64)===64&&cS(n,e,t)}function tg(n,e,t=Pt){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function tS(n,e,t,r){let i=r.get(Qv,Wv)||t===Pi.ShadowDom,s=n.selectRootElement(e,i);return nS(s),s}function nS(n){rS(n)}var rS=()=>null;function oS(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vE(n,e,t,r,o,i){let s=e[L];if(ng(n,s,e,t,r)){rr(n)&&sS(e,n.index);return}n.type&3&&(t=oS(t)),iS(n,e,t,r,o,i)}function iS(n,e,t,r,o,i){if(n.type&3){let s=Pt(n,e);r=i!=null?i(r,n.value||"",t):r,o.setProperty(s,t,r)}else n.type&12}function sS(n,e){let t=_t(e,n);t[F]&16||(t[F]|=64)}function aS(n,e,t){let r=t.directiveStart,o=t.directiveEnd;rr(t)&&MD(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Du(t,e);let i=t.initialInputs;for(let s=r;s<o;s++){let a=n.data[s],c=Su(e,n,s,t);if(Oi(c,e),i!==null&&fS(e,s-r,c,a,t,i),Jt(a)){let l=_t(t.index,e);l[Ue]=Su(e,n,s,t)}}}function cS(n,e,t){let r=t.directiveStart,o=t.directiveEnd,i=t.index,s=VC();try{ir(i);for(let a=r;a<o;a++){let c=n.data[a],l=e[a];lu(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&lS(c,l)}}finally{ir(-1),lu(s)}}function lS(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function EE(n,e){let t=n.directiveRegistry,r=null;if(t)for(let o=0;o<t.length;o++){let i=t[o];yD(e,i.selectors,!1)&&(r??=[],Jt(i)?r.unshift(i):r.push(i))}return r}function uS(n,e,t,r,o,i){let s=Pt(n,e);dS(e[le],s,i,n.value,t,r,o)}function dS(n,e,t,r,o,i,s){if(i==null)n.removeAttribute(e,o,t);else{let a=s==null?Qr(i):s(i,r||"",o);n.setAttribute(e,o,a,t)}}function fS(n,e,t,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];_p(r,t,c,l)}}function IE(n,e,t,r,o){let i=xe+t,s=e[L],a=o(s,e,n,r,t);e[i]=a,Ri(n,!0);let c=n.type===2;return c?(sE(e[le],a,n),(bC()===0||Ea(n))&&Oi(a,e),RC()):Oi(a,e),hu()&&(!c||!Up(n))&&Zp(s,e,a,n),n}function TE(n){let e=n;return Wh()?PC():(e=e.parent,Ri(e,!1)),e}function hS(n,e){let t=n[tr];if(!t)return;let r;try{r=t.get(xt,null)}catch{r=null}r?.(e)}function ng(n,e,t,r,o){let i=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],f=e.data[l];_p(f,t[l],u,o),a=!0}if(i)for(let c of i){let l=t[c],u=e.data[c];_p(u,l,r,o),a=!0}return a}function pS(n,e){let t=_t(e,n),r=t[L];gS(r,t);let o=t[kt];o!==null&&t[pa]===null&&(t[pa]=Yv(o,t[tr])),te(18),rg(r,t,t[Ue]),te(19,t[Ue])}function gS(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function rg(n,e,t){uu(e);try{let r=n.viewQuery;r!==null&&Tp(1,r,t);let o=n.template;o!==null&&CE(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[eo]?.finishViewCreation(n),n.staticContentQueries&&Jv(n,e),n.staticViewQueries&&Tp(2,n.viewQuery,t);let i=n.components;i!==null&&mS(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[F]&=-5,du()}}function mS(n,e){for(let t=0;t<e.length;t++)pS(n,e[t])}function yS(n,e,t,r){let o=B(null);try{let i=e.tView,a=n[F]&4096?4096:16,c=$p(n,i,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Zr]=l;let u=n[eo];return u!==null&&(c[eo]=u.createEmbeddedView(i)),rg(i,c,t),c}finally{B(o)}}function fv(n,e){return!e||e.firstChild===null||Vv(n)}function Ra(n,e,t,r,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let i=e[t.index];i!==null&&r.push(Tt(i)),Ot(i)&&_E(i,r);let s=t.type;if(s&8)Ra(n,e,t.child,r);else if(s&32){let a=zp(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=yE(e,t);if(Array.isArray(a))r.push(...a);else{let c=Wn(e[It]);Ra(c[L],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function _E(n,e){for(let t=rt;t<n.length;t++){let r=n[t],o=r[L].firstChild;o!==null&&Ra(r[L],r,o,e)}n[nr]!==n[kt]&&e.push(n[nr])}function AE(n){if(n[iu]!==null){for(let e of n[iu])e.impl.addSequence(e);n[iu].length=0}}var wE=[];function CS(n){return n[ht]??vS(n)}function vS(n){let e=wE.pop()??Object.create(IS);return e.lView=n,e}function ES(n){n.lView[ht]!==n&&(n.lView=null,wE.push(n))}var IS=_(C({},fi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ta(n.lView)},consumerOnSignalRead(){this.lView[ht]=this}});function TS(n){let e=n[ht]??Object.create(_S);return e.lView=n,e}var _S=_(C({},fi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Wn(n.lView);for(;e&&!DE(e[L]);)e=Wn(e);e&&Vh(e)},consumerOnSignalRead(){this.lView[ht]=this}});function DE(n){return n.type!==2}function SE(n){if(n[ma]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ma])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[F]&8192)}}var AS=100;function bE(n,e=0){let r=n[Qt].rendererFactory,o=!1;o||r.begin?.();try{wS(n,e)}finally{o||r.end?.()}}function wS(n,e){let t=Qh();try{Yh(!0),Sp(n,e);let r=0;for(;Ia(n);){if(r===AS)throw new b(103,!1);r++,Sp(n,1)}}finally{Yh(t)}}function DS(n,e,t,r){if(to(e))return;let o=e[F],i=!1,s=!1;uu(e);let a=!0,c=null,l=null;i||(DE(n)?(l=CS(e),c=pi(l)):vl()===null?(a=!1,l=TS(e),c=pi(l)):e[ht]&&(ta(e[ht]),e[ht]=null));try{Bh(e),UC(n.bindingStartIndex),t!==null&&CE(n,e,t,2,r);let u=(o&3)===3;if(!i)if(u){let g=n.preOrderCheckHooks;g!==null&&Cu(e,g,null)}else{let g=n.preOrderHooks;g!==null&&vu(e,g,0,null),ap(e,0)}if(s||SS(e),SE(e),RE(e,0),n.contentQueries!==null&&Jv(n,e),!i)if(u){let g=n.contentCheckHooks;g!==null&&Cu(e,g)}else{let g=n.contentHooks;g!==null&&vu(e,g,1),ap(e,1)}RS(n,e);let f=n.components;f!==null&&NE(e,f,0);let p=n.viewQuery;if(p!==null&&Tp(2,p,r),!i)if(u){let g=n.viewCheckHooks;g!==null&&Cu(e,g)}else{let g=n.viewHooks;g!==null&&vu(e,g,2),ap(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ou]){for(let g of e[ou])g();e[ou]=null}i||(AE(e),e[F]&=-73)}catch(u){throw i||Ta(e),u}finally{l!==null&&(Xs(l,c),a&&ES(l)),du()}}function RE(n,e){for(let t=$v(n);t!==null;t=Gv(t))for(let r=rt;r<t.length;r++){let o=t[r];ME(o,e)}}function SS(n){for(let e=$v(n);e!==null;e=Gv(e)){if(!(e[F]&2))continue;let t=e[va];for(let r=0;r<t.length;r++){let o=t[r];Vh(o)}}}function bS(n,e,t){te(18);let r=_t(e,n);ME(r,t),te(19,r[Ue])}function ME(n,e){au(n)&&Sp(n,e)}function Sp(n,e){let r=n[L],o=n[F],i=n[ht],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&ea(i)),s||=!1,i&&(i.dirty=!1),n[F]&=-9217,s)DS(r,n,r.template,n[Ue]);else if(o&8192){let a=B(null);try{SE(n),RE(n,1);let c=r.components;c!==null&&NE(n,c,1),AE(n)}finally{B(a)}}}function NE(n,e,t){for(let r=0;r<e.length;r++)bS(n,e[r],t)}function RS(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let o=t[r];if(o<0)ir(~o);else{let i=o,s=t[++r],a=t[++r];BC(s,i);let c=e[i];te(24,c),a(2,c),te(25,c)}}}finally{ir(-1)}}function og(n,e){let t=Qh()?64:1088;for(n[Qt].changeDetectionScheduler?.notify(e);n;){n[F]|=t;let r=Wn(n);if(bi(n)&&!r)return n;n=r}return null}function kE(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function MS(n,e,t,r=!0){let o=e[L];if(NS(o,e,n,t),r){let s=Dp(t,n),a=e[le],c=a.parentNode(n[nr]);c!==null&&jD(o,n[Et],a,e,c,s)}let i=e[pa];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function bp(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t];if(r){let o=r[Zr];o!==null&&o!==n&&Jp(o,r),e>0&&(n[t-1][vt]=r[vt]);let i=fa(n,rt+e);VD(r[L],r);let s=i[eo];s!==null&&s.detachView(i[L]),r[Pe]=null,r[vt]=null,r[F]&=-129}return r}function NS(n,e,t,r){let o=rt+r,i=t.length;r>0&&(t[o-1][vt]=e),r<i-rt?(e[vt]=t[o],wh(t,rt+r,e)):(t.push(e),e[vt]=null),e[Pe]=t;let s=e[Zr];s!==null&&t!==s&&OE(s,e);let a=e[eo];a!==null&&a.insertView(n),cu(e),e[F]|=128}function OE(n,e){let t=n[va],r=e[Pe];if(Yt(r))n[F]|=2;else{let o=r[Pe][It];e[It]!==o&&(n[F]|=2)}t===null?n[va]=[e]:t.push(e)}var cr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[L];return Ra(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ue]}set context(e){this._lView[Ue]=e}get destroyed(){return to(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pe];if(Ot(e)){let t=e[Ca],r=t?t.indexOf(this):-1;r>-1&&(bp(e,r),fa(t,r))}this._attachedToViewContainer=!1}mE(this._lView[L],this._lView)}onDestroy(e){jh(this._lView,e)}markForCheck(){og(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[F]&=-129}reattach(){cu(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,bE(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=bi(this._lView),t=this._lView[Zr];t!==null&&!e&&Jp(t,this._lView),gE(this._lView[L],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=e;let t=bi(this._lView),r=this._lView[Zr];r!==null&&!t&&OE(r,this._lView),cu(this._lView)}};var xa=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=kS;constructor(t,r,o){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,o){let i=yS(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:o});return new cr(i)}}return n})();function kS(){return PE(He(),Q())}function PE(n,e){return n.type&4?new xa(e,n,Vu(n,e)):null}function Gu(n,e,t,r,o){let i=n.data[e];if(i===null)i=OS(n,e,t,r,o),HC()&&(i.flags|=32);else if(i.type&64){i.type=t,i.value=r,i.attrs=o;let s=OC();i.injectorIndex=s===null?-1:s.injectorIndex}return Ri(i,!0),i}function OS(n,e,t,r,o){let i=Kh(),s=Wh(),a=s?i:i&&i.parent,c=n.data[e]=xS(n,a,t,e,r,o);return PS(n,c,i,s),c}function PS(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function xS(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return MC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var uU=new RegExp(`^(\\d+)*(${iD}|${oD})*(.*)`);var FS=()=>null;function hv(n,e){return FS(n,e)}var xE=class{},zu=class{},Rp=class{resolveComponentFactory(e){throw new b(917,!1)}},Fa=class{static NULL=new Rp},Ma=class{},La=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>LS()}return n})();function LS(){let n=Q(),e=He(),t=_t(e.index,n);return(Yt(t)?t:n)[le]}var FE=(()=>{class n{static \u0275prov=W({token:n,providedIn:"root",factory:()=>null})}return n})();var Eu={},Mp=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let o=this.injector.get(e,Eu,r);return o!==Eu||t===Eu?o:this.parentInjector.get(e,t,r)}};function Ou(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=mh(o,a);else if(i==2){let c=a,l=e[++s];r=mh(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function Y(n,e=0){let t=Q();if(t===null)return ae(n,e);let r=He();return Uv(r,t,Oe(n),e)}function LE(n,e,t,r,o){let i=r===null?null:{"":-1},s=o(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}BS(n,e,t,a,i,c,l)}i!==null&&r!==null&&US(t,r,i)}function US(n,e,t){let r=n.localNames=[];for(let o=0;o<e.length;o+=2){let i=t[e[o+1]];if(i==null)throw new b(-301,!1);r.push(e[o],i)}}function HS(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function BS(n,e,t,r,o,i,s){let a=r.length,c=!1;for(let p=0;p<a;p++){let g=r[p];!c&&Jt(g)&&(c=!0,HS(n,t,p)),Cp(Du(t,e),n,g.type)}qS(t,n.data.length,a);for(let p=0;p<a;p++){let g=r[p];g.providersResolver&&g.providersResolver(g)}let l=!1,u=!1,f=cE(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let g=r[p];if(t.mergedAttrs=ki(t.mergedAttrs,g.hostAttrs),jS(n,t,e,f,g),zS(f,g,o),s!==null&&s.has(g)){let[T,A]=s.get(g);t.directiveToIndex.set(g.type,[f,T+t.directiveStart,A+t.directiveStart])}else(i===null||!i.has(g))&&t.directiveToIndex.set(g.type,f);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let I=g.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),f++}VS(n,t,i)}function VS(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=n.data[r];if(t===null||!t.has(o))pv(0,e,o,r),pv(1,e,o,r),mv(e,r,!1);else{let i=t.get(o);gv(0,e,i,r),gv(1,e,i,r),mv(e,r,!0)}}}function pv(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(r),UE(e,i)}}function gv(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),UE(e,s)}}function UE(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function mv(n,e,t){let{attrs:r,inputs:o,hostDirectiveInputs:i}=n;if(r===null||!t&&o===null||t&&i===null||Vp(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&o.hasOwnProperty(c)){let l=o[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&i.hasOwnProperty(c)){let l=i[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function jS(n,e,t,r,o){n.data[r]=o;let i=o.factory||(o.factory=Kn(o.type,!0)),s=new so(i,Jt(o),Y,null);n.blueprint[r]=s,t[r]=s,$S(n,e,r,cE(n,t,o.hostVars,Lt),o)}function $S(n,e,t,r,o){let i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;GS(s)!=a&&s.push(a),s.push(t,r,i)}}function GS(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function zS(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Jt(e)&&(t[""]=n)}}function qS(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function HE(n,e,t,r,o,i,s,a){let c=e[L],l=c.consts,u=no(l,s),f=Gu(c,n,t,r,u);return i&&LE(c,e,f,no(l,a),o),f.mergedAttrs=ki(f.mergedAttrs,f.attrs),f.attrs!==null&&Ou(f,f.attrs,!1),f.mergedAttrs!==null&&Ou(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function BE(n,e){Mv(n,e),Fh(e)&&n.queries.elementEnd(e)}function KS(n,e,t,r,o,i){let s=e.consts,a=no(s,o),c=Gu(e,n,t,r,a);if(c.mergedAttrs=ki(c.mergedAttrs,c.attrs),i!=null){let l=no(s,i);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Ou(c,c.attrs,!1),c.mergedAttrs!==null&&Ou(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ig(n){return jE(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function VE(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function jE(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function WS(n,e,t){return n[e]=t}function ao(n,e,t){if(t===Lt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function $E(n,e,t,r){let o=ao(n,e,t);return ao(n,e+1,r)||o}function Iu(n,e,t){return function r(o){let i=rr(n)?_t(n.index,e):e;og(i,5);let s=e[Ue],a=yv(e,s,t,o),c=r.__ngNextListenerFn__;for(;c;)a=yv(e,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function yv(n,e,t,r){let o=B(null);try{return te(6,e,t),t(r)!==!1}catch(i){return hS(n,i),!1}finally{te(7,e,t),B(o)}}function GE(n,e,t,r,o,i,s,a){let c=Ea(n),l=!1,u=null;if(!r&&c&&(u=YS(e,t,i,n.index)),u!==null){let f=u.__ngLastListenerFn__||u;f.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let f=Pt(n,t),p=r?r(f):f;aD(t,p,i,a);let g=o.listen(p,i,a);if(!QS(i)){let I=r?T=>r(Tt(T[n.index])):n.index;zE(I,e,t,i,a,g,!1)}}return l}function QS(n){return n.startsWith("animation")||n.startsWith("transition")}function YS(n,e,t,r){let o=n.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===t&&o[i+1]===r){let a=e[Di],c=o[i+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function zE(n,e,t,r,o,i,s){let a=e.firstCreatePass?SC(e):null,c=DC(t),l=c.length;c.push(o,i),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function Cv(n,e,t,r,o,i){let s=e[t],a=e[L],l=a.data[t].outputs[r],f=s[l].subscribe(i);zE(n.index,a,e,o,i,f,!0)}var Np=Symbol("BINDING");var Pu=class extends Fa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=er(e);return new xi(t,this.ngModule)}};function JS(n){return Object.keys(n).map(e=>{let[t,r,o]=n[e],i={propName:t,templateName:e,isSignal:(r&ju.SignalBased)!==0};return o&&(i.transform=o),i})}function ZS(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function XS(n,e,t){let r=e instanceof nt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Mp(t,r):t}function eb(n){let e=n.get(Ma,null);if(e===null)throw new b(407,!1);let t=n.get(FE,null),r=n.get(Yn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function tb(n,e){let t=qE(n);return oE(e,t,t==="svg"?IC:t==="math"?TC:null)}function qE(n){return(n.selectors[0][0]||"div").toLowerCase()}var xi=class extends zu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=JS(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ZS(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=ID(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,o,i,s){te(22);let a=B(null);try{let c=this.componentDef,l=nb(r,c,s,i),u=XS(c,o||this.ngModule,e),f=eb(u),p=f.rendererFactory.createRenderer(null,c),g=r?tS(p,r,c.encapsulation,u):tb(c,p),I=s?.some(vv)||i?.some(w=>typeof w!="function"&&w.bindings.some(vv)),T=$p(null,l,null,512|aE(c),null,null,f,p,u,null,Yv(g,u,!0));T[xe]=g,uu(T);let A=null;try{let w=HE(xe,T,2,"#host",()=>l.directiveRegistry,!0,0);sE(p,g,w),Oi(g,T),eg(l,T,w),Zv(l,w,T),BE(l,w),t!==void 0&&ob(w,this.ngContentSelectors,t),A=_t(w.index,T),T[Ue]=A[Ue],rg(l,T,null)}catch(w){throw A!==null&&Ep(A),Ep(T),w}finally{te(23),du()}return new xu(this.componentType,T,!!I)}finally{B(a)}}};function nb(n,e,t,r){let o=n?["ng-version","20.3.12"]:TD(e.selectors[0]),i=null,s=null,a=0;if(t)for(let u of t)a+=u[Np].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let f=r[u];if(typeof f!="function")for(let p of f.bindings){a+=p[Np].requiredVars;let g=u+1;p.create&&(p.targetIdx=g,(i??=[]).push(p)),p.update&&(p.targetIdx=g,(s??=[]).push(p))}}let c=[e];if(r)for(let u of r){let f=typeof u=="function"?u:u.type,p=Rh(f);c.push(p)}return jp(0,null,rb(i,s),1,a,c,null,null,null,[o],null)}function rb(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function vv(n){let e=n[Np].kind;return e==="input"||e==="twoWay"}var xu=class extends xE{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=su(t[L],xe),this.location=Vu(this._tNode,t),this.instance=_t(this._tNode.index,t)[Ue],this.hostView=this.changeDetectorRef=new cr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView,i=ng(r,o[L],o,e,t);this.previousInputValues.set(e,t);let s=_t(r.index,o);og(s,1)}get injector(){return new io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ob(n,e,t){let r=n.projection=[];for(let o=0;o<e.length;o++){let i=t[o];r.push(i!=null&&i.length?Array.from(i):null)}}var Ua=(()=>{class n{static __NG_ELEMENT_ID__=ib}return n})();function ib(){let n=He();return ab(n,Q())}var sb=Ua,KE=class extends sb{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Vu(this._hostTNode,this._hostLView)}get injector(){return new io(this._hostTNode,this._hostLView)}get parentInjector(){let e=Fp(this._hostTNode,this._hostLView);if(kv(e)){let t=Au(e,this._hostLView),r=_u(e),o=t[L].data[r+8];return new io(o,t)}else return new io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Ev(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(e,t,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=hv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,s);return this.insertImpl(a,o,fv(this._hostTNode,s)),a}createComponent(e,t,r,o,i,s,a){let c=e&&!Rw(e),l;if(c)l=t;else{let A=t||{};l=A.index,r=A.injector,o=A.projectableNodes,i=A.environmentInjector||A.ngModuleRef,s=A.directives,a=A.bindings}let u=c?e:new xi(er(e)),f=r||this.parentInjector;if(!i&&u.ngModule==null){let w=(c?f:this.parentInjector).get(nt,null);w&&(i=w)}let p=er(u.componentType??{}),g=hv(this._lContainer,p?.id??null),I=g?.firstChild??null,T=u.create(f,o,I,i,s,a);return this.insertImpl(T.hostView,l,fv(this._hostTNode,g)),T}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let o=e._lView;if(_C(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[Pe],l=new KE(c,c[Et],c[Pe]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(t),s=this._lContainer;return MS(s,o,i,r),e.attachToViewContainerRef(),wh(up(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Ev(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=bp(this._lContainer,t);r&&(fa(up(this._lContainer),t),mE(r[L],r))}detach(e){let t=this._adjustIndex(e,-1),r=bp(this._lContainer,t);return r&&fa(up(this._lContainer),t)!=null?new cr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Ev(n){return n[Ca]}function up(n){return n[Ca]||(n[Ca]=[])}function ab(n,e){let t,r=e[n.index];return Ot(r)?t=r:(t=kE(r,e,null,n),e[n.index]=t,Gp(e,t)),lb(t,e,n,r),new KE(t,n,e)}function cb(n,e){let t=n[le],r=t.createComment(""),o=Pt(e,n),i=t.parentNode(o);return Ru(t,i,r,t.nextSibling(o),!1),r}var lb=fb,ub=()=>!1;function db(n,e,t){return ub(n,e,t)}function fb(n,e,t,r){if(n[nr])return;let o;t.type&8?o=Tt(r):o=cb(e,t),n[nr]=o}var co=class{},WE=class{};var Fu=class extends co{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Pu(this);constructor(e,t,r,o=!0){super(),this.ngModuleType=e,this._parent=t;let i=bh(e);this._bootstrapComponents=nE(i.bootstrap),this._r3Injector=tp(e,t,[{provide:co,useValue:this},{provide:Fa,useValue:this.componentFactoryResolver},...r],vn(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Lu=class extends WE{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Fu(this.moduleType,e,[])}};var Na=class extends co{injector;componentFactoryResolver=new Pu(this);instance=null;constructor(e){super();let t=new qr([...e.providers,{provide:co,useValue:this},{provide:Fa,useValue:this.componentFactoryResolver}],e.parent||ha(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function QE(n,e,t=null){return new Na({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var hb=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Mh(!1,t.type),o=r.length>0?QE([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=W({token:n,providedIn:"environment",factory:()=>new n(ae(nt))})}return n})();function pb(n){return Oa(()=>{let e=YE(n),t=_(C({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Lp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(hb).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pi.Emulated,styles:n.styles||ft,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Wp("NgStandalone"),JE(t);let r=n.dependencies;return t.directiveDefs=Iv(r,gb),t.pipeDefs=Iv(r,hC),t.id=Cb(t),t})}function gb(n){return er(n)||Rh(n)}function uo(n){return Oa(()=>({type:n.type,bootstrap:n.bootstrap||ft,declarations:n.declarations||ft,imports:n.imports||ft,exports:n.exports||ft,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function mb(n,e){if(n==null)return Zn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],i,s,a,c;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,c=o[3]||null):(i=o,s=o,a=ju.None,c=null),t[i]=[r,a,c],e[i]=s}return t}function yb(n){if(n==null)return Zn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function qe(n){return Oa(()=>{let e=YE(n);return JE(e),e})}function sg(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function YE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Zn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ft,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:mb(n.inputs,e),outputs:yb(n.outputs),debugInfo:null}}function JE(n){n.features?.forEach(e=>e(n))}function Iv(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let o of t){let i=e(o);i!==null&&r.push(i)}return r}:null}function Cb(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function vb(n){return Object.getPrototypeOf(n.prototype).constructor}function Xt(n){let e=vb(n.type),t=!0,r=[n];for(;e;){let o;if(Jt(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new b(903,!1);o=e.\u0275dir}if(o){if(t){r.push(o);let s=n;s.inputs=dp(n.inputs),s.declaredInputs=dp(n.declaredInputs),s.outputs=dp(n.outputs);let a=o.hostBindings;a&&Ab(n,a);let c=o.viewQuery,l=o.contentQueries;if(c&&Tb(n,c),l&&_b(n,l),Eb(n,o),sC(n.outputs,o.outputs),Jt(o)&&o.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(n),a===Xt&&(t=!1)}}e=Object.getPrototypeOf(e)}Ib(r)}function Eb(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Ib(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let o=n[r];o.hostVars=e+=o.hostVars,o.hostAttrs=ki(o.hostAttrs,t=ki(t,o.hostAttrs))}}function dp(n){return n===Zn?{}:n===ft?[]:n}function Tb(n,e){let t=n.viewQuery;t?n.viewQuery=(r,o)=>{e(r,o),t(r,o)}:n.viewQuery=e}function _b(n,e){let t=n.contentQueries;t?n.contentQueries=(r,o,i)=>{e(r,o,i),t(r,o,i)}:n.contentQueries=e}function Ab(n,e){let t=n.hostBindings;t?n.hostBindings=(r,o)=>{e(r,o),t(r,o)}:n.hostBindings=e}function wb(n,e,t,r,o,i,s,a){if(t.firstCreatePass){n.mergedAttrs=ki(n.mergedAttrs,n.attrs);let u=n.tView=jp(2,n,o,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ri(n,!1);let c=Sb(t,e,n,r);hu()&&Zp(t,e,c,n),Oi(c,e);let l=kE(c,e,c,n);e[r+xe]=l,Gp(e,l),db(l,n,e)}function Db(n,e,t,r,o,i,s,a,c,l,u){let f=t+xe,p;return e.firstCreatePass?(p=Gu(e,f,4,s||null,a||null),Gh()&&LE(e,n,p,no(e.consts,l),EE),Mv(e,p)):p=e.data[f],wb(p,n,e,t,r,o,i,c),Ea(p)&&eg(e,n,p),l!=null&&tg(n,p,u),p}function ZE(n,e,t,r,o,i,s,a){let c=Q(),l=Ge(),u=no(l.consts,i);return Db(c,l,n,e,t,r,o,u,void 0,s,a),ZE}var Sb=bb;function bb(n,e,t,r){return pu(!0),e[le].createComment("")}var Rb=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var XE=new M("");function Ui(n){return!!n&&typeof n.then=="function"}function ag(n){return!!n&&typeof n.subscribe=="function"}var eI=new M("");var cg=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=D(eI,{optional:!0})??[];injector=D(Qn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let i=wi(this.injector,o);if(Ui(i))t.push(i);else if(ag(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tI=new M("");function nI(){Vf(()=>{let n="";throw new b(600,n)})}function rI(n){return n.isBoundToModule}var Mb=10;var Hi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=D(xt);afterRenderManager=D(hE);zonelessEnabled=D(Aa);rootEffectScheduler=D(sp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Nt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=D(ar);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(tt(t=>!t))}constructor(){D(Kp,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=D(nt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,o=Qn.NULL){return this._injector.get(ze).run(()=>{te(10);let s=t instanceof zu;if(!this._injector.get(cg).done){let I="";throw new b(405,I)}let c;s?c=t:c=this._injector.get(Fa).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=rI(c)?void 0:this._injector.get(co),u=r||c.selector,f=c.create(o,[],u,l),p=f.location.nativeElement,g=f.injector.get(XE,null);return g?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Sa(this.components,f),g?.unregisterApplication(p)}),this._loadComponent(f),te(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(qp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new b(101,!1);let t=B(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,B(t),this.afterTick.next(),te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ma,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Mb;)te(14),this.synchronizeOnce(),te(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!Ia(o))continue;let i=r&&!this.zonelessEnabled?0:1;bE(o,i),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ia(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Sa(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(t),this._injector.get(tI,[]).forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Sa(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new b(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sa(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function qu(n,e,t,r){let o=Q(),i=_a();if(ao(o,i,e)){let s=Ge(),a=fu();uS(a,o,n,e,t,r)}return qu}var yU=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function oI(n,e,t){let r=Q(),o=_a();if(ao(r,o,e)){let i=Ge(),s=fu();vE(s,r,n,e,r[le],t)}return oI}function Tv(n,e,t,r,o){ng(e,n,t,o?"class":"style",r)}function lg(n,e,t,r){let o=Q(),i=o[L],s=n+xe,a=i.firstCreatePass?HE(s,o,2,e,EE,Gh(),t,r):i.data[s];if(IE(a,o,n,e,cI),Ea(a)){let c=o[L];eg(c,o,a),Zv(c,a,o)}return r!=null&&tg(o,a),lg}function ug(){let n=Ge(),e=He(),t=TE(e);return n.firstCreatePass&&BE(n,t),zh(t)&&qh(),$h(),t.classesWithoutHost!=null&&xw(t)&&Tv(n,t,Q(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Fw(t)&&Tv(n,t,Q(),t.stylesWithoutHost,!1),ug}function iI(n,e,t,r){return lg(n,e,t,r),ug(),iI}function sI(n,e,t,r){let o=Q(),i=o[L],s=n+xe,a=i.firstCreatePass?KS(s,i,2,e,t,r):i.data[s];return IE(a,o,n,e,cI),r!=null&&tg(o,a),sI}function aI(){let n=He(),e=TE(n);return zh(e)&&qh(),$h(),aI}var cI=(n,e,t,r,o)=>(pu(!0),oE(e[le],r,KC()));function Nb(){return Q()}var mu=void 0;function kb(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Ob=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],mu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],mu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",mu,"{1} 'at' {0}",mu],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",kb],fp={};function pt(n){let e=Pb(n),t=_v(e);if(t)return t;let r=e.split("-")[0];if(t=_v(r),t)return t;if(r==="en")return Ob;throw new b(701,!1)}function _v(n){return n in fp||(fp[n]=_i.ng&&_i.ng.common&&_i.ng.common.locales&&_i.ng.common.locales[n]),fp[n]}var me=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(me||{});function Pb(n){return n.toLowerCase().replace(/_/g,"-")}var Ha="en-US";var xb=Ha;function lI(n){typeof n=="string"&&(xb=n.toLowerCase().replace(/_/g,"-"))}function Ba(n,e,t){let r=Q(),o=Ge(),i=He();return dI(o,r,r[le],i,n,e,t),Ba}function uI(n,e,t){let r=Q(),o=Ge(),i=He();return(i.type&3||t)&&GE(i,o,r,t,r[le],n,e,Iu(i,r,e)),uI}function dI(n,e,t,r,o,i,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Iu(r,e,i),GE(r,n,e,s,t,o,i,c)&&(a=!1)),a){let l=r.outputs?.[o],u=r.hostDirectiveOutputs?.[o];if(u&&u.length)for(let f=0;f<u.length;f+=2){let p=u[f],g=u[f+1];c??=Iu(r,e,i),Cv(r,e,p,g,o,c)}if(l&&l.length)for(let f of l)c??=Iu(r,e,i),Cv(r,e,f,o,o,c)}}function Fb(n=1){return qC(n)}function Lb(n){let e=xC();return Uh(e,xe+n)}function yu(n,e){return n<<17|e<<2}function lo(n){return n>>17&32767}function Ub(n){return(n&2)==2}function Hb(n,e){return n&131071|e<<17}function kp(n){return n|2}function Fi(n){return(n&131068)>>2}function hp(n,e){return n&-131069|e<<2}function Bb(n){return(n&1)===1}function Op(n){return n|1}function Vb(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=lo(s),c=Fi(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let f=t;u=f[1],(u===null||Ai(f,u)>0)&&(l=!0)}else u=t;if(o)if(c!==0){let p=lo(n[a+1]);n[r+1]=yu(p,a),p!==0&&(n[p+1]=hp(n[p+1],r)),n[a+1]=Hb(n[a+1],r)}else n[r+1]=yu(a,0),a!==0&&(n[a+1]=hp(n[a+1],r)),a=r;else n[r+1]=yu(c,0),a===0?a=r:n[c+1]=hp(n[c+1],r),c=r;l&&(n[r+1]=kp(n[r+1])),Av(n,u,r,!0),Av(n,u,r,!1),jb(e,u,n,r,i),s=yu(a,c),i?e.classBindings=s:e.styleBindings=s}function jb(n,e,t,r,o){let i=o?n.residualClasses:n.residualStyles;i!=null&&typeof e=="string"&&Ai(i,e)>=0&&(t[r+1]=Op(t[r+1]))}function Av(n,e,t,r){let o=n[t+1],i=e===null,s=r?lo(o):Fi(o),a=!1;for(;s!==0&&(a===!1||i);){let c=n[s],l=n[s+1];$b(c,e)&&(a=!0,n[s+1]=r?Op(l):kp(l)),s=r?lo(l):Fi(l)}a&&(n[t+1]=r?kp(o):Op(o))}function $b(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ai(n,e)>=0:!1}function Va(n,e){return Gb(n,e,null,!0),Va}function Gb(n,e,t,r){let o=Q(),i=Ge(),s=Jh(2);if(i.firstUpdatePass&&qb(i,n,s,r),e!==Lt&&ao(o,s,e)){let a=i.data[or()];Jb(i,a,o,o[le],n,o[s+1]=Zb(e,t),r,s)}}function zb(n,e){return e>=n.expandoStartIndex}function qb(n,e,t,r){let o=n.data;if(o[t+1]===null){let i=o[or()],s=zb(n,t);Xb(i,r)&&e===null&&!s&&(e=!1),e=Kb(o,i,e,r),Vb(o,i,e,t,s,r)}}function Kb(n,e,t,r){let o=jC(n),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(t=pp(null,n,e,t,r),t=ka(t,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==o)if(t=pp(o,n,e,t,r),i===null){let c=Wb(n,e,r);c!==void 0&&Array.isArray(c)&&(c=pp(null,n,e,c[1],r),c=ka(c,e.attrs,r),Qb(n,e,r,c))}else i=Yb(n,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),t}function Wb(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Fi(r)!==0)return n[lo(r)]}function Qb(n,e,t,r){let o=t?e.classBindings:e.styleBindings;n[lo(o)]=r}function Yb(n,e,t){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=n[i].hostAttrs;r=ka(r,s,t)}return ka(r,e.attrs,t)}function pp(n,e,t,r,o){let i=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(i=e[a],r=ka(r,i.hostAttrs,o),i!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ka(n,e,t){let r=t?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),fC(n,s,t?!0:e[++i]))}return n===void 0?null:n}function Jb(n,e,t,r,o,i,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=Bb(l)?wv(c,e,t,o,Fi(l),s):void 0;if(!Uu(u)){Uu(i)||Ub(l)&&(i=wv(c,null,t,o,a,s));let f=Lh(or(),t);eS(r,s,f,o,i)}}function wv(n,e,t,r,o,i){let s=e===null,a;for(;o>0;){let c=n[o],l=Array.isArray(c),u=l?c[1]:c,f=u===null,p=t[o+1];p===Lt&&(p=f?ft:void 0);let g=f?ru(p,r):u===r?p:void 0;if(l&&!Uu(g)&&(g=ru(c,r)),Uu(g)&&(a=g,s))return a;let I=n[o+1];o=s?lo(I):Fi(I)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(a=ru(c,r))}return a}function Uu(n){return n!==void 0}function Zb(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=vn(Hp(n)))),n}function Xb(n,e){return(n.flags&(e?8:16))!==0}function eR(n,e=""){let t=Q(),r=Ge(),o=n+xe,i=r.firstCreatePass?Gu(r,o,1,e,null):r.data[o],s=tR(r,t,i,e,n);t[o]=s,hu()&&Zp(r,t,s,i),Ri(i,!1)}var tR=(n,e,t,r,o)=>(pu(!0),_D(e[le],r));function nR(n,e,t,r=""){return ao(n,_a(),t)?e+Qr(t)+r:Lt}function rR(n,e,t,r,o,i=""){let s=LC(),a=$E(n,s,t,o);return Jh(2),a?e+Qr(t)+r+Qr(o)+i:Lt}function fI(n){return dg("",n),fI}function dg(n,e,t){let r=Q(),o=nR(r,n,e,t);return o!==Lt&&pI(r,or(),o),dg}function hI(n,e,t,r,o){let i=Q(),s=rR(i,n,e,t,r,o);return s!==Lt&&pI(i,or(),s),hI}function pI(n,e,t){let r=Lh(e,n);AD(n[le],r,t)}function gI(n,e,t){rp(e)&&(e=e());let r=Q(),o=_a();if(ao(r,o,e)){let i=Ge(),s=fu();vE(s,r,n,e,r[le],t)}return gI}function oR(n,e){let t=rp(n);return t&&n.set(e),t}function mI(n,e){let t=Q(),r=Ge(),o=He();return dI(r,t,t[le],o,n,e),mI}function iR(n,e,t){let r=Ge();if(r.firstCreatePass){let o=Jt(n);Pp(t,r.data,r.blueprint,o,!0),Pp(e,r.data,r.blueprint,o,!1)}}function Pp(n,e,t,r,o){if(n=Oe(n),Array.isArray(n))for(let i=0;i<n.length;i++)Pp(n[i],e,t,r,o);else{let i=Ge(),s=Q(),a=He(),c=zr(n)?n:Oe(n.provide),l=Oh(n),u=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(zr(n)||!n.multi){let g=new so(l,o,Y,null),I=mp(c,e,o?u:u+p,f);I===-1?(Cp(Du(a,s),i,c),gp(i,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[I]=g,s[I]=g)}else{let g=mp(c,e,u+p,f),I=mp(c,e,u,u+p),T=g>=0&&t[g],A=I>=0&&t[I];if(o&&!A||!o&&!T){Cp(Du(a,s),i,c);let w=cR(o?aR:sR,t.length,o,r,l,n);!o&&A&&(t[I].providerFactory=w),gp(i,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(w),s.push(w)}else{let w=yI(t[o?I:g],l,!o&&r);gp(i,n,g>-1?g:I,w)}!o&&r&&A&&t[I].componentProviders++}}}function gp(n,e,t,r){let o=zr(e),i=CC(e);if(o||i){let c=(i?Oe(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function yI(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function mp(n,e,t,r){for(let o=t;o<r;o++)if(e[o]===n)return o;return-1}function sR(n,e,t,r,o){return xp(this.multi,[])}function aR(n,e,t,r,o){let i=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Su(r,r[L],this.providerFactory.index,o);s=c.slice(0,a),xp(i,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],xp(i,s);return s}function xp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function cR(n,e,t,r,o,i){let s=new so(n,t,Y,null);return s.multi=[],s.index=e,s.componentProviders=0,yI(s,o,r&&!t),s}function Bi(n,e=[]){return t=>{t.providersResolver=(r,o)=>iR(r,o?o(n):n,e)}}function lR(n,e){let t=n[e];return t===Lt?void 0:t}function uR(n,e,t,r,o,i,s){let a=e+t;return $E(n,a,o,i)?WS(n,a+2,s?r.call(s,o,i):r(o,i)):lR(n,a+2)}function dR(n,e){let t=Ge(),r,o=n+xe;t.firstCreatePass?(r=fR(e,t.pipeRegistry),t.data[o]=r,r.onDestroy&&(t.destroyHooks??=[]).push(o,r.onDestroy)):r=t.data[o];let i=r.factory||(r.factory=Kn(r.type,!0)),s,a=$e(Y);try{let c=wu(!1),l=i();return wu(c),Hh(t,Q(),o,l),l}finally{$e(a)}}function fR(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function hR(n,e,t,r){let o=n+xe,i=Q(),s=Uh(i,o);return pR(i,o)?uR(i,FC(),e,s.transform,t,r,s):s.transform(t,r)}function pR(n,e){return n[L].data[e].pure}function gR(n,e){return PE(n,e)}var Hu=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},mR=(()=>{class n{compileModuleSync(t){return new Lu(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=bh(t),i=nE(o.declarations).reduce((s,a)=>{let c=er(a);return c&&s.push(new xi(c)),s},[]);return new Hu(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yR=(()=>{class n{zone=D(ze);changeDetectionScheduler=D(Yn);applicationRef=D(Hi);applicationErrorHandler=D(xt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CI=new M("",{factory:()=>!1});function fg({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ze(_(C({},hg()),{scheduleInRootZone:t})),[{provide:ze,useFactory:n},{provide:Xn,multi:!0,useFactory:()=>{let r=D(yR,{optional:!0});return()=>r.initialize()}},{provide:Xn,multi:!0,useFactory:()=>{let r=D(vR);return()=>{r.initialize()}}},e===!0?{provide:op,useValue:!0}:[],{provide:ip,useValue:t??uE},{provide:xt,useFactory:()=>{let r=D(ze),o=D(nt),i;return s=>{r.runOutsideAngular(()=>{o.destroyed&&!i?setTimeout(()=>{throw s}):(i??=o.get(Kr),i.handleError(s))})}}}]}function CR(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=fg({ngZoneFactory:()=>{let o=hg(n);return o.scheduleInRootZone=t,o.shouldCoalesceEventChangeDetection&&Wp("NgZone_CoalesceEvent"),new ze(o)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Yr([{provide:CI,useValue:!0},{provide:Aa,useValue:!1},r])}function hg(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var vR=(()=>{class n{subscription=new Me;initialized=!1;zone=D(ze);pendingTasks=D(ar);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ze.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ze.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vI=(()=>{class n{applicationErrorHandler=D(xt);appRef=D(Hi);taskService=D(ar);ngZone=D(ze);zonelessEnabled=D(Aa);tracing=D(Kp,{optional:!0});disableScheduling=D(op,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Me;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(D(ip,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ku||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?sv:dE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,sv(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ER(){return typeof $localize<"u"&&$localize.locale||Ha}var ja=new M("",{providedIn:"root",factory:()=>D(ja,{optional:!0,skipSelf:!0})||ER()});function en(n){return rC(n)}function Vi(n,e){return _l(n,e?.equal)}var EI=class{[Le];constructor(e){this[Le]=e}destroy(){this[Le].destroy()}};var AI=Symbol("InputSignalNode#UNSET"),MR=_(C({},Al),{transformFn:void 0,applyValueToInputSignal(n,e){mi(n,e)}});function wI(n,e){let t=Object.create(MR);t.value=n,t.transformFn=e?.transform;function r(){if(hi(t),t.value===AI){let o=null;throw new b(-950,o)}return t.value}return r[Le]=t,r}var NR=new M("");NR.__NG_ELEMENT_ID__=n=>{let e=He();if(e===null)throw new b(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new b(204,!1)};function II(n,e){return wI(n,e)}function kR(n){return wI(AI,n)}var rG=(II.required=kR,II);var pg=new M(""),OR=new M("");function $a(n){return!n.moduleRef}function PR(n){let e=$a(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ze);return t.run(()=>{$a(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(xt),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:r})}),$a(n)){let i=()=>e.destroy(),s=n.platformInjector.get(pg);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>n.moduleRef.destroy(),s=n.platformInjector.get(pg);s.add(i),n.moduleRef.onDestroy(()=>{Sa(n.allPlatformModules,n.moduleRef),o.unsubscribe(),s.delete(i)})}return FR(r,t,()=>{let i=e.get(ar),s=i.add(),a=e.get(cg);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(ja,Ha);if(lI(c||Ha),!e.get(OR,!0))return $a(n)?e.get(Hi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if($a(n)){let u=e.get(Hi);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return xR?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void i.remove(s))})})}var xR;function FR(n,e,t){try{let r=t();return Ui(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Ku=null;function LR(n=[],e){return Qn.create({name:e,providers:[{provide:kh,useValue:"platform"},{provide:pg,useValue:new Set([()=>Ku=null])},...n]})}function UR(n=[]){if(Ku)return Ku;let e=LR(n);return Ku=e,nI(),HR(e),e}function HR(n){let e=n.get(Kv,null);wi(n,()=>{e?.forEach(t=>t())})}var vg=(()=>{class n{static __NG_ELEMENT_ID__=BR}return n})();function BR(n){return VR(He(),Q(),(n&16)===16)}function VR(n,e,t){if(rr(n)&&!t){let r=_t(n.index,e);return new cr(r,r)}else if(n.type&175){let r=e[It];return new cr(r,e)}return null}var gg=class{constructor(){}supports(e){return ig(e)}create(e){return new mg(e)}},jR=(n,e)=>e,mg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||jR}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){let s=!r||t&&t.currentIndex<TI(r,o,i)?t:r,a=TI(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)o++;else{i||(i=[]);let l=a-o,u=c-o;if(l!=u){for(let p=0;p<l;p++){let g=p<i.length?i[p]:i[p]=0,I=g+p;u<=I&&I<l&&(i[p]=g+1)}let f=s.previousIndex;i[f]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ig(e))throw new b(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,o,i,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,i,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,i,s,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)),t=t._next}else o=0,VE(e,a=>{s=this._trackByFn(o,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,o),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,o){let i;return e===null?i=this._itTail:(i=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,o)):e=this._addAfter(new yg(t,r),i,o)),e}_verifyReinsertion(e,t,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,i=e._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let o=t===null?this._itHead:t._next;return e._next=o,e._prev=t,o===null?this._itTail=e:o._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},yg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Cg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Wu=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Cg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,o=this.map.get(r);return o?o.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function TI(n,e,t){let r=n.previousIndex;if(r===null)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+e+o}function _I(){return new Eg([new gg])}var Eg=(()=>{class n{factories;static \u0275prov=W({token:n,providedIn:"root",factory:_I});constructor(t){this.factories=t}static create(t,r){if(r!=null){let o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=D(n,{optional:!0,skipSelf:!0});return n.create(t,r||_I())}}}find(t){let r=this.factories.find(o=>o.supports(t));if(r!=null)return r;throw new b(901,!1)}}return n})();function oG(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:o}=n;te(8);try{let i=o?.injector??UR(r),s=[fg({}),{provide:Yn,useExisting:vI},QC,...t||[]],a=new Na({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return PR({r3Injector:a.injector,platformInjector:i,rootComponent:e})}catch(i){return Promise.reject(i)}finally{te(9)}}function Ig(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var bI=null;function fo(){return bI}function $R(n){bI??=n}var Tg=class{},_g=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>D(RI),providedIn:"platform"})}return n})();var RI=(()=>{class n extends _g{_location;_history;_doc=D(sr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fo().getBaseHref(this._doc)}onPopState(t){let r=fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function MI(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function DI(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function lr(n){return n&&n[0]!=="?"?`?${n}`:n}var Qu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:()=>D(kI),providedIn:"root"})}return n})(),NI=new M(""),kI=(()=>{class n extends Qu{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??D(sr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return MI(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+lr(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+lr(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+lr(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ae(_g),ae(NI,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OI=(()=>{class n{_subject=new Nt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=qR(DI(SI(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+lr(r))}normalize(t){return n.stripTrailingSlash(zR(this._basePath,SI(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lr(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=lr;static joinWithSlash=MI;static stripTrailingSlash=DI;static \u0275fac=function(r){return new(r||n)(ae(Qu))};static \u0275prov=W({token:n,factory:()=>GR(),providedIn:"root"})}return n})();function GR(){return new OI(ae(Qu))}function zR(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SI(n){return n.replace(/\/index.html$/,"")}function qR(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Be=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(Be||{}),X=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(X||{}),it=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(it||{}),Tn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function LI(n){return pt(n)[me.LocaleId]}function UI(n,e,t){let r=pt(n),o=[r[me.DayPeriodsFormat],r[me.DayPeriodsStandalone]],i=At(o,e);return At(i,t)}function HI(n,e,t){let r=pt(n),o=[r[me.DaysFormat],r[me.DaysStandalone]],i=At(o,e);return At(i,t)}function BI(n,e,t){let r=pt(n),o=[r[me.MonthsFormat],r[me.MonthsStandalone]],i=At(o,e);return At(i,t)}function VI(n,e){let r=pt(n)[me.Eras];return At(r,e)}function za(n,e){let t=pt(n);return At(t[me.DateFormat],e)}function qa(n,e){let t=pt(n);return At(t[me.TimeFormat],e)}function Ka(n,e){let r=pt(n)[me.DateTimeFormat];return At(r,e)}function Wa(n,e){let t=pt(n),r=t[me.NumberSymbols][e];if(typeof r>"u"){if(e===Tn.CurrencyDecimal)return t[me.NumberSymbols][Tn.Decimal];if(e===Tn.CurrencyGroup)return t[me.NumberSymbols][Tn.Group]}return r}function jI(n){if(!n[me.ExtraData])throw new b(2303,!1)}function $I(n){let e=pt(n);return jI(e),(e[me.ExtraData][2]||[]).map(r=>typeof r=="string"?Ag(r):[Ag(r[0]),Ag(r[1])])}function GI(n,e,t){let r=pt(n);jI(r);let o=[r[me.ExtraData][0],r[me.ExtraData][1]],i=At(o,e)||[];return At(i,t)||[]}function At(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new b(2304,!1)}function Ag(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var KR=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Yu={},WR=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function zI(n,e,t,r){let o=rM(n);e=In(t,e)||e;let s=[],a;for(;e;)if(a=WR.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=o.getTimezoneOffset();r&&(c=KI(r,c),o=nM(o,r));let l="";return s.forEach(u=>{let f=eM(u);l+=f?f(o,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function td(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function In(n,e){let t=LI(n);if(Yu[t]??={},Yu[t][e])return Yu[t][e];let r="";switch(e){case"shortDate":r=za(n,it.Short);break;case"mediumDate":r=za(n,it.Medium);break;case"longDate":r=za(n,it.Long);break;case"fullDate":r=za(n,it.Full);break;case"shortTime":r=qa(n,it.Short);break;case"mediumTime":r=qa(n,it.Medium);break;case"longTime":r=qa(n,it.Long);break;case"fullTime":r=qa(n,it.Full);break;case"short":let o=In(n,"shortTime"),i=In(n,"shortDate");r=Ju(Ka(n,it.Short),[o,i]);break;case"medium":let s=In(n,"mediumTime"),a=In(n,"mediumDate");r=Ju(Ka(n,it.Medium),[s,a]);break;case"long":let c=In(n,"longTime"),l=In(n,"longDate");r=Ju(Ka(n,it.Long),[c,l]);break;case"full":let u=In(n,"fullTime"),f=In(n,"fullDate");r=Ju(Ka(n,it.Full),[u,f]);break}return r&&(Yu[t][e]=r),r}function Ju(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Ut(n,e,t="-",r,o){let i="";(n<0||o&&n<=0)&&(o?n=-n+1:(n=-n,i=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),i+s}function QR(n,e){return Ut(n,3).substring(0,e)}function Te(n,e,t=0,r=!1,o=!1){return function(i,s){let a=YR(n,i);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return QR(a,e);let c=Wa(s,Tn.MinusSign);return Ut(a,e,c,r,o)}}function YR(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new b(2301,!1)}}function re(n,e,t=Be.Format,r=!1){return function(o,i){return JR(o,i,n,e,t,r)}}function JR(n,e,t,r,o,i){switch(t){case 2:return BI(e,o,r)[n.getMonth()];case 1:return HI(e,o,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(i){let l=$I(e),u=GI(e,o,r),f=l.findIndex(p=>{if(Array.isArray(p)){let[g,I]=p,T=s>=g.hours&&a>=g.minutes,A=s<I.hours||s===I.hours&&a<I.minutes;if(g.hours<I.hours){if(T&&A)return!0}else if(T||A)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(f!==-1)return u[f]}return UI(e,o,r)[s<12?0:1];case 3:return VI(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new b(2302,!1)}}function Zu(n){return function(e,t,r){let o=-1*r,i=Wa(t,Tn.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case 0:return(o>=0?"+":"")+Ut(s,2,i)+Ut(Math.abs(o%60),2,i);case 1:return"GMT"+(o>=0?"+":"")+Ut(s,1,i);case 2:return"GMT"+(o>=0?"+":"")+Ut(s,2,i)+":"+Ut(Math.abs(o%60),2,i);case 3:return r===0?"Z":(o>=0?"+":"")+Ut(s,2,i)+":"+Ut(Math.abs(o%60),2,i);default:throw new b(2310,!1)}}}var ZR=0,ed=4;function XR(n){let e=td(n,ZR,1).getDay();return td(n,0,1+(e<=ed?ed:ed+7)-e)}function qI(n){let e=n.getDay(),t=e===0?-3:ed-e;return td(n.getFullYear(),n.getMonth(),n.getDate()+t)}function wg(n,e=!1){return function(t,r){let o;if(e){let i=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();o=1+Math.floor((s+i)/7)}else{let i=qI(t),s=XR(i.getFullYear()),a=i.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return Ut(o,n,Wa(r,Tn.MinusSign))}}function Xu(n,e=!1){return function(t,r){let i=qI(t).getFullYear();return Ut(i,n,Wa(r,Tn.MinusSign),e)}}var Dg={};function eM(n){if(Dg[n])return Dg[n];let e;switch(n){case"G":case"GG":case"GGG":e=re(3,X.Abbreviated);break;case"GGGG":e=re(3,X.Wide);break;case"GGGGG":e=re(3,X.Narrow);break;case"y":e=Te(0,1,0,!1,!0);break;case"yy":e=Te(0,2,0,!0,!0);break;case"yyy":e=Te(0,3,0,!1,!0);break;case"yyyy":e=Te(0,4,0,!1,!0);break;case"Y":e=Xu(1);break;case"YY":e=Xu(2,!0);break;case"YYY":e=Xu(3);break;case"YYYY":e=Xu(4);break;case"M":case"L":e=Te(1,1,1);break;case"MM":case"LL":e=Te(1,2,1);break;case"MMM":e=re(2,X.Abbreviated);break;case"MMMM":e=re(2,X.Wide);break;case"MMMMM":e=re(2,X.Narrow);break;case"LLL":e=re(2,X.Abbreviated,Be.Standalone);break;case"LLLL":e=re(2,X.Wide,Be.Standalone);break;case"LLLLL":e=re(2,X.Narrow,Be.Standalone);break;case"w":e=wg(1);break;case"ww":e=wg(2);break;case"W":e=wg(1,!0);break;case"d":e=Te(2,1);break;case"dd":e=Te(2,2);break;case"c":case"cc":e=Te(7,1);break;case"ccc":e=re(1,X.Abbreviated,Be.Standalone);break;case"cccc":e=re(1,X.Wide,Be.Standalone);break;case"ccccc":e=re(1,X.Narrow,Be.Standalone);break;case"cccccc":e=re(1,X.Short,Be.Standalone);break;case"E":case"EE":case"EEE":e=re(1,X.Abbreviated);break;case"EEEE":e=re(1,X.Wide);break;case"EEEEE":e=re(1,X.Narrow);break;case"EEEEEE":e=re(1,X.Short);break;case"a":case"aa":case"aaa":e=re(0,X.Abbreviated);break;case"aaaa":e=re(0,X.Wide);break;case"aaaaa":e=re(0,X.Narrow);break;case"b":case"bb":case"bbb":e=re(0,X.Abbreviated,Be.Standalone,!0);break;case"bbbb":e=re(0,X.Wide,Be.Standalone,!0);break;case"bbbbb":e=re(0,X.Narrow,Be.Standalone,!0);break;case"B":case"BB":case"BBB":e=re(0,X.Abbreviated,Be.Format,!0);break;case"BBBB":e=re(0,X.Wide,Be.Format,!0);break;case"BBBBB":e=re(0,X.Narrow,Be.Format,!0);break;case"h":e=Te(3,1,-12);break;case"hh":e=Te(3,2,-12);break;case"H":e=Te(3,1);break;case"HH":e=Te(3,2);break;case"m":e=Te(4,1);break;case"mm":e=Te(4,2);break;case"s":e=Te(5,1);break;case"ss":e=Te(5,2);break;case"S":e=Te(6,1);break;case"SS":e=Te(6,2);break;case"SSS":e=Te(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Zu(0);break;case"ZZZZZ":e=Zu(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Zu(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Zu(2);break;default:return null}return Dg[n]=e,e}function KI(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function tM(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function nM(n,e,t){let o=n.getTimezoneOffset(),i=KI(e,o);return tM(n,-1*(i-o))}function rM(n){if(PI(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[o,i=1,s=1]=n.split("-").map(a=>+a);return td(o,i-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(KR))return oM(r)}let e=new Date(n);if(!PI(e))throw new b(2311,!1);return e}function oM(n){let e=new Date(0),t=0,r=0,o=n[8]?e.setUTCFullYear:e.setFullYear,i=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return i.call(e,s,a,c,l),e}function PI(n){return n instanceof Date&&!isNaN(n.valueOf())}var nd=class{$implicit;ngForOf;index;count;constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},WI=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new nd(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),xI(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);xI(i,o)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Y(Ua),Y(xa),Y(Eg))};static \u0275dir=qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function xI(n,e){n.context.$implicit=e.item}var iM=(()=>{class n{_viewContainer;_context=new rd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){FI(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){FI(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Y(Ua),Y(xa))};static \u0275dir=qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),rd=class{$implicit=null;ngIf=null};function FI(n,e){if(n&&!n.createEmbeddedView)throw new b(2020,!1)}function sM(n,e){return new b(2100,!1)}var aM="mediumDate",QI=new M(""),YI=new M(""),cM=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,o){this.locale=t,this.defaultTimezone=r,this.defaultOptions=o}transform(t,r,o,i){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??aM,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return zI(t,s,i||this.locale,a)}catch(s){throw sM(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Y(ja,16),Y(QI,24),Y(YI,24))};static \u0275pipe=sg({name:"date",type:n,pure:!0})}return n})();var lM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=uo({type:n});static \u0275inj=Jn({})}return n})();function Sg(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var Qa=class{};var mz="browser";var Gi=class{},Ya=class{},ur=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let o=t.slice(0,r),i=t.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":let i=e.value;if(!i)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var id=class{encodeKey(e){return JI(e)}encodeValue(e){return JI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function uM(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var dM=/%(\d[a-f0-9])/gi,fM={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function JI(n){return encodeURIComponent(n).replace(dM,(e,t)=>fM[t]??e)}function od(n){return`${n}`}var _n=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new id,e.fromString){if(e.fromObject)throw new b(2805,!1);this.map=uM(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],o=Array.isArray(r)?r.map(od):[od(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(od(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],o=r.indexOf(od(e.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var sd=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function hM(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ZI(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function XI(n){return typeof Blob<"u"&&n instanceof Blob}function eT(n){return typeof FormData<"u"&&n instanceof FormData}function pM(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var tT="Content-Type",nT="Accept",rT="X-Request-URL",oT="text/plain",iT="application/json",gM=`${iT}, ${oT}, */*`,ji=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,o){this.url=t,this.method=e.toUpperCase();let i;if(hM(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),typeof i.timeout=="number"){if(i.timeout<1||!Number.isInteger(i.timeout))throw new b(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),this.transferCache=i.transferCache}if(this.headers??=new ur,this.context??=new sd,!this.params)this.params=new _n,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ZI(this.body)||XI(this.body)||eT(this.body)||pM(this.body)?this.body:this.body instanceof _n?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||eT(this.body)?null:XI(this.body)?this.body.type||null:ZI(this.body)?null:typeof this.body=="string"?oT:this.body instanceof _n?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?iT:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,f=e.referrer||this.referrer,p=e.integrity||this.integrity,g=e.transferCache??this.transferCache,I=e.timeout??this.timeout,T=e.body!==void 0?e.body:this.body,A=e.withCredentials??this.withCredentials,w=e.reportProgress??this.reportProgress,$=e.headers||this.headers,ge=e.params||this.params,se=e.context??this.context;return e.setHeaders!==void 0&&($=Object.keys(e.setHeaders).reduce((je,Rt)=>je.set(Rt,e.setHeaders[Rt]),$)),e.setParams&&(ge=Object.keys(e.setParams).reduce((je,Rt)=>je.set(Rt,e.setParams[Rt]),ge)),new n(t,r,T,{params:ge,headers:$,context:se,reportProgress:w,responseType:o,withCredentials:A,transferCache:g,keepalive:i,cache:a,priority:s,timeout:I,mode:c,redirect:l,credentials:u,referrer:f,integrity:p})}},ho=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(ho||{}),zi=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new ur,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},ad=class n extends zi{constructor(e={}){super(e)}type=ho.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ja=class n extends zi{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=ho.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},$i=class extends zi{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},mM=200,yM=204;function bg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var sT=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof ji)i=t;else{let c;o.headers instanceof ur?c=o.headers:c=new ur(o.headers);let l;o.params&&(o.params instanceof _n?l=o.params:l=new _n({fromObject:o.params})),i=new ji(t,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,integrity:o.integrity,timeout:o.timeout})}let s=$l(i).pipe(th(c=>this.handler.handle(c)));if(t instanceof ji||o.observe==="events")return s;let a=s.pipe(jr(c=>c instanceof Ja));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(tt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new b(2806,!1);return c.body}));case"blob":return a.pipe(tt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new b(2807,!1);return c.body}));case"text":return a.pipe(tt(c=>{if(c.body!==null&&typeof c.body!="string")throw new b(2808,!1);return c.body}));case"json":default:return a.pipe(tt(c=>c.body))}case"response":return a;default:throw new b(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new _n().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,bg(o,r))}post(t,r,o={}){return this.request("POST",t,bg(o,r))}put(t,r,o={}){return this.request("PUT",t,bg(o,r))}static \u0275fac=function(r){return new(r||n)(ae(Gi))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();var CM=new M("");function vM(n,e){return e(n)}function EM(n,e,t){return(r,o)=>wi(t,()=>e(r,i=>n(i,o)))}var Mg=new M(""),aT=new M(""),cT=new M("",{providedIn:"root",factory:()=>!0});var cd=(()=>{class n extends Gi{backend;injector;chain=null;pendingTasks=D(gu);contributeToStability=D(cT);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Mg),...this.injector.get(aT,[])]));this.chain=r.reduceRight((o,i)=>EM(o,i,this.injector),vM)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(rh(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ae(Ya),ae(nt))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();var IM=/^\)\]\}',?\n/,TM=RegExp(`^${rT}:`,"m");function _M(n){return"responseURL"in n&&n.responseURL?n.responseURL:TM.test(n.getAllResponseHeaders())?n.getResponseHeader(rT):null}var Rg=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new b(-2800,!1);let r=this.xhrFactory;return $l(null).pipe(Ql(()=>new z(i=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((A,w)=>s.setRequestHeader(A,w.join(","))),t.headers.has(nT)||s.setRequestHeader(nT,gM),!t.headers.has(tT)){let A=t.detectContentTypeHeader();A!==null&&s.setRequestHeader(tT,A)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let A=t.responseType.toLowerCase();s.responseType=A!=="json"?A:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let A=s.statusText||"OK",w=new ur(s.getAllResponseHeaders()),$=_M(s)||t.url;return c=new ad({headers:w,status:s.status,statusText:A,url:$}),c},u=()=>{let{headers:A,status:w,statusText:$,url:ge}=l(),se=null;w!==yM&&(se=typeof s.response>"u"?s.responseText:s.response),w===0&&(w=se?mM:0);let je=w>=200&&w<300;if(t.responseType==="json"&&typeof se=="string"){let Rt=se;se=se.replace(IM,"");try{se=se!==""?JSON.parse(se):null}catch(cA){se=Rt,je&&(je=!1,se={error:cA,text:se})}}je?(i.next(new Ja({body:se,headers:A,status:w,statusText:$,url:ge||void 0})),i.complete()):i.error(new $i({error:se,headers:A,status:w,statusText:$,url:ge||void 0}))},f=A=>{let{url:w}=l(),$=new $i({error:A,status:s.status||0,statusText:s.statusText||"Unknown Error",url:w||void 0});i.error($)},p=f;t.timeout&&(p=A=>{let{url:w}=l(),$=new $i({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:w||void 0});i.error($)});let g=!1,I=A=>{g||(i.next(l()),g=!0);let w={type:ho.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(w.total=A.total),t.responseType==="text"&&s.responseText&&(w.partialText=s.responseText),i.next(w)},T=A=>{let w={type:ho.UploadProgress,loaded:A.loaded};A.lengthComputable&&(w.total=A.total),i.next(w)};return s.addEventListener("load",u),s.addEventListener("error",f),s.addEventListener("timeout",p),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",I),a!==null&&s.upload&&s.upload.addEventListener("progress",T)),s.send(a),i.next({type:ho.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",u),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",I),a!==null&&s.upload&&s.upload.removeEventListener("progress",T)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(ae(Qa))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})(),lT=new M(""),AM="XSRF-TOKEN",wM=new M("",{providedIn:"root",factory:()=>AM}),DM="X-XSRF-TOKEN",SM=new M("",{providedIn:"root",factory:()=>DM}),Za=class{},bM=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Sg(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(ae(sr),ae(wM))};static \u0275prov=W({token:n,factory:n.\u0275fac})}return n})();function RM(n,e){let t=n.url.toLowerCase();if(!D(lT)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=D(Za).getToken(),o=D(SM);return r!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var Ng=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(Ng||{});function MM(n,e){return{\u0275kind:n,\u0275providers:e}}function NM(...n){let e=[sT,Rg,cd,{provide:Gi,useExisting:cd},{provide:Ya,useFactory:()=>D(CM,{optional:!0})??D(Rg)},{provide:Mg,useValue:RM,multi:!0},{provide:lT,useValue:!0},{provide:Za,useClass:bM}];for(let t of n)e.push(...t.\u0275providers);return Yr(e)}function kM(n){return MM(Ng.Interceptors,n.map(e=>({provide:Mg,useValue:e,multi:!0})))}var CT=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Y(La),Y(Li))};static \u0275dir=qe({type:n})}return n})(),OM=(()=>{class n extends CT{static \u0275fac=(()=>{let t;return function(o){return(t||(t=Bu(n)))(o||n)}})();static \u0275dir=qe({type:n,features:[Xt]})}return n})(),vT=new M("");var PM={provide:vT,useExisting:En(()=>ET),multi:!0};function xM(){let n=fo()?fo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var FM=new M(""),ET=(()=>{class n extends CT{_compositionMode;_composing=!1;constructor(t,r,o){super(t,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!xM())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Y(La),Y(Li),Y(FM,8))};static \u0275dir=qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Ba("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[Bi([PM]),Xt]})}return n})();function LM(n){return n==null||UM(n)===0}function UM(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Pg=new M(""),IT=new M("");function HM(n){return LM(n.value)?{required:!0}:null}function uT(n){return null}function TT(n){return n!=null}function _T(n){return Ui(n)?Wt(n):n}function AT(n){let e={};return n.forEach(t=>{e=t!=null?C(C({},e),t):e}),Object.keys(e).length===0?null:e}function wT(n,e){return e.map(t=>t(n))}function BM(n){return!n.validate}function DT(n){return n.map(e=>BM(e)?e:t=>e.validate(t))}function VM(n){if(!n)return null;let e=n.filter(TT);return e.length==0?null:function(t){return AT(wT(t,e))}}function xg(n){return n!=null?VM(DT(n)):null}function jM(n){if(!n)return null;let e=n.filter(TT);return e.length==0?null:function(t){let r=wT(t,e).map(_T);return eh(r).pipe(tt(AT))}}function Fg(n){return n!=null?jM(DT(n)):null}function dT(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $M(n){return n._rawValidators}function GM(n){return n._rawAsyncValidators}function kg(n){return n?Array.isArray(n)?n:[n]:[]}function ud(n,e){return Array.isArray(n)?n.includes(e):n===e}function fT(n,e){let t=kg(e);return kg(n).forEach(o=>{ud(t,o)||t.push(o)}),t}function hT(n,e){return kg(e).filter(t=>!ud(n,t))}var dd=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Fg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Wi=class extends dd{name;get formDirective(){return null}get path(){return null}},oc=class extends dd{_parent=null;name=null;valueAccessor=null},fd=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},zM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pq=_(C({},zM),{"[class.ng-submitted]":"isSubmitted"}),gq=(()=>{class n extends fd{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Y(oc,2))};static \u0275dir=qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Va("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Xt]})}return n})(),mq=(()=>{class n extends fd{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Y(Wi,10))};static \u0275dir=qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&Va("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[Xt]})}return n})();var Xa="VALID",ld="INVALID",qi="PENDING",ec="DISABLED",dr=class{},hd=class extends dr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},nc=class extends dr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},rc=class extends dr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Ki=class extends dr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Og=class extends dr{source;constructor(e){super(),this.source=e}},pd=class extends dr{source;constructor(e){super(),this.source=e}};function ST(n){return(yd(n)?n.validators:n)||null}function qM(n){return Array.isArray(n)?xg(n):n||null}function bT(n,e){return(yd(e)?e.asyncValidators:n)||null}function KM(n){return Array.isArray(n)?Fg(n):n||null}function yd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function WM(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new b(1e3,"");if(!r[t])throw new b(1001,"")}function QM(n,e,t){n._forEachChild((r,o)=>{if(t[o]===void 0)throw new b(1002,"")})}var gd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return en(this.statusReactive)}set status(e){en(()=>this.statusReactive.set(e))}_status=Vi(()=>this.statusReactive());statusReactive=oo(void 0);get valid(){return this.status===Xa}get invalid(){return this.status===ld}get pending(){return this.status==qi}get disabled(){return this.status===ec}get enabled(){return this.status!==ec}errors;get pristine(){return en(this.pristineReactive)}set pristine(e){en(()=>this.pristineReactive.set(e))}_pristine=Vi(()=>this.pristineReactive());pristineReactive=oo(!0);get dirty(){return!this.pristine}get touched(){return en(this.touchedReactive)}set touched(e){en(()=>this.touchedReactive.set(e))}_touched=Vi(()=>this.touchedReactive());touchedReactive=oo(!1);get untouched(){return!this.touched}_events=new Nt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hT(e,this._rawAsyncValidators))}hasValidator(e){return ud(this._rawValidators,e)}hasAsyncValidator(e){return ud(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(_(C({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new rc(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new rc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(_(C({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new nc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new nc(!0,r))}markAsPending(e={}){this.status=qi;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ki(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(_(C({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ec,this.errors=null,this._forEachChild(o=>{o.disable(_(C({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hd(this.value,r)),this._events.next(new Ki(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_(C({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xa,this._forEachChild(r=>{r.enable(_(C({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(_(C({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xa||this.status===qi)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hd(this.value,t)),this._events.next(new Ki(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(_(C({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ec:Xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=qi,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=_T(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ki(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ot,this.statusChanges=new ot}_calculateStatus(){return this._allControlsDisabled()?ec:this.errors?ld:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qi)?qi:this._anyControlsHaveStatus(ld)?ld:Xa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new nc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new rc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=qM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=KM(this._rawAsyncValidators)}},md=class extends gd{constructor(e,t,r){super(ST(t),bT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){QM(this,!0,e),Object.keys(e).forEach(r=>{WM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e?e[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new pd(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,i)=>{r=t(r,o,i)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Lg=new M("",{providedIn:"root",factory:()=>Ug}),Ug="always";function YM(n,e){return[...e.path,n]}function RT(n,e,t=Ug){MT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),ZM(n,e),eN(n,e),XM(n,e),JM(n,e)}function pT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function JM(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function MT(n,e){let t=$M(n);e.validator!==null?n.setValidators(dT(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=GM(n);e.asyncValidator!==null?n.setAsyncValidators(dT(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let o=()=>n.updateValueAndValidity();pT(e._rawValidators,o),pT(e._rawAsyncValidators,o)}function ZM(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&NT(n,e)})}function XM(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&NT(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function NT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function eN(n,e){let t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function tN(n,e){n==null,MT(n,e)}function nN(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function rN(n){return Object.getPrototypeOf(n.constructor)===OM}function oN(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function iN(n,e){if(!e)return null;Array.isArray(e);let t,r,o;return e.forEach(i=>{i.constructor===ET?t=i:rN(i)?r=i:o=i}),o||r||t||null}var sN={provide:Wi,useExisting:En(()=>aN)},tc=Promise.resolve(),aN=(()=>{class n extends Wi{callSetDisabledState;get submitted(){return en(this.submittedReactive)}_submitted=Vi(()=>this.submittedReactive());submittedReactive=oo(!1);_directives=new Set;form;ngSubmit=new ot;options;constructor(t,r,o){super(),this.callSetDisabledState=o,this.form=new md({},xg(t),Fg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){tc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),RT(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){tc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){tc.then(()=>{let r=this._findContainer(t.path),o=new md({});tN(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){tc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){tc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),oN(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new Og(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Y(Pg,10),Y(IT,10),Y(Lg,8))};static \u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&Ba("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Bi([sN]),Xt]})}return n})();function gT(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mT(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var cN=class extends gd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(ST(t),bT(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yd(t)&&(t.nonNullable||t.initialValueIsDefault)&&(mT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new pd(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var lN={provide:oc,useExisting:En(()=>uN)},yT=Promise.resolve(),uN=(()=>{class n extends oc{_changeDetectorRef;callSetDisabledState;control=new cN;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ot;constructor(t,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=iN(this,i)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),nN(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){RT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){yT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,o=r!==0&&Ig(r);yT.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?YM(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Y(Wi,9),Y(Pg,10),Y(IT,10),Y(vT,10),Y(vg,8),Y(Lg,8))};static \u0275dir=qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Bi([lN]),Xt,Pa]})}return n})();var Cq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var dN=(()=>{class n{_validator=uT;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):uT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=qe({type:n,features:[Pa]})}return n})();var fN={provide:Pg,useExisting:En(()=>hN),multi:!0};var hN=(()=>{class n extends dN{required;inputName="required";normalizeInput=Ig;createValidator=t=>HM;enabled(t){return t}static \u0275fac=(()=>{let t;return function(o){return(t||(t=Bu(n)))(o||n)}})();static \u0275dir=qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&qu("required",o._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Bi([fN]),Xt]})}return n})();var pN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=uo({type:n});static \u0275inj=Jn({})}return n})();var vq=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Lg,useValue:t.callSetDisabledState??Ug}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=uo({type:n});static \u0275inj=Jn({imports:[pN]})}return n})();var y={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ht={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},wt={GET:"GET",POST:"POST"},gt=[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE],Hg=[...gt,y.EMAIL_SCOPE],ye={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Cd={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Bt={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Qi={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},ue={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"};var ic={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},tn={QUERY:"query",FRAGMENT:"fragment"},Bg={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},sc={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Yi={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},An={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Ce={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var ac="appmetadata",kT="client_info",po="1",Ji={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Ke={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Se={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},U={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},wn={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},vd={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Ed={username:"username",password:"password"},go={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Id={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},nn={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},Td={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var cc=300;var fr={};ut(fr,{postRequestFailed:()=>uc,unexpectedError:()=>lc});var lc="unexpected_error",uc="post_request_failed";var _d={[lc]:"Unexpected error in authentication.",[uc]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},OT={unexpectedError:{code:lc,desc:_d[lc]},postRequestFailed:{code:uc,desc:_d[uc]}},N=class n extends Error{constructor(e,t,r){let o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||y.EMPTY_STRING,this.errorMessage=t||y.EMPTY_STRING,this.subError=r||y.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function Zi(n,e){return new N(n,e?`${_d[n]} ${e}`:_d[n])}var be={};ut(be,{authTimeNotFound:()=>Dn,authorizationCodeMissingFromServerResponse:()=>Mo,bindingKeyNotRemoved:()=>Ic,cannotAppendScopeSet:()=>So,cannotRemoveEmptyScope:()=>Do,clientInfoDecodingError:()=>hr,clientInfoEmptyError:()=>mo,deviceCodeExpired:()=>pc,deviceCodePollingCancelled:()=>hc,deviceCodeUnknownError:()=>gc,emptyInputScopeSet:()=>mr,endSessionEndpointNotSupported:()=>No,endpointResolutionError:()=>We,hashNotDeserialized:()=>Eo,invalidAssertion:()=>Cc,invalidCacheEnvironment:()=>bn,invalidCacheRecord:()=>bo,invalidClientCredential:()=>vc,invalidState:()=>Vt,keyIdMissing:()=>ko,maxAgeTranspired:()=>_o,methodNotImplemented:()=>P,missingTenantIdError:()=>Ac,multipleMatchingAccounts:()=>fc,multipleMatchingAppMetadata:()=>Ao,multipleMatchingTokens:()=>dc,nestedAppAuthBridgeDisabled:()=>wc,networkError:()=>Co,noAccountFound:()=>mc,noAccountInSilentRequest:()=>Sn,noCryptoObject:()=>yr,noNetworkConnectivity:()=>Tc,nonceMismatch:()=>To,nullOrEmptyToken:()=>yo,openIdConfigError:()=>vo,requestCannotBeMade:()=>wo,stateMismatch:()=>Io,stateNotFound:()=>gr,tokenClaimsCnfRequiredForSignedJwt:()=>Ro,tokenParsingError:()=>pr,tokenRefreshRequired:()=>Rn,unexpectedCredentialType:()=>yc,userCanceled:()=>_c,userTimeoutReached:()=>Ec});var hr="client_info_decoding_error",mo="client_info_empty_error",pr="token_parsing_error",yo="null_or_empty_token",We="endpoints_resolution_error",Co="network_error",vo="openid_config_error",Eo="hash_not_deserialized",Vt="invalid_state",Io="state_mismatch",gr="state_not_found",To="nonce_mismatch",Dn="auth_time_not_found",_o="max_age_transpired",dc="multiple_matching_tokens",fc="multiple_matching_accounts",Ao="multiple_matching_appMetadata",wo="request_cannot_be_made",Do="cannot_remove_empty_scope",So="cannot_append_scopeset",mr="empty_input_scopeset",hc="device_code_polling_cancelled",pc="device_code_expired",gc="device_code_unknown_error",Sn="no_account_in_silent_request",bo="invalid_cache_record",bn="invalid_cache_environment",mc="no_account_found",yr="no_crypto_object",yc="unexpected_credential_type",Cc="invalid_assertion",vc="invalid_client_credential",Rn="token_refresh_required",Ec="user_timeout_reached",Ro="token_claims_cnf_required_for_signedjwt",Mo="authorization_code_missing_from_server_response",Ic="binding_key_not_removed",No="end_session_endpoint_not_supported",ko="key_id_missing",Tc="no_network_connectivity",_c="user_canceled",Ac="missing_tenant_id_error",P="method_not_implemented",wc="nested_app_auth_bridge_disabled";var O={[hr]:"The client info could not be parsed/decoded correctly",[mo]:"The client info was empty",[pr]:"Token cannot be parsed",[yo]:"The token is null or empty",[We]:"Endpoints cannot be resolved",[Co]:"Network request failed",[vo]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Eo]:"The hash parameters could not be deserialized",[Vt]:"State was not the expected format",[Io]:"State mismatch error",[gr]:"State not found",[To]:"Nonce mismatch error",[Dn]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[_o]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[dc]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[fc]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Ao]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[wo]:"Token request cannot be made without authorization code or refresh token.",[Do]:"Cannot remove null or empty scope from ScopeSet",[So]:"Cannot append ScopeSet",[mr]:"Empty input ScopeSet cannot be processed",[hc]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[pc]:"Device code is expired.",[gc]:"Device code stopped polling for unknown reasons.",[Sn]:"Please pass an account object, silent flow is not supported without account information",[bo]:"Cache record object was null or undefined.",[bn]:"Invalid environment when attempting to create cache entry",[mc]:"No account found in cache for given key.",[yr]:"No crypto object detected.",[yc]:"Unexpected credential type.",[Cc]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[vc]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Rn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Ec]:"User defined timeout for device code polling reached",[Ro]:"Cannot generate a POP jwt if the token_claims are not populated",[Mo]:"Server response does not contain an authorization code to proceed",[Ic]:"Could not remove the credential's binding key from storage.",[No]:"The provided authority does not support logout",[ko]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Tc]:"No network connectivity. Check your internet connection.",[_c]:"User cancelled the flow.",[Ac]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[P]:"This method has not been implemented",[wc]:"The nested app auth bridge is disabled"},PT={clientInfoDecodingError:{code:hr,desc:O[hr]},clientInfoEmptyError:{code:mo,desc:O[mo]},tokenParsingError:{code:pr,desc:O[pr]},nullOrEmptyToken:{code:yo,desc:O[yo]},endpointResolutionError:{code:We,desc:O[We]},networkError:{code:Co,desc:O[Co]},unableToGetOpenidConfigError:{code:vo,desc:O[vo]},hashNotDeserialized:{code:Eo,desc:O[Eo]},invalidStateError:{code:Vt,desc:O[Vt]},stateMismatchError:{code:Io,desc:O[Io]},stateNotFoundError:{code:gr,desc:O[gr]},nonceMismatchError:{code:To,desc:O[To]},authTimeNotFoundError:{code:Dn,desc:O[Dn]},maxAgeTranspired:{code:_o,desc:O[_o]},multipleMatchingTokens:{code:dc,desc:O[dc]},multipleMatchingAccounts:{code:fc,desc:O[fc]},multipleMatchingAppMetadata:{code:Ao,desc:O[Ao]},tokenRequestCannotBeMade:{code:wo,desc:O[wo]},removeEmptyScopeError:{code:Do,desc:O[Do]},appendScopeSetError:{code:So,desc:O[So]},emptyInputScopeSetError:{code:mr,desc:O[mr]},DeviceCodePollingCancelled:{code:hc,desc:O[hc]},DeviceCodeExpired:{code:pc,desc:O[pc]},DeviceCodeUnknownError:{code:gc,desc:O[gc]},NoAccountInSilentRequest:{code:Sn,desc:O[Sn]},invalidCacheRecord:{code:bo,desc:O[bo]},invalidCacheEnvironment:{code:bn,desc:O[bn]},noAccountFound:{code:mc,desc:O[mc]},noCryptoObj:{code:yr,desc:O[yr]},unexpectedCredentialType:{code:yc,desc:O[yc]},invalidAssertion:{code:Cc,desc:O[Cc]},invalidClientCredential:{code:vc,desc:O[vc]},tokenRefreshRequired:{code:Rn,desc:O[Rn]},userTimeoutReached:{code:Ec,desc:O[Ec]},tokenClaimsRequired:{code:Ro,desc:O[Ro]},noAuthorizationCodeFromServer:{code:Mo,desc:O[Mo]},bindingKeyNotRemovedError:{code:Ic,desc:O[Ic]},logoutNotSupported:{code:No,desc:O[No]},keyIdMissing:{code:ko,desc:O[ko]},noNetworkConnectivity:{code:Tc,desc:O[Tc]},userCanceledError:{code:_c,desc:O[_c]},missingTenantIdError:{code:Ac,desc:O[Ac]},nestedAppAuthBridgeDisabled:{code:wc,desc:O[wc]}},Dc=class n extends N{constructor(e,t){super(e,t?`${O[e]}: ${t}`:O[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function v(n,e){return new Dc(n,e)}var Cr={createNewGuid:()=>{throw v(P)},base64Decode:()=>{throw v(P)},base64Encode:()=>{throw v(P)},base64UrlEncode:()=>{throw v(P)},encodeKid:()=>{throw v(P)},getPublicKeyThumbprint(){return h(this,null,function*(){throw v(P)})},removeTokenBindingKey(){return h(this,null,function*(){throw v(P)})},clearKeystore(){return h(this,null,function*(){throw v(P)})},signJwt(){return h(this,null,function*(){throw v(P)})},hashString(){return h(this,null,function*(){throw v(P)})}};var Z=(function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n})(Z||{}),Qe=class n{constructor(e,t,r){this.level=Z.Info;let o=()=>{},i=e||n.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:Z.Info,this.correlationId=i.correlationId||y.EMPTY_STRING,this.packageName=t||y.EMPTY_STRING,this.packageVersion=r||y.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Z.Info}}clone(e,t,r){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Z[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:Z.Error,containsPii:!1,correlationId:t||y.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Z.Error,containsPii:!0,correlationId:t||y.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Z.Warning,containsPii:!1,correlationId:t||y.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Z.Warning,containsPii:!0,correlationId:t||y.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Z.Info,containsPii:!1,correlationId:t||y.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Z.Info,containsPii:!0,correlationId:t||y.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Z.Verbose,containsPii:!1,correlationId:t||y.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Z.Verbose,containsPii:!0,correlationId:t||y.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Z.Trace,containsPii:!1,correlationId:t||y.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Z.Trace,containsPii:!0,correlationId:t||y.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var Ad="@azure/msal-common",Xi="15.13.1";var vr={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var Ye={};ut(Ye,{authorityMismatch:()=>Pc,authorityUriInsecure:()=>Po,cannotAllowPlatformBroker:()=>Oc,cannotSetOIDCOptions:()=>kc,claimsRequestParsingError:()=>Sc,emptyInputScopesError:()=>Fo,invalidAuthenticationHeader:()=>Nc,invalidAuthorityMetadata:()=>Bo,invalidAuthorizePostBodyParameters:()=>Fc,invalidClaims:()=>Er,invalidCloudDiscoveryMetadata:()=>Ir,invalidCodeChallengeMethod:()=>bc,invalidRequestMethodForEAR:()=>xc,logoutRequestEmpty:()=>Uo,missingNonceAuthenticationHeader:()=>Mc,missingSshJwk:()=>Mn,missingSshKid:()=>Rc,pkceParamsMissing:()=>Ho,redirectUriEmpty:()=>Oo,tokenRequestEmpty:()=>Lo,untrustedAuthority:()=>Vo,urlEmptyError:()=>xo,urlParseError:()=>rn});var Oo="redirect_uri_empty",Sc="claims_request_parsing_error",Po="authority_uri_insecure",rn="url_parse_error",xo="empty_url_error",Fo="empty_input_scopes_error",Er="invalid_claims",Lo="token_request_empty",Uo="logout_request_empty",bc="invalid_code_challenge_method",Ho="pkce_params_missing",Ir="invalid_cloud_discovery_metadata",Bo="invalid_authority_metadata",Vo="untrusted_authority",Mn="missing_ssh_jwk",Rc="missing_ssh_kid",Mc="missing_nonce_authentication_header",Nc="invalid_authentication_header",kc="cannot_set_OIDCOptions",Oc="cannot_allow_platform_broker",Pc="authority_mismatch",xc="invalid_request_method_for_EAR",Fc="invalid_authorize_post_body_parameters";var ce={[Oo]:"A redirect URI is required for all calls, and none has been set.",[Sc]:"Could not parse the given claims request object.",[Po]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[rn]:"URL could not be parsed into appropriate segments.",[xo]:"URL was empty or null.",[Fo]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Er]:"Given claims parameter must be a stringified JSON object.",[Lo]:"Token request was empty and not found in cache.",[Uo]:"The logout request was null or undefined.",[bc]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Ho]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Ir]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Bo]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Vo]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Mn]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Rc]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Mc]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Nc]:"Invalid authentication header provided",[kc]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Oc]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Pc]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[Fc]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[xc]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},xT={redirectUriNotSet:{code:Oo,desc:ce[Oo]},claimsRequestParsingError:{code:Sc,desc:ce[Sc]},authorityUriInsecure:{code:Po,desc:ce[Po]},urlParseError:{code:rn,desc:ce[rn]},urlEmptyError:{code:xo,desc:ce[xo]},emptyScopesError:{code:Fo,desc:ce[Fo]},invalidClaimsRequest:{code:Er,desc:ce[Er]},tokenRequestEmptyError:{code:Lo,desc:ce[Lo]},logoutRequestEmptyError:{code:Uo,desc:ce[Uo]},invalidCodeChallengeMethod:{code:bc,desc:ce[bc]},invalidCodeChallengeParams:{code:Ho,desc:ce[Ho]},invalidCloudDiscoveryMetadata:{code:Ir,desc:ce[Ir]},invalidAuthorityMetadata:{code:Bo,desc:ce[Bo]},untrustedAuthority:{code:Vo,desc:ce[Vo]},missingSshJwk:{code:Mn,desc:ce[Mn]},missingSshKid:{code:Rc,desc:ce[Rc]},missingNonceAuthenticationHeader:{code:Mc,desc:ce[Mc]},invalidAuthenticationHeader:{code:Nc,desc:ce[Nc]},cannotSetOIDCOptions:{code:kc,desc:ce[kc]},cannotAllowPlatformBroker:{code:Oc,desc:ce[Oc]},authorityMismatch:{code:Pc,desc:ce[Pc]},invalidAuthorizePostBodyParameters:{code:Fc,desc:ce[Fc]},invalidRequestMethodForEAR:{code:xc,desc:ce[xc]}},Lc=class n extends N{constructor(e){super(e,ce[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function j(n){return new Lc(n)}var oe=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){let[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var de=class n{constructor(e){let t=e?oe.trimArrayEntries([...e]):[],r=t?oe.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw j(Fo);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){let r=(e||y.EMPTY_STRING).split(" ");return new n(r)}static createSearchScopes(e){let t=e&&e.length>0?e:[...gt],r=new n(t);return r.containsOnlyOIDCScopes()?r.removeScope(y.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let t=this.printScopesLowerCase().split(" "),r=new n(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return Hg.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw v(So)}}removeScope(e){if(!e)throw v(Do);this.scopes.delete(e.trim())}removeOIDCScopes(){Hg.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw v(mr);let t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw v(mr);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):y.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function es(n,e){if(!n)throw v(mo);try{let t=e(n);return JSON.parse(t)}catch{throw v(hr)}}function on(n){if(!n)throw v(hr);let e=n.split(An.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?y.EMPTY_STRING:e[1]}}function Vg(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Tr(n,e,t,r){if(r){let{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l,preferred_username:u,upn:f,login_hint:p}=r,g=s||c||l||"";return{tenantId:g,localAccountId:o||i||"",name:a,username:u||f||"",loginHint:p,isHomeTenant:Vg(g,n)}}else return{tenantId:t,localAccountId:e,username:"",isHomeTenant:Vg(t,n)}}function jo(n,e,t,r){let o=n;if(e){let i=e,{isHomeTenant:a}=i,c=qt(i,["isHomeTenant"]);o=C(C({},n),c)}if(t){let s=Tr(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,c=qt(s,["isHomeTenant"]);return o=_(C(C({},o),c),{idTokenClaims:t,idToken:r}),o}return o}var Je={Default:0,Adfs:1,Dsts:2,Ciam:3};function $o(n){return n&&(n.tid||n.tfp||n.acr)||null}var ie={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var ee=class n{static getAccountInfo(e){return{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map((e.tenantProfiles||[]).map(t=>[t.tenantId,t])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){let o=new n;t.authorityType===Je.Adfs?o.authorityType=Yi.ADFS_ACCOUNT_TYPE:t.protocolMode===ie.OIDC?o.authorityType=Yi.GENERIC_ACCOUNT_TYPE:o.authorityType=Yi.MSSTS_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=es(e.clientInfo,r),i.xms_tdbr&&(o.dataBoundary=i.xms_tdbr==="EU"?"EU":"None")),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw v(bn);o.environment=s,o.realm=i?.utid||$o(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.loginHint=e.idTokenClaims?.login_hint,o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let l=Tr(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){let o=new n;return o.authorityType=e.authorityType||Yi.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.loginHint=e.loginHint,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o.dataBoundary=e.dataBoundary,o}static generateHomeAccountId(e,t,r,o,i){if(!(t===Je.Adfs||t===Je.Dsts)){if(e)try{let s=es(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){let i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}};var ve={};ut(ve,{checkMaxAge:()=>Uc,extractTokenClaims:()=>Nn,getJWSPayload:()=>FT,isKmsi:()=>jg});function Nn(n,e){let t=FT(n);try{let r=e(t);return JSON.parse(r)}catch{throw v(pr)}}function jg(n){if(!n.signin_state)return!1;let e=["kmsi","dvc_dmjd"];return n.signin_state.some(r=>e.includes(r.trim().toLowerCase()))}function FT(n){if(!n)throw v(yo);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw v(pr);return t[2]}function Uc(n,e){if(e===0||Date.now()-3e5>n+e)throw v(_o)}var an={};ut(an,{getDeserializedResponse:()=>$g,mapToQueryString:()=>sn,normalizeUrlForComparison:()=>gN,stripLeadingHashOrQuery:()=>UT});function LT(n){if(!n)return n;let e=n.toLowerCase();return oe.endsWith(e,"?")?e=e.slice(0,-1):oe.endsWith(e,"?/")&&(e=e.slice(0,-2)),oe.endsWith(e,"/")||(e+="/"),e}function UT(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function $g(n){if(!n||n.indexOf("=")<0)return null;try{let e=UT(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw v(Eo)}return null}function sn(n,e=!0,t){let r=new Array;return n.forEach((o,i)=>{!e&&t&&i in t?r.push(`${i}=${o}`):r.push(`${i}=${encodeURIComponent(o)}`)}),r.join("&")}function gN(n){if(!n)return n;let e=n.split("#")[0];try{let t=new URL(e),r=t.origin+t.pathname+t.search;return LT(r)}catch{return LT(e)}}var H=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw j(xo);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return oe.endsWith(t,"?")?t=t.slice(0,-1):oe.endsWith(t,"?/")&&(t=t.slice(0,-2)),oe.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw j(rn)}if(!e.HostNameAndPort||!e.PathSegments)throw j(rn);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw j(Po)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===Bt.COMMON||r[0]===Bt.ORGANIZATIONS)&&(r[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw j(rn);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw j(rn);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===y.FORWARD_SLASH){let o=new n(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!$g(e)}};var BT={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Gg=BT.endpointMetadata,zg=BT.instanceDiscoveryMetadata,qg=new Set;zg.metadata.forEach(n=>{n.aliases.forEach(e=>{qg.add(e)})});function VT(n,e){let t,r=n.canonicalAuthority;if(r){let o=new H(r).getUrlComponents().HostNameAndPort;t=HT(o,n.cloudDiscoveryMetadata?.metadata,Ke.CONFIG,e)||HT(o,zg.metadata,Ke.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function HT(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let o=Hc(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function jT(n){return Hc(zg.metadata,n)}function Hc(n,e){for(let t=0;t<n.length;t++){let r=n[t];if(r.aliases.includes(e))return r}return null}var Vc={};ut(Vc,{cacheErrorUnknown:()=>Bc,cacheQuotaExceeded:()=>wd});var wd="cache_quota_exceeded",Bc="cache_error_unknown";var Kg={[wd]:"Exceeded cache storage capacity.",[Bc]:"Unexpected error occurred when using cache storage."},_r=class n extends N{constructor(e,t){let r=t||(Kg[e]?Kg[e]:Kg[Bc]);super(`${e}: ${r}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}};function ts(n){return n instanceof Error?n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED"||n.message.includes("exceeded the quota")?new _r(wd):new _r(n.name,n.message):new _r(Bc)}var Go=class{constructor(e,t,r,o,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Ad,Xi),this.staticAuthorityOptions=i,this.performanceClient=o}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(Object.keys(e).length===0||Object.values(e).every(o=>!o))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let r=this.getAllAccounts(e,t);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,t){let r=this.getAccountsFilteredBy(e,t);return r.length>0?ee.getAccountInfo(r[0]):null}buildTenantProfiles(e,t,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,o,i){let s=null,a;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;let c=this.getIdToken(e,o,t,r.tenantId);return c&&(a=Nn(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=jo(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,t,r,o){let i=ee.getAccountInfo(e),s=i.tenantProfiles||new Map,a=this.getTokenKeys();if(r){let l=s.get(r);if(l)s=new Map([[r,l]]);else return[]}let c=[];return s.forEach(l=>{let u=this.getTenantedAccountInfoByFilter(i,a,l,t,o);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,r,o){return h(this,null,function*(){if(!e)throw v(bo);try{e.account&&(yield this.setAccount(e.account,t,r)),e.idToken&&o?.idToken!==!1&&(yield this.setIdTokenCredential(e.idToken,t,r)),e.accessToken&&o?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken,t,r)),e.refreshToken&&o?.refreshToken!==!1&&(yield this.setRefreshTokenCredential(e.refreshToken,t,r)),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof N?i:ts(i)}})}saveAccessToken(e,t,r){return h(this,null,function*(){let o={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),s=de.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,o,!1))return;let c=this.getAccessTokenCredential(a,t);c&&this.credentialMatchesFilter(c,o)&&de.fromString(c.target).intersectingScopeSets(s)&&this.removeAccessToken(a,t)}),yield this.setAccessTokenCredential(e,t,r)})}getAccountsFilteredBy(e,t){let r=this.getAccountKeys(),o=[];return r.forEach(i=>{let s=this.getAccount(i,t);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;let a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,a));c&&c.length===0||o.push(s)}),o}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===U.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;let i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,t){this.removeAccountContext(e,t);let r=this.getAccountKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.filter(o).forEach(i=>{this.removeItem(i,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){let r=this.getTokenKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.idToken.filter(o).forEach(i=>{this.removeIdToken(i,t)}),r.accessToken.filter(o).forEach(i=>{this.removeAccessToken(i,t)}),r.refreshToken.filter(o).forEach(i=>{this.removeRefreshToken(i,t)})}removeAccessToken(e,t){let r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==U.POP)return;let o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${o}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ce.ID_TOKEN,clientId:this.clientId,realm:o},a=this.getIdTokensByFilter(s,t,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){let u=new Map;a.forEach((p,g)=>{p.realm===e.tenantId&&u.set(g,p)});let f=u.size;if(f<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(f===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,f)=>{this.removeIdToken(f,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){let o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,C({clientId:this.clientId},e)))return;let a=this.getIdTokenCredential(s,t);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,o){let i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);let s=de.createSearchScopes(t.scopes),a=t.authenticationScheme||U.BEARER,c=a&&a.toLowerCase()!==U.BEARER.toLowerCase()?Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ce.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,f=[];u.forEach(g=>{if(this.accessTokenKeyMatchesFilter(g,l,!0)){let I=this.getAccessTokenCredential(g,i);I&&this.credentialMatchesFilter(I,l)&&f.push(I)}});let p=f.length;return p<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):p>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),f.forEach(g=>{this.removeAccessToken(this.generateCredentialKey(g),i)}),this.performanceClient.addFields({multiMatchedAT:f.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),f[0])}accessTokenKeyMatchesFilter(e,t,r){let o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){let r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;let s=this.getAccessTokenCredential(i,t);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?po:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ce.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(f=>{if(this.refreshTokenKeyMatchesFilter(f,a)){let p=this.getRefreshTokenCredential(f,r);p&&this.credentialMatchesFilter(p,a)&&l.push(p)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw v(Ao);return o[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===po)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let o=VT(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==Ce.ACCESS_TOKEN&&e.credentialType!==Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:de.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(ac)!==-1}isAuthorityMetadata(e){return e.indexOf(Ji.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Ji.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}},jc=class extends Go{setAccount(){return h(this,null,function*(){throw v(P)})}getAccount(){throw v(P)}setIdTokenCredential(){return h(this,null,function*(){throw v(P)})}getIdTokenCredential(){throw v(P)}setAccessTokenCredential(){return h(this,null,function*(){throw v(P)})}getAccessTokenCredential(){throw v(P)}setRefreshTokenCredential(){return h(this,null,function*(){throw v(P)})}getRefreshTokenCredential(){throw v(P)}setAppMetadata(){throw v(P)}getAppMetadata(){throw v(P)}setServerTelemetry(){throw v(P)}getServerTelemetry(){throw v(P)}setAuthorityMetadata(){throw v(P)}getAuthorityMetadata(){throw v(P)}getAuthorityMetadataKeys(){throw v(P)}setThrottlingCache(){throw v(P)}getThrottlingCache(){throw v(P)}removeItem(){throw v(P)}getKeys(){throw v(P)}getAccountKeys(){throw v(P)}getTokenKeys(){throw v(P)}generateCredentialKey(){throw v(P)}generateAccountKey(){throw v(P)}};var d={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},jK=new Map([[d.AcquireTokenByCode,"ATByCode"],[d.AcquireTokenByRefreshToken,"ATByRT"],[d.AcquireTokenSilent,"ATS"],[d.AcquireTokenSilentAsync,"ATSAsync"],[d.AcquireTokenPopup,"ATPopup"],[d.AcquireTokenRedirect,"ATRedirect"],[d.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[d.CryptoOptsSignJwt,"CryptoSignJwt"],[d.SilentCacheClientAcquireToken,"SltCacheClientAT"],[d.SilentIframeClientAcquireToken,"SltIframeClientAT"],[d.SilentRefreshClientAcquireToken,"SltRClientAT"],[d.SsoSilent,"SsoSlt"],[d.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[d.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[d.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[d.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[d.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[d.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[d.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[d.BrokerHandhshake,"BrokerHandshake"],[d.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[d.AcquireTokenByBroker,"ATByBroker"],[d.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[d.RefreshTokenClientAcquireToken,"RTClientAT"],[d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[d.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[d.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[d.AcquireTokenFromCache,"ATFromCache"],[d.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[d.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[d.AcquireTokenBySilentIframe,"ATBySltIframe"],[d.InitializeBaseRequest,"InitBaseReq"],[d.InitializeSilentRequest,"InitSltReq"],[d.InitializeClientApplication,"InitClientApplication"],[d.InitializeCache,"InitCache"],[d.ImportExistingCache,"importCache"],[d.SetUserData,"setUserData"],[d.LocalStorageUpdated,"localStorageUpdated"],[d.SilentIframeClientTokenHelper,"SIClientTHelper"],[d.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[d.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[d.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[d.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[d.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[d.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[d.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[d.GetAuthCodeUrl,"GetAuthCodeUrl"],[d.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[d.HandleCodeResponse,"HandleCodeResp"],[d.HandleResponseEar,"HandleRespEar"],[d.HandleResponseCode,"HandleRespCode"],[d.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[d.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[d.AuthClientAcquireToken,"AuthClientAT"],[d.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[d.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[d.PopTokenGenerateCnf,"PopTGenCnf"],[d.PopTokenGenerateKid,"PopTGenKid"],[d.HandleServerTokenResponse,"HandleServerTRes"],[d.DeserializeResponse,"DeserializeRes"],[d.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[d.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[d.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[d.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[d.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[d.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[d.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[d.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[d.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[d.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[d.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[d.AcquireTokenByCodeAsync,"ATByCodeAsync"],[d.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[d.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[d.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[d.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[d.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[d.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[d.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[d.NativeGenerateAuthResult,"NtvGenAuthRes"],[d.RemoveHiddenIframe,"RemoveHiddenIframe"],[d.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[d.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[d.GeneratePkceCodes,"GenPkceCodes"],[d.GenerateCodeVerifier,"GenCodeVerifier"],[d.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[d.Sha256Digest,"Sha256Digest"],[d.GetRandomValues,"GetRandomValues"],[d.GenerateHKDF,"genHKDF"],[d.GenerateBaseKey,"genBaseKey"],[d.Base64Decode,"b64Decode"],[d.UrlEncodeArr,"urlEncArr"],[d.Encrypt,"encrypt"],[d.Decrypt,"decrypt"],[d.GenerateEarKey,"genEarKey"],[d.DecryptEarResponse,"decryptEarResp"]]),Wg={NotStarted:0,InProgress:1,Completed:2};var Dd=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},kn=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Wg.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Dd}}startPerformanceMeasurement(){return new Dd}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var Sd={tokenRenewalOffsetSeconds:cc,preventCorsPreflight:!1},mN={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Z.Info,correlationId:y.EMPTY_STRING},yN={claimsBasedCachingEnabled:!1},CN={sendGetRequestAsync(){return h(this,null,function*(){throw v(P)})},sendPostRequestAsync(){return h(this,null,function*(){throw v(P)})}},vN={sku:y.SKU,version:Xi,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},EN={clientSecret:y.EMPTY_STRING,clientAssertion:void 0},IN={azureCloudInstance:vr.None,tenant:`${y.DEFAULT_COMMON_TENANT}`},TN={application:{appName:"",appVersion:""}};function $T({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:f,serializableCache:p}){let g=C(C({},mN),t);return{authOptions:_N(n),systemOptions:C(C({},Sd),e),loggerOptions:g,cacheOptions:C(C({},yN),r),storageInterface:o||new jc(n.clientId,Cr,new Qe(g),new kn),networkInterface:i||CN,cryptoInterface:s||Cr,clientCredentials:a||EN,libraryInfo:C(C({},vN),c),telemetry:C(C({},TN),l),serverTelemetryManager:u||null,persistencePlugin:f||null,serializableCache:p||null}}function _N(n){return C({clientCapabilities:[],azureCloudOptions:IN,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},n)}function bd(n){return n.authOptions.authority.options.protocolMode===ie.OIDC}var Ve={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var _e={};ut(_e,{addApplicationTelemetry:()=>zc,addAuthorizationCode:()=>Hm,addBrokerParameters:()=>Fn,addCcsOid:()=>Pn,addCcsUpn:()=>Ar,addClaims:()=>Qo,addClientAssertion:()=>Wc,addClientAssertionType:()=>Qc,addClientCapabilitiesToClaims:()=>GT,addClientId:()=>Ko,addClientInfo:()=>Jo,addClientSecret:()=>Kc,addCodeChallengeParams:()=>UN,addCodeVerifier:()=>Vm,addCorrelationId:()=>Yo,addDeviceCode:()=>HN,addDomainHint:()=>Fm,addEARParameters:()=>GN,addExtraQueryParameters:()=>xn,addGrantType:()=>Yc,addIdTokenHint:()=>xm,addInstanceAware:()=>Jc,addLibraryInfo:()=>Gc,addLoginHint:()=>rs,addLogoutHint:()=>jm,addNativeBroker:()=>LN,addNonce:()=>Um,addOboAssertion:()=>BN,addPassword:()=>$N,addPopToken:()=>Zc,addPostBodyParameters:()=>zN,addPostLogoutRedirectUri:()=>Pm,addPrompt:()=>Lm,addRedirectUri:()=>Wo,addRefreshToken:()=>Bm,addRequestTokenUse:()=>VN,addResponseMode:()=>Om,addResponseType:()=>FN,addScopes:()=>qo,addServerTelemetry:()=>el,addSid:()=>Pd,addSshJwk:()=>Xc,addState:()=>qc,addThrottling:()=>tl,addUsername:()=>jN,instrumentBrokerParams:()=>zo});var On={};ut(On,{ACCESS_TOKEN:()=>DN,BROKER_CLIENT_ID:()=>$c,BROKER_REDIRECT_URI:()=>Od,CCS_HEADER:()=>PN,CLAIMS:()=>Zg,CLIENT_ASSERTION:()=>Tm,CLIENT_ASSERTION_TYPE:()=>_m,CLIENT_ID:()=>cn,CLIENT_INFO:()=>NN,CLIENT_REQUEST_ID:()=>cm,CLIENT_SECRET:()=>Im,CODE:()=>om,CODE_CHALLENGE:()=>im,CODE_CHALLENGE_METHOD:()=>sm,CODE_VERIFIER:()=>am,DEVICE_CODE:()=>Em,DOMAIN_HINT:()=>Mm,EAR_JWE_CRYPTO:()=>km,EAR_JWK:()=>Nm,ERROR:()=>AN,ERROR_DESCRIPTION:()=>wN,EXPIRES_IN:()=>bN,FOCI:()=>ON,GRANT_TYPE:()=>Jg,ID_TOKEN:()=>SN,ID_TOKEN_HINT:()=>vm,INSTANCE_AWARE:()=>ns,LOGIN_HINT:()=>Rm,LOGOUT_HINT:()=>Sm,NATIVE_BROKER:()=>Dm,NONCE:()=>nm,OBO_ASSERTION:()=>Am,ON_BEHALF_OF:()=>kN,POST_LOGOUT_URI:()=>Cm,PROMPT:()=>rm,REDIRECT_URI:()=>Rd,REFRESH_TOKEN:()=>em,REFRESH_TOKEN_EXPIRES_IN:()=>RN,REQUESTED_TOKEN_USE:()=>wm,REQ_CNF:()=>Nd,RESPONSE_MODE:()=>Yg,RESPONSE_TYPE:()=>Qg,RETURN_SPA_CODE:()=>kd,SCOPE:()=>Xg,SESSION_STATE:()=>MN,SID:()=>bm,STATE:()=>tm,TOKEN_TYPE:()=>Md,X_APP_NAME:()=>mm,X_APP_VER:()=>ym,X_CLIENT_CPU:()=>fm,X_CLIENT_CURR_TELEM:()=>hm,X_CLIENT_EXTRA_SKU:()=>xN,X_CLIENT_LAST_TELEM:()=>pm,X_CLIENT_OS:()=>dm,X_CLIENT_SKU:()=>lm,X_CLIENT_VER:()=>um,X_MS_LIB_CAPABILITY:()=>gm});var cn="client_id",Rd="redirect_uri",Qg="response_type",Yg="response_mode",Jg="grant_type",Zg="claims",Xg="scope",AN="error",wN="error_description",DN="access_token",SN="id_token",em="refresh_token",bN="expires_in",RN="refresh_token_expires_in",tm="state",nm="nonce",rm="prompt",MN="session_state",NN="client_info",om="code",im="code_challenge",sm="code_challenge_method",am="code_verifier",cm="client-request-id",lm="x-client-SKU",um="x-client-VER",dm="x-client-OS",fm="x-client-CPU",hm="x-client-current-telemetry",pm="x-client-last-telemetry",gm="x-ms-lib-capability",mm="x-app-name",ym="x-app-ver",Cm="post_logout_redirect_uri",vm="id_token_hint",Em="device_code",Im="client_secret",Tm="client_assertion",_m="client_assertion_type",Md="token_type",Nd="req_cnf",Am="assertion",wm="requested_token_use",kN="on_behalf_of",ON="foci",PN="X-AnchorMailbox",kd="return_spa_code",Dm="nativebroker",Sm="logout_hint",bm="sid",Rm="login_hint",Mm="domain_hint",xN="x-client-xtra-sku",$c="brk_client_id",Od="brk_redirect_uri",ns="instance_aware",Nm="ear_jwk",km="ear_jwe_crypto";function zo(n,e,t){if(!e)return;let r=n.get(cn);r&&n.has($c)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(Rd)},e)}function FN(n,e){n.set(Qg,e)}function Om(n,e){n.set(Yg,e||Bg.QUERY)}function LN(n){n.set(Dm,"1")}function qo(n,e,t=!0,r=gt){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");let o=t?[...e||[],...r]:e||[],i=new de(o);n.set(Xg,i.printScopes())}function Ko(n,e){n.set(cn,e)}function Wo(n,e){n.set(Rd,e)}function Pm(n,e){n.set(Cm,e)}function xm(n,e){n.set(vm,e)}function Fm(n,e){n.set(Mm,e)}function rs(n,e){n.set(Rm,e)}function Ar(n,e){n.set(ye.CCS_HEADER,`UPN:${e}`)}function Pn(n,e){n.set(ye.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function Pd(n,e){n.set("sid",e)}function Qo(n,e,t){let r=GT(e,t);try{JSON.parse(r)}catch{throw j(Er)}n.set(Zg,r)}function Yo(n,e){n.set(cm,e)}function Gc(n,e){n.set(lm,e.sku),n.set(um,e.version),e.os&&n.set(dm,e.os),e.cpu&&n.set(fm,e.cpu)}function zc(n,e){e?.appName&&n.set(mm,e.appName),e?.appVersion&&n.set(ym,e.appVersion)}function Lm(n,e){n.set(rm,e)}function qc(n,e){e&&n.set(tm,e)}function Um(n,e){n.set(nm,e)}function UN(n,e,t){if(e&&t)n.set(im,e),n.set(sm,t);else throw j(Ho)}function Hm(n,e){n.set(om,e)}function HN(n,e){n.set(Em,e)}function Bm(n,e){n.set(em,e)}function Vm(n,e){n.set(am,e)}function Kc(n,e){n.set(Im,e)}function Wc(n,e){e&&n.set(Tm,e)}function Qc(n,e){e&&n.set(_m,e)}function BN(n,e){n.set(Am,e)}function VN(n,e){n.set(wm,e)}function Yc(n,e){n.set(Jg,e)}function Jo(n){n.set(kT,"1")}function Jc(n){n.has(ns)||n.set(ns,"true")}function xn(n,e){Object.entries(e).forEach(([t,r])=>{!n.has(t)&&r&&n.set(t,r)})}function GT(n,e){let t;if(!n)t={};else try{t=JSON.parse(n)}catch{throw j(Er)}return e&&e.length>0&&(t.hasOwnProperty(Qi.ACCESS_TOKEN)||(t[Qi.ACCESS_TOKEN]={}),t[Qi.ACCESS_TOKEN][Qi.XMS_CC]={values:e}),JSON.stringify(t)}function jN(n,e){n.set(Ed.username,e)}function $N(n,e){n.set(Ed.password,e)}function Zc(n,e){e&&(n.set(Md,U.POP),n.set(Nd,e))}function Xc(n,e){e&&(n.set(Md,U.SSH),n.set(Nd,e))}function el(n,e){n.set(hm,e.generateCurrentRequestHeaderValue()),n.set(pm,e.generateLastRequestHeaderValue())}function tl(n){n.set(gm,wn.X_MS_LIB_CAPABILITY_VALUE)}function jm(n,e){n.set(Sm,e)}function Fn(n,e,t){n.has($c)||n.set($c,e),n.has(Od)||n.set(Od,t)}function GN(n,e){n.set(Nm,encodeURIComponent(e)),n.set(km,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function zN(n,e){Object.entries(e).forEach(([t,r])=>{r&&n.set(t,r)})}var Hd={};ut(Hd,{createDiscoveredInstance:()=>Wm});function zT(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function qT(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function KT(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var Ee=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{let a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},m=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var WT=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(t,r){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)r.region_source=go.ENVIRONMENT_VARIABLE;else{let i=n.IMDS_OPTIONS;try{let s=yield m(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(y.IMDS_VERSION,i);if(s.status===Ht.SUCCESS&&(o=s.body,r.region_source=go.IMDS),s.status===Ht.BAD_REQUEST){let a=yield m(this.getCurrentVersion.bind(this),d.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=go.FAILED_AUTO_DETECTION,null;let c=yield m(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===Ht.SUCCESS&&(o=c.body,r.region_source=go.IMDS)}}catch{return r.region_source=go.FAILED_AUTO_DETECTION,null}}return o||(r.region_source=go.FAILED_AUTO_DETECTION),o||null})}getRegionFromIMDS(t,r){return h(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,y.IMDS_TIMEOUT)})}getCurrentVersion(t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=yield this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?format=json`,t);return r.status===Ht.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var fe={};ut(fe,{createAccessTokenEntity:()=>zm,createIdTokenEntity:()=>Gm,createRefreshTokenEntity:()=>qm,generateAppMetadataKey:()=>ek,generateAuthorityMetadataExpiresAt:()=>Fd,isAccessTokenEntity:()=>QN,isAppMetadataEntity:()=>tk,isAuthorityMetadataEntity:()=>nk,isAuthorityMetadataExpired:()=>Ld,isCredentialEntity:()=>xd,isIdTokenEntity:()=>YN,isRefreshTokenEntity:()=>JN,isServerTelemetryEntity:()=>ZN,isThrottlingEntity:()=>XN,updateAuthorityEndpointMetadata:()=>is,updateCloudDiscoveryMetadata:()=>rl});var Ae={};ut(Ae,{delay:()=>WN,isCacheExpired:()=>KN,isTokenExpired:()=>os,nowSeconds:()=>mt,toDateFromSeconds:()=>nl,toSecondsFromDate:()=>qN,wasClockTurnedBack:()=>$m});function mt(){return Math.round(new Date().getTime()/1e3)}function qN(n){return n.getTime()/1e3}function nl(n){return n?new Date(Number(n)*1e3):new Date}function os(n,e){let t=Number(n)||0;return mt()+e>t}function KN(n,e){let t=Number(n)+e*24*60*60*1e3;return Date.now()>t}function $m(n){return Number(n)>mt()}function WN(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function Gm(n,e,t,r,o){return{credentialType:Ce.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o,lastUpdatedAt:Date.now().toString()}}function zm(n,e,t,r,o,i,s,a,c,l,u,f,p,g,I){let T={homeAccountId:n,credentialType:Ce.ACCESS_TOKEN,secret:t,cachedAt:mt().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||U.BEARER,lastUpdatedAt:Date.now().toString()};if(f&&(T.userAssertionHash=f),l&&(T.refreshOn=l.toString()),g&&(T.requestedClaims=g,T.requestedClaimsHash=I),T.tokenType?.toLowerCase()!==U.BEARER.toLowerCase())switch(T.credentialType=Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME,T.tokenType){case U.POP:let A=Nn(t,c);if(!A?.cnf?.kid)throw v(Ro);T.keyId=A.cnf.kid;break;case U.SSH:T.keyId=p}return T}function qm(n,e,t,r,o,i,s){let a={credentialType:Ce.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,lastUpdatedAt:Date.now().toString()};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function xd(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function QN(n){return n?xd(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===Ce.ACCESS_TOKEN||n.credentialType===Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function YN(n){return n?xd(n)&&n.hasOwnProperty("realm")&&n.credentialType===Ce.ID_TOKEN:!1}function JN(n){return n?xd(n)&&n.credentialType===Ce.REFRESH_TOKEN:!1}function ZN(n,e){let t=n.indexOf(Se.CACHE_KEY)===0,r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function XN(n,e){let t=!1;n&&(t=n.indexOf(wn.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function ek({environment:n,clientId:e}){return[ac,n,e].join(An.CACHE_KEY_SEPARATOR).toLowerCase()}function tk(n,e){return e?n.indexOf(ac)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function nk(n,e){return e?n.indexOf(Ji.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Fd(){return mt()+Ji.REFRESH_TIME_SECONDS}function is(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function rl(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function Ld(n){return n.expiresAt<=mt()}var Dt=class n{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new WT(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(y.CIAM_AUTH_URL))return Je.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case y.ADFS:return Je.Adfs;case y.DSTS:return Je.Dsts}return Je.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new H(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw v(We)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw v(We)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw v(We)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw v(No);return this.replacePath(this.metadata.end_session_endpoint)}else throw v(We)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw v(We)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw v(We)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Je.Default&&this.protocolMode!==ie.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,o=new H(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(c===0&&this.canReplaceTenant(o)){let u=new H(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Je.Adfs||this.protocolMode===ie.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield m(this.updateCloudDiscoveryMetadata.bind(this),d.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=yield m(this.updateEndpointMetadata.bind(this),d.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Fd(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==Ke.CACHE&&r?.source!==Ke.CACHE&&(e.expiresAt=Fd(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===Ke.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let o=yield m(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);is(e,o,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=yield m(this.getEndpointMetadataFromNetwork.bind(this),d.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=yield m(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),is(e,r,!0),Ke.NETWORK;throw v(vo,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),is(e,t,!1),{source:Ke.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return is(e,o,!1),{source:Ke.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=Ld(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Ke.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new H(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw j(Bo)}return null}getEndpointMetadataFromNetwork(){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let r=yield this.networkInterface.sendGetRequestAsync(t,e);return zT(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Gg?Gg[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==y.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Id.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let r=yield m(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),d.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=Id.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,n.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=Id.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=yield m(this.getCloudDiscoveryMetadataFromNetwork.bind(this),d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return rl(e,r,!0),Ke.NETWORK;throw j(Vo)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||y.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),rl(e,t,!1),Ke.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=jT(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),rl(e,o,!1),Ke.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let r=Ld(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Ke.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Je.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=Hc(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),j(Ir)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${y.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},r=null;try{let o=yield this.networkInterface.sendGetRequestAsync(e,t),i,s;if(qT(o.body))i=o.body,s=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(KT(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),i=o.body,i.error===y.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Hc(s,this.hostnameAndPort)}catch(o){if(o instanceof N)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let i=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&H.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==vr.None){let o=t.tenant?t.tenant:y.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return y.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw v(We)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return qg.has(e)}static isPublicCloudAuthority(e){return y.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let o=new H(e);o.validateAsUri();let i=o.getUrlComponents(),s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${y.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=H.constructAuthorityUriFromObject(_(C({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r=C({},e);return r.authorization_endpoint=n.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=n.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=n.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,o=new H(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(y.CIAM_AUTH_URL)){let i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${y.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};Dt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Bt.COMMON,Bt.CONSUMERS,Bt.ORGANIZATIONS]);function QT(n){let r=new H(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case Bt.COMMON:case Bt.ORGANIZATIONS:case Bt.CONSUMERS:return;default:return r}}function Ud(n){return n.endsWith(y.FORWARD_SLASH)?n:`${n}${y.FORWARD_SLASH}`}function Km(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw j(Ir)}return{canonicalAuthority:n.authority?Ud(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function Wm(n,e,t,r,o,i,s){return h(this,null,function*(){s?.addQueueMeasurement(d.AuthorityFactoryCreateDiscoveredInstance,i);let a=Dt.transformCIAMAuthority(Ud(n)),c=new Dt(a,e,t,r,o,i,s);try{return yield m(c.resolveEndpointsAsync.bind(c),d.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw v(We)}})}var st=class n extends N{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,n.prototype)}};function Ln(n,e,t){return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}var Un=class n{static generateThrottlingStorageKey(e){return`${wn.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){let o=n.generateThrottlingStorageKey(t),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now()){e.removeItem(o,r);return}throw new st(i.errorCodes?.join(" ")||y.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,o){if(n.checkResponseStatus(r)||n.checkResponseForRetryAfter(r)){let i={throttleTime:n.calculateThrottleTime(parseInt(r.headers[ye.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),i,o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(ye.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||wn.DEFAULT_THROTTLE_TIME_SECONDS),r+wn.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){let i=Ln(t,r,o),s=this.generateThrottlingStorageKey(i);e.removeItem(s,r.correlationId)}};var ss=class n extends N{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}};function Zo(n,e,t,r){return n.errorMessage=`${n.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new ss(n,e,t)}var wr=class{constructor(e,t){this.config=$T(e),this.logger=new Qe(this.config.loggerOptions,Ad,Xi),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[ye.CONTENT_TYPE]=y.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case Ve.HOME_ACCOUNT_ID:try{let r=on(e.credential);t[ye.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Ve.UPN:t[ye.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,r,o,i,s){return h(this,null,function*(){s&&this.performanceClient?.addQueueMeasurement(s,i);let a=yield this.sendPostRequest(o,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a})}sendPostRequest(e,t,r,o){return h(this,null,function*(){Un.preProcess(this.cacheManager,e,o);let i;try{i=yield m(this.networkClient.sendPostRequestAsync.bind(this.networkClient),d.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);let s=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:s[ye.X_MS_HTTP_VERSION]||"",requestId:s[ye.X_MS_REQUEST_ID]||""},o)}catch(s){if(s instanceof ss){let a=s.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[ye.X_MS_HTTP_VERSION]||"",requestId:a[ye.X_MS_REQUEST_ID]||"",contentTypeHeader:a[ye.CONTENT_TYPE]||void 0,contentLengthHeader:a[ye.CONTENT_LENGTH]||void 0,httpStatus:s.httpStatus},o),s.error}throw s instanceof N?s:v(Co)}return Un.postProcess(this.cacheManager,e,i,o),i})}updateAuthority(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,o=yield Wm(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o})}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&Fn(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&xn(t,e.tokenQueryParameters),Yo(t,e.correlationId),zo(t,e.correlationId,this.performanceClient),sn(t)}};var ln={};ut(ln,{badToken:()=>Sr,consentRequired:()=>Ym,interactionRequired:()=>Qm,loginRequired:()=>Jm,nativeAccountUnavailable:()=>ol,noTokensFound:()=>Dr,refreshTokenExpired:()=>il,uxNotAllowed:()=>Bd});var Dr="no_tokens_found",ol="native_account_unavailable",il="refresh_token_expired",Bd="ux_not_allowed",Qm="interaction_required",Ym="consent_required",Jm="login_required",Sr="bad_token";var YT=[Qm,Ym,Jm,Sr,Bd],rk=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Vd={[Dr]:"No refresh token found in the cache. Please sign-in.",[ol]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[il]:"Refresh token has expired.",[Sr]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Bd]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},JT={noTokensFoundError:{code:Dr,desc:Vd[Dr]},native_account_unavailable:{code:ol,desc:Vd[ol]},bad_token:{code:Sr,desc:Vd[Sr]}},Ne=class n extends N{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,n.prototype),this.timestamp=o||y.EMPTY_STRING,this.traceId=i||y.EMPTY_STRING,this.correlationId=s||y.EMPTY_STRING,this.claims=a||y.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function jd(n,e,t){let r=!!n&&YT.indexOf(n)>-1,o=!!t&&rk.indexOf(t)>-1,i=!!e&&YT.some(s=>e.indexOf(s)>-1);return r||i||o}function Xo(n){return new Ne(n,Vd[n])}var jt=class n{static setRequestState(e,t,r){let o=n.generateLibraryState(e,r);return t?`${o}${y.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw v(yr);let r={id:e.createNewGuid()};t&&(r.meta=t);let o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw v(yr);if(!t)throw v(Vt);try{let r=t.split(y.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(y.RESOURCE_DELIM):y.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||y.EMPTY_STRING,libraryState:a}}catch{throw v(Vt)}}};var ok={SW:"sw"},at=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateCnf,e.correlationId);let r=yield m(this.generateKid.bind(this),d.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}})}generateKid(e){return h(this,null,function*(){return this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:ok.SW}})}signPopToken(e,t,r){return h(this,null,function*(){return this.signPayload(e,t,r)})}signPayload(e,t,r,o){return h(this,null,function*(){let{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:l}=r,f=(s?new H(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(C({at:e,ts:mt(),m:i?.toUpperCase(),u:f?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:f?.AbsolutePath,q:f?.QueryString?[[],f.QueryString]:void 0,client_claims:a||void 0},o),t,l,r.correlationId)})}};var $d=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var $t=class n{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||y.NOT_AVAILABLE} - Timestamp: ${e.timestamp||y.NOT_AVAILABLE} - Description: ${e.error_description||y.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||y.NOT_AVAILABLE} - Trace ID: ${e.trace_id||y.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new st(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=Ht.SERVER_ERROR_RANGE_START&&e.status<=Ht.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(t&&e.status&&e.status>=Ht.CLIENT_ERROR_RANGE_START&&e.status<=Ht.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw jd(e.error,e.error_description,e.suberror)?new Ne(e.error,e.error_description,e.suberror,e.timestamp||y.EMPTY_STRING,e.trace_id||y.EMPTY_STRING,e.correlation_id||y.EMPTY_STRING,e.claims||y.EMPTY_STRING,o):i}}handleServerTokenResponse(e,t,r,o,i,s,a,c,l){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=Nn(e.id_token||y.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw v(To);if(o.maxAge||o.maxAge===0){let I=u.auth_time;if(!I)throw v(Dn);Uc(I,o.maxAge)}}this.homeAccountIdentifier=ee.generateHomeAccountId(e.client_info||y.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let f;i&&i.state&&(f=jt.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;let p=this.generateCacheRecord(e,t,r,o,u,s,i),g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new $d(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(g)),a&&!c&&p.account){let I=this.cacheStorage.generateAccountKey(ee.getAccountInfo(p.account));if(!this.cacheStorage.getAccount(I,o.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,p,!1,o,u,f,void 0,l)}yield this.cacheStorage.saveCacheRecord(p,o.correlationId,jg(u||{}),o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(g))}return n.generateAuthenticationResult(this.cryptoObj,t,p,!1,o,u,f,e,l)})}generateCacheRecord(e,t,r,o,i,s,a){let c=t.getPreferredCache();if(!c)throw v(bn);let l=$o(i),u,f;e.id_token&&i&&(u=Gm(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),f=as(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,l,a,void 0,this.logger));let p=null;if(e.access_token){let T=e.scope?de.fromString(e.scope):new de(o.scopes||[]),A=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,w=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,$=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,ge=r+A,se=ge+w,je=$&&$>0?r+$:void 0;p=zm(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",T.printScopes(),ge,se,this.cryptoObj.base64Decode,je,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let g=null;if(e.refresh_token){let T;if(e.refresh_token_expires_in){let A=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;T=r+A}g=qm(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,T)}let I=null;return e.foci&&(I={clientId:this.clientId,environment:c,familyId:e.foci}),{account:f,idToken:u,accessToken:p,refreshToken:g,appMetadata:I}}static generateAuthenticationResult(e,t,r,o,i,s,a,c,l){return h(this,null,function*(){let u=y.EMPTY_STRING,f=[],p=null,g,I,T=y.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===U.POP&&!i.popKid){let ge=new at(e),{secret:se,keyId:je}=r.accessToken;if(!je)throw v(ko);u=yield ge.signPopToken(se,je,i)}else u=r.accessToken.secret;f=de.fromString(r.accessToken.target).asArray(),p=nl(r.accessToken.expiresOn),g=nl(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(I=nl(r.accessToken.refreshOn))}r.appMetadata&&(T=r.appMetadata.familyId===po?po:"");let A=s?.oid||s?.sub||"",w=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);let $=r.account?jo(ee.getAccountInfo(r.account),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:A,tenantId:w,scopes:f,account:$,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:p,extExpiresOn:g,refreshOn:I,correlationId:i.correlationId,requestId:l||y.EMPTY_STRING,familyId:T,tokenType:r.accessToken?.tokenType||y.EMPTY_STRING,state:a?a.userRequestState:y.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||y.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||y.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})}};function as(n,e,t,r,o,i,s,a,c,l,u,f){f?.verbose("setCachedAccount called");let g=n.getAccountKeys().find($=>$.startsWith(t)),I=null;g&&(I=n.getAccount(g,o));let T=I||ee.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},e,r),A=T.tenantProfiles||[],w=c||T.realm;if(w&&!A.find($=>$.tenantId===w)){let $=Tr(t,T.localAccountId,w,i);A.push($)}return T.tenantProfiles=A,T}function Gd(n,e,t){return h(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var ei=class extends wr{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}acquireToken(e,t){return h(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(d.AuthClientAcquireToken,e.correlationId),!e.code)throw v(wo);let r=mt(),o=yield m(this.executeTokenRequest.bind(this),d.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=o.headers?.[ye.X_MS_REQUEST_ID],s=new $t(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),m(s.handleServerTokenResponse.bind(s),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)})}getLogoutUri(e){if(!e)throw j(Uo);let t=this.createLogoutUrlQueryString(e);return H.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientExecuteTokenRequest,t.correlationId);let r=this.createTokenQueryParameters(t),o=H.appendQueryString(e.tokenEndpoint,r),i=yield m(this.createTokenRequestBody.bind(this),d.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let l=es(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${l.uid}${An.CLIENT_INFO_SEPARATOR}${l.utid}`,type:Ve.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),c=Ln(this.config.authOptions.clientId,t);return m(this.executePostToTokenEndpoint.bind(this),d.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,c,t.correlationId,d.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.AuthClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(Ko(t,e.embeddedClientId||e.tokenBodyParameters?.[cn]||this.config.authOptions.clientId),this.includeRedirectUri)Wo(t,e.redirectUri);else if(!e.redirectUri)throw j(Oo);if(qo(t,e.scopes,!0,this.oidcDefaultScopes),Hm(t,e.code),Gc(t,this.config.libraryInfo),zc(t,this.config.telemetry.application),tl(t),this.serverTelemetryManager&&!bd(this.config)&&el(t,this.serverTelemetryManager),e.codeVerifier&&Vm(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&Kc(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;Wc(t,yield Gd(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Qc(t,o.assertionType)}if(Yc(t,sc.AUTHORIZATION_CODE_GRANT),Jo(t),e.authenticationScheme===U.POP){let o=new at(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(yield m(o.generateCnf.bind(o),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Zc(t,i)}else if(e.authenticationScheme===U.SSH)if(e.sshJwk)Xc(t,e.sshJwk);else throw j(Mn);(!oe.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Qo(t,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{let o=es(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${An.CLIENT_INFO_SEPARATOR}${o.utid}`,type:Ve.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case Ve.HOME_ACCOUNT_ID:try{let o=on(r.credential);Pn(t,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Ve.UPN:Ar(t,r.credential);break}return e.embeddedClientId&&Fn(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&xn(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[kd])&&xn(t,{[kd]:"1"}),zo(t,e.correlationId,this.performanceClient),sn(t)})}createLogoutUrlQueryString(e){let t=new Map;return e.postLogoutRedirectUri&&Pm(t,e.postLogoutRedirectUri),e.correlationId&&Yo(t,e.correlationId),e.idTokenHint&&xm(t,e.idTokenHint),e.state&&qc(t,e.state),e.logoutHint&&jm(t,e.logoutHint),e.extraQueryParameters&&xn(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Jc(t),sn(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};var ik=300,sl=class extends wr{constructor(e,t){super(e,t)}acquireToken(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireToken,e.correlationId);let t=mt(),r=yield m(this.executeTokenRequest.bind(this),d.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=r.headers?.[ye.X_MS_REQUEST_ID],i=new $t(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),m(i.handleServerTokenResponse.bind(i),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)})}acquireTokenByRefreshToken(e){return h(this,null,function*(){if(!e)throw j(Lo);if(this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw v(Sn);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield m(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let o=r instanceof Ne&&r.errorCode===Dr,i=r instanceof st&&r.errorCode===vd.INVALID_GRANT_ERROR&&r.subError===vd.CLIENT_MISMATCH_ERROR;if(o||i)return m(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return m(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=Ee(this.cacheManager.getRefreshToken.bind(this.cacheManager),d.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw Xo(Dr);if(r.expiresOn&&os(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||ik))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Xo(il);let o=_(C({},e),{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||U.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:Ve.HOME_ACCOUNT_ID}});try{return yield m(this.acquireToken.bind(this),d.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(i){if(i instanceof Ne&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),i.subError===Sr)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(s,e.correlationId)}throw i}})}executeTokenRequest(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),o=H.appendQueryString(t.tokenEndpoint,r),i=yield m(this.createTokenRequestBody.bind(this),d.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a=Ln(this.config.authOptions.clientId,e);return m(this.executePostToTokenEndpoint.bind(this),d.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,d.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(Ko(t,e.embeddedClientId||e.tokenBodyParameters?.[cn]||this.config.authOptions.clientId),e.redirectUri&&Wo(t,e.redirectUri),qo(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Yc(t,sc.REFRESH_TOKEN_GRANT),Jo(t),Gc(t,this.config.libraryInfo),zc(t,this.config.telemetry.application),tl(t),this.serverTelemetryManager&&!bd(this.config)&&el(t,this.serverTelemetryManager),Bm(t,e.refreshToken),this.config.clientCredentials.clientSecret&&Kc(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let r=this.config.clientCredentials.clientAssertion;Wc(t,yield Gd(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Qc(t,r.assertionType)}if(e.authenticationScheme===U.POP){let r=new at(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(yield m(r.generateCnf.bind(r),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,Zc(t,o)}else if(e.authenticationScheme===U.SSH)if(e.sshJwk)Xc(t,e.sshJwk);else throw j(Mn);if((!oe.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Qo(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case Ve.HOME_ACCOUNT_ID:try{let r=on(e.ccsCredential.credential);Pn(t,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case Ve.UPN:Ar(t,e.ccsCredential.credential);break}return e.embeddedClientId&&Fn(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&xn(t,e.tokenBodyParameters),zo(t,e.correlationId,this.performanceClient),sn(t)})}};var al=class extends wr{constructor(e,t){super(e,t)}acquireCachedToken(e){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientAcquireCachedToken,e.correlationId);let t=nn.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!oe.isEmptyObj(e.claims))throw this.setCacheOutcome(nn.FORCE_REFRESH_OR_CLAIMS,e.correlationId),v(Rn);if(!e.account)throw v(Sn);let r=e.account.tenantId||QT(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r);if(i){if($m(i.cachedAt)||os(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(nn.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),v(Rn);i.refreshOn&&os(i.refreshOn,0)&&(t=nn.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(nn.NO_CACHED_ACCESS_TOKEN,e.correlationId),v(Rn);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield m(this.generateResultFromCacheRecord.bind(this),d.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==nn.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return h(this,null,function*(){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=Nn(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let o=r?.auth_time;if(!o)throw v(Dn);Uc(o,t.maxAge)}return $t.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)})}};var Zm={sendGetRequestAsync:()=>Promise.reject(v(P)),sendPostRequestAsync:()=>Promise.reject(v(P))};var un={};ut(un,{getAuthorizationCodePayload:()=>ck,getAuthorizeUrl:()=>ak,getStandardAuthorizeRequestParameters:()=>sk,validateAuthorizationResponse:()=>ZT});function sk(n,e,t,r){let o=e.correlationId,i=new Map;Ko(i,e.embeddedClientId||e.extraQueryParameters?.[cn]||n.clientId);let s=[...e.scopes||[],...e.extraScopesToConsent||[]];if(qo(i,s,!0,n.authority.options.OIDCOptions?.defaultScopes),Wo(i,e.redirectUri),Yo(i,o),Om(i,e.responseMode),Jo(i),e.prompt&&(Lm(i,e.prompt),r?.addFields({prompt:e.prompt},o)),e.domainHint&&(Fm(i,e.domainHint),r?.addFields({domainHintFromRequest:!0},o)),e.prompt!==ue.SELECT_ACCOUNT)if(e.sid&&e.prompt===ue.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Pd(i,e.sid),r?.addFields({sidFromRequest:!0},o);else if(e.account){let a=uk(e.account),c=dk(e.account);if(c&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),rs(i,c),r?.addFields({loginHintFromClaim:!0},o);try{let l=on(e.account.homeAccountId);Pn(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===ue.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Pd(i,a),r?.addFields({sidFromClaim:!0},o);try{let l=on(e.account.homeAccountId);Pn(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),rs(i,e.loginHint),Ar(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),rs(i,e.account.username),r?.addFields({loginHintFromUpn:!0},o);try{let l=on(e.account.homeAccountId);Pn(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),rs(i,e.loginHint),Ar(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&Um(i,e.nonce),e.state&&qc(i,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&Qo(i,e.claims,n.clientCapabilities),e.embeddedClientId&&Fn(i,n.clientId,n.redirectUri),n.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(ns))&&Jc(i),i}function ak(n,e,t,r){let o=sn(e,t,r);return H.appendQueryString(n.authorizationEndpoint,o)}function ck(n,e){if(ZT(n,e),!n.code)throw v(Mo);return n}function ZT(n,e){if(!n.state||!e)throw n.state?v(gr,"Cached State"):v(gr,"Server State");let t,r;try{t=decodeURIComponent(n.state)}catch{throw v(Vt,n.state)}try{r=decodeURIComponent(e)}catch{throw v(Vt,n.state)}if(t!==r)throw v(Io);if(n.error||n.error_description||n.suberror){let o=lk(n);throw jd(n.error,n.error_description,n.suberror)?new Ne(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",o):new st(n.error||"",n.error_description,n.suberror,o)}}function lk(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}function uk(n){return n.idTokenClaims?.sid||null}function dk(n){return n.loginHint||n.idTokenClaims?.login_hint||null}var XT=",",e_="|";function fk(n){let{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]),a=[];if(e?.length){if(a=e.split(XT),a.length<4)return e}else a=Array.from({length:4},()=>e_);return s.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&hk({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(XT)}function hk(n){let{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(e_))}var ti=class n{constructor(e,t){this.cacheOutcome=nn.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||y.EMPTY_STRING,this.wrapperVer=e.wrapperVer||y.EMPTY_STRING,this.telemetryCacheKey=Se.CACHE_KEY+An.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Se.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let o=t.join(Se.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(Se.VALUE_SEPARATOR);return[Se.SCHEMA_VERSION,s,o].join(Se.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Se.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(Se.VALUE_SEPARATOR),i=e.errors.length,s=t<i?Se.OVERFLOW_TRUE:Se.OVERFLOW_FALSE,a=[i,s].join(Se.VALUE_SEPARATOR);return[Se.SCHEMA_VERSION,e.cacheHits,r,o,a].join(Se.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=Se.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof N?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Se.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,o=0,i=e.errors.length;for(t=0;t<i;t++){let s=e.failedRequests[2*t]||y.EMPTY_STRING,a=e.failedRequests[2*t+1]||y.EMPTY_STRING,c=e.errors[t]||y.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<Se.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||y.EMPTY_STRING),e.push(this.regionSource||y.EMPTY_STRING),e.push(this.regionOutcome||y.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return fk(e)}};var zd="missing_kid_error",qd="missing_alg_error";var pk={[zd]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[qd]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},Xm=class n extends N{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function ey(n){return new Xm(n,pk[n])}var cl=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw ey(zd);if(!e.alg)throw ey(qd);let t=new n({typ:e.typ||Td.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var ni="pkce_not_created",ll="ear_jwk_empty",Kd="ear_jwe_empty",ri="crypto_nonexistent",dn="empty_navigate_uri",cs="hash_empty_error",br="no_state_in_hash",ls="hash_does_not_contain_known_properties",us="unable_to_parse_state",ds="state_interaction_type_mismatch",fs="interaction_in_progress",hs="popup_window_error",ps="empty_window_error",Gt="user_cancelled",Wd="monitor_popup_timeout",gs="monitor_window_timeout",ms="redirect_in_iframe",ys="block_iframe_reload",Cs="block_nested_popups",Qd="iframe_closed_prematurely",fn="silent_logout_unsupported",vs="no_account_error",Yd="silent_prompt_value_error",Es="no_token_request_cache_error",Is="unable_to_parse_token_request_cache_error",Jd="auth_request_not_set_error",Zd="invalid_cache_type",hn="non_browser_environment",pn="database_not_open",Hn="no_network_connectivity",Ts="post_request_failed",_s="get_request_failed",oi="failed_to_parse_response",As="unable_to_load_token",Rr="crypto_key_not_found",ws="auth_code_required",Ds="auth_code_or_nativeAccountId_required",Ss="spa_code_and_nativeAccountId_present",Mr="database_unavailable",bs="unable_to_acquire_token_from_native_platform",Rs="native_handshake_timeout",Ms="native_extension_not_installed",Nr="native_connection_not_established",gn="uninitialized_public_client_application",Ns="native_prompt_not_supported",ks="invalid_base64_string",Os="invalid_pop_token_request",Xd="failed_to_build_headers",ef="failed_to_parse_headers",Ps="failed_to_decrypt_ear_response",ii="timed_out";var Bn="For more visit: aka.ms/msaljs/browser-errors",k={[ni]:"The PKCE code challenge and verifier could not be generated.",[ll]:"No EAR encryption key provided. This is unexpected.",[Kd]:"Server response does not contain ear_jwe property. This is unexpected.",[ri]:"The crypto object or function is not available.",[dn]:"Navigation URI is empty. Please check stack trace for more info.",[cs]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Bn}`,[br]:"Hash does not contain state. Please verify that the request originated from msal.",[ls]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Bn}`,[us]:"Unable to parse state. Please verify that the request originated from msal.",[ds]:"Hash contains state but the interaction type does not match the caller.",[fs]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Bn}`,[hs]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[ps]:"window.open returned null or undefined window object.",[Gt]:"User cancelled the flow.",[Wd]:`Token acquisition in popup failed due to timeout.  ${Bn}`,[gs]:`Token acquisition in iframe failed due to timeout.  ${Bn}`,[ms]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[ys]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Bn}`,[Cs]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Qd]:"The iframe being monitored was closed prematurely.",[fn]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[vs]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Yd]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Es]:"No token request found in cache.",[Is]:"The cached token request could not be parsed.",[Jd]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Zd]:"Invalid cache type",[hn]:"Login and token requests are not supported in non-browser environments.",[pn]:"Database is not open!",[Hn]:"No network connectivity. Check your internet connection.",[Ts]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[_s]:"Network request failed. Please check the network trace to determine root cause.",[oi]:"Failed to parse network response. Check network trace.",[As]:"Error loading token to cache.",[Rr]:"Cryptographic Key or Keypair not found in browser storage.",[ws]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Ds]:"An authorization code or nativeAccountId must be provided to this flow.",[Ss]:"Request cannot contain both spa code and native account id.",[Mr]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[bs]:`Unable to acquire token from native platform.  ${Bn}`,[Rs]:"Timed out while attempting to establish connection to browser extension",[Ms]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Nr]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Bn}`,[gn]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Bn}`,[Ns]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[ks]:"Invalid base64 encoded string.",[Os]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Xd]:"Failed to build request headers object.",[ef]:"Failed to parse response headers",[Ps]:"Failed to decrypt ear response",[ii]:"The request timed out."},b6={pkceNotGenerated:{code:ni,desc:k[ni]},cryptoDoesNotExist:{code:ri,desc:k[ri]},emptyNavigateUriError:{code:dn,desc:k[dn]},hashEmptyError:{code:cs,desc:k[cs]},hashDoesNotContainStateError:{code:br,desc:k[br]},hashDoesNotContainKnownPropertiesError:{code:ls,desc:k[ls]},unableToParseStateError:{code:us,desc:k[us]},stateInteractionTypeMismatchError:{code:ds,desc:k[ds]},interactionInProgress:{code:fs,desc:k[fs]},popupWindowError:{code:hs,desc:k[hs]},emptyWindowError:{code:ps,desc:k[ps]},userCancelledError:{code:Gt,desc:k[Gt]},monitorPopupTimeoutError:{code:Wd,desc:k[Wd]},monitorIframeTimeoutError:{code:gs,desc:k[gs]},redirectInIframeError:{code:ms,desc:k[ms]},blockTokenRequestsInHiddenIframeError:{code:ys,desc:k[ys]},blockAcquireTokenInPopupsError:{code:Cs,desc:k[Cs]},iframeClosedPrematurelyError:{code:Qd,desc:k[Qd]},silentLogoutUnsupportedError:{code:fn,desc:k[fn]},noAccountError:{code:vs,desc:k[vs]},silentPromptValueError:{code:Yd,desc:k[Yd]},noTokenRequestCacheError:{code:Es,desc:k[Es]},unableToParseTokenRequestCacheError:{code:Is,desc:k[Is]},authRequestNotSet:{code:Jd,desc:k[Jd]},invalidCacheType:{code:Zd,desc:k[Zd]},notInBrowserEnvironment:{code:hn,desc:k[hn]},databaseNotOpen:{code:pn,desc:k[pn]},noNetworkConnectivity:{code:Hn,desc:k[Hn]},postRequestFailed:{code:Ts,desc:k[Ts]},getRequestFailed:{code:_s,desc:k[_s]},failedToParseNetworkResponse:{code:oi,desc:k[oi]},unableToLoadTokenError:{code:As,desc:k[As]},signingKeyNotFoundInStorage:{code:Rr,desc:k[Rr]},authCodeRequired:{code:ws,desc:k[ws]},authCodeOrNativeAccountRequired:{code:Ds,desc:k[Ds]},spaCodeAndNativeAccountPresent:{code:Ss,desc:k[Ss]},databaseUnavailable:{code:Mr,desc:k[Mr]},unableToAcquireTokenFromNativePlatform:{code:bs,desc:k[bs]},nativeHandshakeTimeout:{code:Rs,desc:k[Rs]},nativeExtensionNotInstalled:{code:Ms,desc:k[Ms]},nativeConnectionNotEstablished:{code:Nr,desc:k[Nr]},uninitializedPublicClientApplication:{code:gn,desc:k[gn]},nativePromptNotSupported:{code:Ns,desc:k[Ns]},invalidBase64StringError:{code:ks,desc:k[ks]},invalidPopTokenRequest:{code:Os,desc:k[Os]}},si=class n extends N{constructor(e,t){super(e,k[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function E(n,e){return new si(n,e)}var he={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Ze={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},xs={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},ne={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},ty={GET:"GET",POST:"POST"},zt={SIGNIN:"signin",SIGNOUT:"signout"},pe={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},ul={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},q={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},R=(function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n})(R||{});var ny={scopes:gt},ry="jwk";var tf="msal.db",t_=1,n_=`${tf}.keys`,ke={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},r_=[ke.Default,ke.Skip,ke.RefreshTokenAndNetwork];function dl(n){return encodeURIComponent(kr(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function St(n){return o_(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kr(n){return o_(new TextEncoder().encode(n))}function o_(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}function we(n){return new TextDecoder().decode(mn(n))}function mn(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw E(ks)}let t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}var gk="RSASSA-PKCS1-v1_5",Fs="AES-GCM",a_="HKDF",iy="SHA-256",mk=2048,yk=new Uint8Array([1,0,1]),i_="0123456789abcdef",s_=new Uint32Array(1),sy="raw",c_="encrypt",ay="decrypt",Ck="deriveKey",vk="crypto_subtle_undefined",cy={name:gk,hash:iy,modulusLength:mk,publicExponent:yk};function l_(n){if(!window)throw E(hn);if(!window.crypto)throw E(ri);if(!n&&!window.crypto.subtle)throw E(ri,vk)}function ly(n,e,t){return h(this,null,function*(){e?.addQueueMeasurement(d.Sha256Digest,t);let o=new TextEncoder().encode(n);return window.crypto.subtle.digest(iy,o)})}function u_(n){return window.crypto.getRandomValues(n)}function oy(){return window.crypto.getRandomValues(s_),s_[0]}function Re(){let n=Date.now(),e=oy()*1024+(oy()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=oy();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=i_.charAt(t[a]>>>4),s+=i_.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}function d_(n,e){return h(this,null,function*(){return window.crypto.subtle.generateKey(cy,n,e)})}function nf(n){return h(this,null,function*(){return window.crypto.subtle.exportKey(ry,n)})}function f_(n,e,t){return h(this,null,function*(){return window.crypto.subtle.importKey(ry,n,cy,e,t)})}function h_(n,e){return h(this,null,function*(){return window.crypto.subtle.sign(cy,n,e)})}function Ls(){return h(this,null,function*(){let n=yield uy(),t={alg:"dir",kty:"oct",k:St(new Uint8Array(n))};return kr(JSON.stringify(t))})}function Ek(n){return h(this,null,function*(){let e=we(n),r=JSON.parse(e).k,o=mn(r);return window.crypto.subtle.importKey(sy,o,Fs,!1,[ay])})}function p_(n,e){return h(this,null,function*(){let t=e.split(".");if(t.length!==5)throw E(Ps,"jwe_length");let r=yield Ek(n).catch(()=>{throw E(Ps,"import_key")});try{let o=new TextEncoder().encode(t[0]),i=mn(t[2]),s=mn(t[3]),a=mn(t[4]),c=a.byteLength*8,l=new Uint8Array(s.length+a.length);l.set(s),l.set(a,s.length);let u=yield window.crypto.subtle.decrypt({name:Fs,iv:i,tagLength:c,additionalData:o},r,l);return new TextDecoder().decode(u)}catch{throw E(Ps,"decrypt")}})}function uy(){return h(this,null,function*(){let n=yield window.crypto.subtle.generateKey({name:Fs,length:256},!0,[c_,ay]);return window.crypto.subtle.exportKey(sy,n)})}function dy(n){return h(this,null,function*(){return window.crypto.subtle.importKey(sy,n,a_,!1,[Ck])})}function g_(n,e,t){return h(this,null,function*(){return window.crypto.subtle.deriveKey({name:a_,salt:e,hash:iy,info:new TextEncoder().encode(t)},n,{name:Fs,length:256},!1,[c_,ay])})}function m_(n,e,t){return h(this,null,function*(){let r=new TextEncoder().encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),i=yield g_(n,o,t),s=yield window.crypto.subtle.encrypt({name:Fs,iv:new Uint8Array(12)},i,r);return{data:St(new Uint8Array(s)),nonce:St(o)}})}function fy(n,e,t,r){return h(this,null,function*(){let o=mn(r),i=yield g_(n,mn(e),t),s=yield window.crypto.subtle.decrypt({name:Fs,iv:new Uint8Array(12)},i,o);return new TextDecoder().decode(s)})}function rf(n){return h(this,null,function*(){let e=yield ly(n),t=new Uint8Array(e);return St(t)})}var Or="storage_not_supported",of="stubbed_public_client_application_called",Us="in_mem_redirect_unavailable";var sf={[Or]:"Given storage configuration option was not supported.",[of]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Us]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},K6={storageNotSupportedError:{code:Or,desc:sf[Or]},stubPcaInstanceCalled:{code:of,desc:sf[of]},inMemRedirectUnavailable:{code:Us,desc:sf[Us]}},hy=class n extends N{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function Hs(n){return new hy(n,sf[n])}function af(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function y_(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function cf(){return window.parent!==window}function Ik(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${he.POPUP_NAME_PREFIX}.`)===0}function ct(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function C_(){let e=new H(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function Tk(){if(H.hashContainsKnownProperties(window.location.hash)&&cf())throw E(ys)}function _k(n){if(cf()&&!n)throw E(ms)}function Ak(){if(Ik())throw E(Cs)}function py(){if(typeof window>"u")throw E(hn)}function gy(n){if(!n)throw E(gn)}function lf(n){py(),Tk(),Ak(),gy(n)}function my(n,e){if(lf(n),_k(e.system.allowRedirectInIframe),e.cache.cacheLocation===ne.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Hs(Us)}function uf(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function v_(){return Re()}var nQ=_e.addClientCapabilitiesToClaims;var df=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,o)=>{setTimeout(()=>{o(E(ii,"failed_to_redirect"))},t.timeout)})}};var ff=class{sendGetRequestAsync(e,t){return h(this,null,function*(){let r,o={},i=0,s=E_(t);try{r=yield fetch(e,{method:ty.GET,headers:s})}catch(a){throw Zo(E(window.navigator.onLine?_s:Hn),void 0,void 0,a)}o=I_(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch(a){throw Zo(E(oi),i,o,a)}})}sendPostRequestAsync(e,t){return h(this,null,function*(){let r=t&&t.body||"",o=E_(t),i,s=0,a={};try{i=yield fetch(e,{method:ty.POST,headers:o,body:r})}catch(c){throw Zo(E(window.navigator.onLine?Ts:Hn),void 0,void 0,c)}a=I_(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch(c){throw Zo(E(oi),s,a,c)}})}};function E_(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch(e){throw Zo(E(Xd),void 0,void 0,e)}}function I_(n){try{let e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw E(ef)}}var wk=6e4,hf=1e4,Dk=3e4,yy=2e3;function T_({auth:n,cache:e,system:t,telemetry:r},o){let i={clientId:y.EMPTY_STRING,authority:`${y.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:y.EMPTY_STRING,authorityMetadata:y.EMPTY_STRING,redirectUri:typeof window<"u"?ct():"",postLogoutRedirectUri:y.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ie.AAD,OIDCOptions:{serverResponseType:tn.FRAGMENT,defaultScopes:[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:vr.None,tenant:y.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:ne.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:ne.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===ne.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:Z.Info,piiLoggingEnabled:!1},c=_(C({},Sd),{loggerOptions:a,networkClient:o?new ff:Zm,navigationClient:new df,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||wk,iframeHashTimeout:t?.loadFrameTimeout||hf,navigateFrameWait:0,redirectNavigationTimeout:Dk,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||yy,pollIntervalMilliseconds:he.DEFAULT_POLL_INTERVAL_MS}),l=_(C(C({},c),t),{loggerOptions:t?.loggerOptions||a}),u={application:{appName:y.EMPTY_STRING,appVersion:y.EMPTY_STRING},client:new kn};if(n?.protocolMode!==ie.OIDC&&n?.OIDCOptions&&new Qe(l.loggerOptions).warning(JSON.stringify(j(Ye.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode===ie.OIDC&&l?.allowPlatformBroker)throw j(Ye.cannotAllowPlatformBroker);return{auth:_(C(C({},i),n),{OIDCOptions:C(C({},i.OIDCOptions),n?.OIDCOptions)}),cache:C(C({},s),e),system:l,telemetry:C(C({},u),r)}}var __="@azure/msal-browser",yt="4.26.1";var De="msal",pf="browser";var D_=`${De}.${pf}.log.level`,S_=`${De}.${pf}.log.pii`,IQ=`${De}.${pf}.performance.enabled`,b_=`${De}.${pf}.platform.auth.dom`,Cy=`${De}.version`,A_="account.keys",w_="token.keys";function Vn(n=2){return n<1?`${De}.${A_}`:`${De}.${n}.${A_}`}function jn(n,e=2){return e<1?`${De}.${w_}.${n}`:`${De}.${e}.${w_}.${n}`}var gf=class n{static loggerCallback(e,t){switch(e){case Z.Error:console.error(t);return;case Z.Info:console.info(t);return;case Z.Verbose:console.debug(t);return;case Z.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=T_(e,this.browserEnvironment);let t;try{t=window[ne.SessionStorage]}catch{}let r=t?.getItem(D_),o=t?.getItem(S_)?.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s=C({},this.config.system.loggerOptions),a=r&&Object.keys(Z).includes(r)?Z[r]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new Qe(s,__,yt),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var mf=(()=>{class n extends gf{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return h(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();var yf=class{constructor(){this.dbName=tf,this.version=t_,this.tableName=n_,this.dbOpen=!1}open(){return h(this,null,function*(){return new Promise((e,t)=>{let r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{let i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(E(Mr)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return h(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(E(pn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}setItem(e,t){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(E(pn));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})})}removeItem(e){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(E(pn));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}getKeys(){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(E(pn));let i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})})}containsKey(e){return h(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(E(pn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})})}deleteDatabase(){return h(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let r=window.indexedDB.deleteDatabase(tf),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})})}};var $n=class{constructor(){this.cache=new Map}initialize(){return h(this,null,function*(){})}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}setUserData(e,t){return h(this,null,function*(){this.setItem(e,t)})}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}};var Cf=class{constructor(e){this.inMemoryCache=new $n,this.indexedDBCache=new yf,this.logger=e}handleDatabaseAccessError(e){if(e instanceof si&&e.errorCode===Mr)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return h(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}setItem(e,t){return h(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}})}removeItem(e){return h(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return h(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return h(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return h(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var Bs=(()=>{class n{constructor(t,r,o){this.logger=t,l_(o??!1),this.cache=new Cf(this.logger),this.performanceClient=r}createNewGuid(){return Re()}base64Encode(t){return kr(t)}base64Decode(t){return we(t)}base64UrlEncode(t){return dl(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return h(this,null,function*(){let r=this.performanceClient?.startMeasurement(d.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=yield d_(n.EXTRACTABLE,n.POP_KEY_USAGES),i=yield nf(o.publicKey),s={e:i.e,kty:i.kty,n:i.n},a=R_(s),c=yield this.hashString(a),l=yield nf(o.privateKey),u=yield f_(l,!1,["sign"]);return yield this.cache.setItem(c,{privateKey:u,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),r&&r.end({success:!0}),c})}removeTokenBindingKey(t){return h(this,null,function*(){if(yield this.cache.removeItem(t),yield this.cache.containsKey(t))throw v(be.bindingKeyNotRemoved)})}clearKeystore(){return h(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,r,o,i){return h(this,null,function*(){let s=this.performanceClient?.startMeasurement(d.CryptoOptsSignJwt,i),a=yield this.cache.getItem(r);if(!a)throw E(Rr);let c=yield nf(a.publicKey),l=R_(c),u=dl(JSON.stringify({kid:r})),f=cl.getShrHeaderString(_(C({},o?.header),{alg:c.alg,kid:u})),p=dl(f);t.cnf={jwk:JSON.parse(l)};let g=dl(JSON.stringify(t)),I=`${p}.${g}`,A=new TextEncoder().encode(I),w=yield h_(a.privateKey,A),$=St(new Uint8Array(w)),ge=`${I}.${$}`;return s&&s.end({success:!0}),ge})}hashString(t){return h(this,null,function*(){return rf(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function R_(n){return JSON.stringify(n,Object.keys(n).sort())}var Sk=1440*60*1e3,vf={Lax:"Lax",None:"None"},Vs=class{initialize(){return Promise.resolve()}getItem(e){let t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}getUserData(){throw v(be.methodNotImplemented)}setItem(e,t,r,o=!0,i=vf.Lax){let s=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${i};`;if(r){let a=bk(r);s+=`expires=${a};`}(o||i===vf.None)&&(s+="Secure;"),document.cookie=s}setUserData(){return h(this,null,function*(){return Promise.reject(v(be.methodNotImplemented))})}removeItem(e){this.setItem(e,"",-1)}getKeys(){let e=document.cookie.split(";"),t=[];return e.forEach(r=>{let o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}};function bk(n){let e=new Date;return new Date(e.getTime()+n*Sk).toUTCString()}function yn(n,e){let t=n.getItem(Vn(e));return t?JSON.parse(t):[]}function Ct(n,e,t){let r=e.getItem(jn(n,t));if(r){let o=JSON.parse(r);if(o&&o.hasOwnProperty("idToken")&&o.hasOwnProperty("accessToken")&&o.hasOwnProperty("refreshToken"))return o}return{idToken:[],accessToken:[],refreshToken:[]}}function js(n){return n.hasOwnProperty("id")&&n.hasOwnProperty("nonce")&&n.hasOwnProperty("data")}var M_="msal.cache.encryption",Rk="msal.broadcast.cache",Ef=class{constructor(e,t,r){if(!window.localStorage)throw Hs(Or);this.memoryStorage=new $n,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel(Rk)}initialize(e){return h(this,null,function*(){let t=new Vs,r=t.getItem(M_),o={key:"",id:""};if(r)try{o=JSON.parse(r)}catch{}if(o.key&&o.id){let i=Ee(mn,d.Base64Decode,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:yield m(dy,d.GenerateHKDF,this.logger,this.performanceClient,e)(i)}}else{let i=Re(),s=yield m(uy,d.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=Ee(St,d.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(s));this.encryptionCookie={id:i,key:yield m(dy,d.GenerateHKDF,this.logger,this.performanceClient,e)(s)};let c={id:i,key:a};t.setItem(M_,JSON.stringify(c),0,!0,vf.None)}yield m(this.importExistingCache.bind(this),d.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0})}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw E(gn);return this.memoryStorage.getItem(e)}decryptData(e,t,r){return h(this,null,function*(){if(!this.initialized||!this.encryptionCookie)throw E(gn);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;let o=yield m(fy,d.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!o)return null;try{return _(C({},JSON.parse(o)),{lastUpdatedAt:t.lastUpdatedAt})}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}})}setItem(e,t){window.localStorage.setItem(e,t)}setUserData(e,t,r,o,i){return h(this,null,function*(){if(!this.initialized||!this.encryptionCookie)throw E(gn);if(i)this.setItem(e,t);else{let{data:s,nonce:a}=yield m(m_,d.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),c={id:this.encryptionCookie.id,nonce:a,data:s,lastUpdatedAt:o};this.setItem(e,JSON.stringify(c))}this.memoryStorage.setItem(e,t),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),yn(this).forEach(r=>this.removeItem(r));let t=Ct(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(De)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}importExistingCache(e){return h(this,null,function*(){if(!this.encryptionCookie)return;let t=yn(this);t=yield this.importArray(t,e),t.length?this.setItem(Vn(),JSON.stringify(t)):this.removeItem(Vn());let r=Ct(this.clientId,this);r.idToken=yield this.importArray(r.idToken,e),r.accessToken=yield this.importArray(r.accessToken,e),r.refreshToken=yield this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(jn(this.clientId),JSON.stringify(r)):this.removeItem(jn(this.clientId))})}getItemFromEncryptedCache(e,t){return h(this,null,function*(){if(!this.encryptionCookie)return null;let r=this.getItem(e);if(!r)return null;let o;try{o=JSON.parse(r)}catch{return null}return js(o)?o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},t),m(fy,d.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),r)})}importArray(e,t){return h(this,null,function*(){let r=[],o=[];return e.forEach(i=>{let s=this.getItemFromEncryptedCache(i,t).then(a=>{a?(this.memoryStorage.setItem(i,a),r.push(i)):this.removeItem(i)});o.push(s)}),yield Promise.all(o),r})}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");let t=this.performanceClient.startMeasurement(d.LocalStorageUpdated);t.add({isBackground:!0});let{key:r,value:o,context:i}=e.data;if(!r){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(i&&i!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),t.end({success:!1,errorCode:"contextMismatch"});return}o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}};var If=class{constructor(){if(!window.sessionStorage)throw Hs(Or)}initialize(){return h(this,null,function*(){})}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}setUserData(e,t){return h(this,null,function*(){this.setItem(e,t)})}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}};var S={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function Gn(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var $s=class n extends Go{constructor(e,t,r,o,i,s,a){super(e,r,o,i,a),this.cacheConfig=t,this.logger=o,this.internalStorage=new $n,this.browserStorage=k_(e,t.cacheLocation,o,i),this.temporaryCacheStorage=k_(e,t.temporaryCacheLocation,o,i),this.cookieStorage=new Vs,this.eventHandler=s}initialize(e){return h(this,null,function*(){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),yield this.browserStorage.initialize(e),yield this.migrateExistingCache(e),this.trackVersionChanges(e)})}migrateExistingCache(e){return h(this,null,function*(){let t=yn(this.browserStorage),r=Ct(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:t.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},e);for(let i=0;i<2;i++){let s=i;yield this.removeStaleAccounts(i,s,e)}for(let i=0;i<2;i++){let s=i;yield this.migrateIdTokens(i,s,e)}let o=this.getKMSIValues();for(let i=0;i<2;i++)yield this.migrateAccessTokens(i,o,e),yield this.migrateRefreshTokens(i,o,e);t=yn(this.browserStorage),r=Ct(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:t.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},e)})}updateOldEntry(e,t){return h(this,null,function*(){let r=this.browserStorage.getItem(e),o=this.validateAndParseJson(r||"");if(!o)return this.browserStorage.removeItem(e),null;if(!o.lastUpdatedAt)o.lastUpdatedAt=Date.now().toString(),this.setItem(e,JSON.stringify(o),t);else if(Ae.isCacheExpired(o.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null;let i=js(o)?yield this.browserStorage.decryptData(e,o,t):o;return!i||!fe.isCredentialEntity(i)?(this.performanceClient.incrementFields({invalidCacheCount:1},t),null):(fe.isAccessTokenEntity(i)||fe.isRefreshTokenEntity(i))&&i.expiresOn&&Ae.isTokenExpired(i.expiresOn,cc)?(this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null):i})}removeStaleAccounts(e,t,r){return h(this,null,function*(){let o=yn(this.browserStorage,e);if(o.length!==0){for(let i of[...o]){this.performanceClient.incrementFields({oldAcntCount:1},r);let s=this.browserStorage.getItem(i),a=this.validateAndParseJson(s||"");if(!a){Gn(o,i);continue}if(a.lastUpdatedAt)Ae.isCacheExpired(a.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(yield this.removeAccountOldSchema(i,a,t,r),Gn(o,i));else{a.lastUpdatedAt=Date.now().toString(),this.setItem(i,JSON.stringify(a),r);continue}}this.setAccountKeys(o,r,e)}})}removeAccountOldSchema(e,t,r,o){return h(this,null,function*(){let s=(js(t)?yield this.browserStorage.decryptData(e,t,o):t)?.homeAccountId;if(s){let a=this.getTokenKeys(r);[...a.idToken].filter(c=>c.includes(s)).forEach(c=>{this.browserStorage.removeItem(c),Gn(a.idToken,c)}),[...a.accessToken].filter(c=>c.includes(s)).forEach(c=>{this.browserStorage.removeItem(c),Gn(a.accessToken,c)}),[...a.refreshToken].filter(c=>c.includes(s)).forEach(c=>{this.browserStorage.removeItem(c),Gn(a.refreshToken,c)}),this.setTokenKeys(a,o,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},o),this.browserStorage.removeItem(e)})}getKMSIValues(){let e={},t=this.getTokenKeys().idToken;for(let r of t){let o=this.browserStorage.getUserData(r);if(o){let i=JSON.parse(o),s=ve.extractTokenClaims(i.secret,we);s&&(e[i.homeAccountId]=ve.isKmsi(s))}}return e}migrateIdTokens(e,t,r){return h(this,null,function*(){let o=Ct(this.clientId,this.browserStorage,e);if(o.idToken.length===0)return;let i=Ct(this.clientId,this.browserStorage,2),s=yn(this.browserStorage),a=yn(this.browserStorage,t);for(let c of[...o.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);let l=yield this.updateOldEntry(c,r);if(!l){Gn(o.idToken,c);continue}let u=s.find($=>$.includes(l.homeAccountId)),f=a.find($=>$.includes(l.homeAccountId)),p=null;if(u)p=this.getAccount(u,r);else if(f){let $=this.browserStorage.getItem(f),ge=this.validateAndParseJson($||"");p=ge&&js(ge)?yield this.browserStorage.decryptData(f,ge,r):ge}if(!p){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}let g=ve.extractTokenClaims(l.secret,we),I=this.generateCredentialKey(l),T=this.getIdTokenCredential(I,r),A=Object.keys(g).includes("signin_state"),w=T&&Object.keys(ve.extractTokenClaims(T.secret,we)||{}).includes("signin_state");if(!T||l.lastUpdatedAt>T.lastUpdatedAt&&(A||!w)){let $=p.tenantProfiles||[],ge=$o(g)||p.realm;if(ge&&!$.find(Rt=>Rt.tenantId===ge)){let Rt=Tr(p.homeAccountId,p.localAccountId,ge,g);$.push(Rt)}p.tenantProfiles=$;let se=this.generateAccountKey(ee.getAccountInfo(p)),je=ve.isKmsi(g);yield this.setUserData(se,JSON.stringify(p),r,p.lastUpdatedAt,je),s.includes(se)||s.push(se),yield this.setUserData(I,JSON.stringify(l),r,l.lastUpdatedAt,je),this.performanceClient.incrementFields({migratedITCount:1},r),i.idToken.push(I)}}this.setTokenKeys(o,r,e),this.setTokenKeys(i,r),this.setAccountKeys(s,r)})}migrateAccessTokens(e,t,r){return h(this,null,function*(){let o=Ct(this.clientId,this.browserStorage,e);if(o.accessToken.length===0)return;let i=Ct(this.clientId,this.browserStorage,2);for(let s of[...o.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);let a=yield this.updateOldEntry(s,r);if(!a){Gn(o.accessToken,s);continue}if(!Object.keys(t).includes(a.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}let c=this.generateCredentialKey(a),l=t[a.homeAccountId];if(!i.accessToken.includes(c))yield this.setUserData(c,JSON.stringify(a),r,a.lastUpdatedAt,l),this.performanceClient.incrementFields({migratedATCount:1},r),i.accessToken.push(c);else{let u=this.getAccessTokenCredential(c,r);(!u||a.lastUpdatedAt>u.lastUpdatedAt)&&(yield this.setUserData(c,JSON.stringify(a),r,a.lastUpdatedAt,l),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(o,r,e),this.setTokenKeys(i,r)})}migrateRefreshTokens(e,t,r){return h(this,null,function*(){let o=Ct(this.clientId,this.browserStorage,e);if(o.refreshToken.length===0)return;let i=Ct(this.clientId,this.browserStorage,2);for(let s of[...o.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);let a=yield this.updateOldEntry(s,r);if(!a){Gn(o.refreshToken,s);continue}if(!Object.keys(t).includes(a.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}let c=this.generateCredentialKey(a),l=t[a.homeAccountId];if(!i.refreshToken.includes(c))yield this.setUserData(c,JSON.stringify(a),r,a.lastUpdatedAt,l),this.performanceClient.incrementFields({migratedRTCount:1},r),i.refreshToken.push(c);else{let u=this.getRefreshTokenCredential(c,r);(!u||a.lastUpdatedAt>u.lastUpdatedAt)&&(yield this.setUserData(c,JSON.stringify(a),r,a.lastUpdatedAt,l),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(o,r,e),this.setTokenKeys(i,r)})}trackVersionChanges(e){let t=this.browserStorage.getItem(Cy);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==yt&&this.setItem(Cy,yt,e)}validateAndParseJson(e){if(!e)return null;try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}setItem(e,t,r){let o=new Array(3).fill(0),i=[],s=20;for(let a=0;a<=s;a++)try{if(this.browserStorage.setItem(e,t),a>0)for(let c=0;c<=2;c++){let l=o.slice(0,c).reduce((f,p)=>f+p,0);if(l>=a)break;let u=a>l+o[c]?l+o[c]:a;a>l&&o[c]>0&&this.removeAccessTokenKeys(i.slice(l,u),r,c)}break}catch(c){let l=ts(c);if(l.errorCode===Vc.cacheQuotaExceeded&&a<s){if(!i.length)for(let u=0;u<=2;u++)if(e===jn(this.clientId,u)){let f=JSON.parse(t).accessToken;i.push(...f),o[u]=f.length}else{let f=this.getTokenKeys(u).accessToken;i.push(...f),o[u]=f.length}if(i.length<=a)throw l;this.removeAccessToken(i[a],r,!1)}else throw l}}setUserData(e,t,r,o,i){return h(this,null,function*(){let s=new Array(3).fill(0),a=[],c=20;for(let l=0;l<=c;l++)try{if(yield m(this.browserStorage.setUserData.bind(this.browserStorage),d.SetUserData,this.logger,this.performanceClient)(e,t,r,o,i),l>0)for(let u=0;u<=2;u++){let f=s.slice(0,u).reduce((g,I)=>g+I,0);if(f>=l)break;let p=l>f+s[u]?f+s[u]:l;l>f&&s[u]>0&&this.removeAccessTokenKeys(a.slice(f,p),r,u)}break}catch(u){let f=ts(u);if(f.errorCode===Vc.cacheQuotaExceeded&&l<c){if(!a.length)for(let p=0;p<=2;p++){let g=this.getTokenKeys(p).accessToken;a.push(...g),s[p]=g.length}if(a.length<=l)throw f;this.removeAccessToken(a[l],r,!1)}else throw f}})}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");let r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;let o=this.validateAndParseJson(r);return!o||!ee.isAccountEntity(o)?null:Go.toObject(new ee,o)}setAccount(e,t,r){return h(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccount called");let o=this.generateAccountKey(ee.getAccountInfo(e)),i=Date.now().toString();e.lastUpdatedAt=i,yield this.setUserData(o,JSON.stringify(e),t,i,r);let s=this.addAccountKeyToMap(o,t);this.performanceClient.addFields({kmsi:r},t),this.cacheConfig.cacheLocation===ne.LocalStorage&&s&&this.eventHandler.emitEvent(S.ACCOUNT_ADDED,void 0,ee.getAccountInfo(e))})}getAccountKeys(){return yn(this.browserStorage)}setAccountKeys(e,t,r=2){e.length===0?this.removeItem(Vn(r)):this.setItem(Vn(r),JSON.stringify(e),t)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Vn(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let r=this.getAccountKeys(),o=r.indexOf(e);o>-1?(r.splice(o,1),this.setAccountKeys(r,t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){let r=this.getActiveAccount(t);r?.homeAccountId===e.homeAccountId&&r?.environment===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(o=>{o.includes(e.homeAccountId)&&o.includes(e.environment)&&this.browserStorage.removeItem(o)}),this.cacheConfig.cacheLocation===ne.LocalStorage&&this.eventHandler.emitEvent(S.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);let r=this.getTokenKeys(),o=r.idToken.indexOf(e);o>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(o,1),this.setTokenKeys(r,t))}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,r=2){this.logger.trace("removeAccessTokenKey called");let o=this.getTokenKeys(r),i=0;if(e.forEach(s=>{let a=o.accessToken.indexOf(s);a>-1&&(o.accessToken.splice(a,1),i++)}),i>0){this.logger.info(`removed ${i} accessToken keys from tokenKeys map`),this.setTokenKeys(o,t,r);return}}removeRefreshToken(e,t){super.removeRefreshToken(e,t);let r=this.getTokenKeys(),o=r.refreshToken.indexOf(e);o>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(o,1),this.setTokenKeys(r,t))}getTokenKeys(e=2){return Ct(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,r=2){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(jn(this.clientId,r));return}else this.setItem(jn(this.clientId,r),JSON.stringify(e),t)}getIdTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;let o=this.validateAndParseJson(r);return!o||!fe.isIdTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o)}setIdTokenCredential(e,t,r){return h(this,null,function*(){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let o=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,yield this.setUserData(o,JSON.stringify(e),t,i,r);let s=this.getTokenKeys();s.idToken.indexOf(o)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),s.idToken.push(o),this.setTokenKeys(s,t))})}getAccessTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;let o=this.validateAndParseJson(r);return!o||!fe.isAccessTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o)}setAccessTokenCredential(e,t,r){return h(this,null,function*(){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let o=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,yield this.setUserData(o,JSON.stringify(e),t,i,r);let s=this.getTokenKeys(),a=s.accessToken.indexOf(o);a!==-1&&s.accessToken.splice(a,1),this.logger.trace(`access token ${a===-1?"added to":"updated in"} map`),s.accessToken.push(o),this.setTokenKeys(s,t)})}getRefreshTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;let o=this.validateAndParseJson(r);return!o||!fe.isRefreshTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o)}setRefreshTokenCredential(e,t,r){return h(this,null,function*(){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let o=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,yield this.setUserData(o,JSON.stringify(e),t,i,r);let s=this.getTokenKeys();s.refreshToken.indexOf(o)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),s.refreshToken.push(o),this.setTokenKeys(s,t))})}getAppMetadata(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!fe.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");let r=fe.generateAppMetadataKey(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!fe.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return r&&fe.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(ul.WRAPPER_SKU,e),this.internalStorage.setItem(ul.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(ul.WRAPPER_SKU)||y.EMPTY_STRING,t=this.internalStorage.getItem(ul.WRAPPER_VER)||y.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){let t=this.generateCacheKey(Cd.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;let o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){let r=this.generateCacheKey(Cd.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");let o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Ae.nowSeconds().toString()};this.setItem(r,JSON.stringify(o),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(S.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!fe.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){let r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}let o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===ne.LocalStorage){let i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){let o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(t.indexOf(De)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(t.indexOf(De)!==-1||t.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(d.ClearTokensAndKeysWithClaims,e);let t=this.getTokenKeys(),r=0;t.accessToken.forEach(o=>{let i=this.getAccessTokenCredential(o,e);i?.requestedClaimsHash&&o.includes(i.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(o,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return oe.startsWith(e,De)?e:`${De}.${this.clientId}.${e}`}generateCredentialKey(e){let t=e.credentialType===Ce.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==U.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${De}.${2}`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join("|").toLowerCase()}generateAccountKey(e){let t=e.homeAccountId.split(".")[1];return[`${De}.${2}`,e.homeAccountId,e.environment,t||e.tenantId||""].join("|").toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(pe.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(pe.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(pe.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(pe.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(pe.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");let r=kr(JSON.stringify(e));if(this.setTemporaryCache(pe.REQUEST_PARAMS,r,!0),t){let o=kr(t);this.setTemporaryCache(pe.VERIFIER,o,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");let e=this.getTemporaryCache(pe.REQUEST_PARAMS,!0);if(!e)throw E(Es);let t=this.getTemporaryCache(pe.VERIFIER,!0),r,o="";try{r=JSON.parse(we(e)),t&&(o=we(t))}catch(i){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${i}`),E(Is)}return[r,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(pe.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${De}.${pe.INTERACTION_STATUS_KEY}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),af(window),null}}setInteractionInProgress(e,t=zt.SIGNIN){let r=`${De}.${pe.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw E(fs);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}hydrateCache(e,t){return h(this,null,function*(){let r=fe.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),o;t.claims&&(o=yield this.cryptoImpl.hashString(t.claims));let i=fe.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Ae.toSecondsFromDate(e.expiresOn):0,e.extExpiresOn?Ae.toSecondsFromDate(e.extExpiresOn):0,we,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s,e.correlationId,ve.isKmsi(ve.extractTokenClaims(e.idToken,we)))})}saveCacheRecord(e,t,r,o){return h(this,null,function*(){try{yield Ty(n.prototype,this,"saveCacheRecord").call(this,e,t,r,o)}catch(i){if(i instanceof _r&&this.performanceClient&&t)try{let s=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:s.refreshToken.length,cacheIdCount:s.idToken.length,cacheAtCount:s.accessToken.length},t)}catch{}throw i}})}};function k_(n,e,t,r){try{switch(e){case ne.LocalStorage:return new Ef(n,t,r);case ne.SessionStorage:return new If;case ne.MemoryStorage:default:break}}catch(o){t.error(o)}return new $n}var O_=(n,e,t,r)=>{let o={cacheLocation:ne.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:ne.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new $s(n,o,Cr,e,t,r)};function P_(n,e,t,r,o){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(o||{},r):[]}function x_(n,e,t,r){let o=t.getAccountInfoFilteredBy(n,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}function F_(n,e,t,r){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let o=t.getAccountInfoFilteredBy({username:n},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function L_(n,e,t,r){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let o=t.getAccountInfoFilteredBy({homeAccountId:n},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function U_(n,e,t,r){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let o=t.getAccountInfoFilteredBy({localAccountId:n},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function H_(n,e,t){e.setActiveAccount(n,t)}function B_(n,e){return n.getActiveAccount(e)}var Mk="msal.broadcast.event",Tf=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Qe({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(Mk)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){let o=r||v_();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){let i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case S.ACCOUNT_ADDED:case S.ACCOUNT_REMOVED:case S.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(i);break;default:this.invokeCallbacks(i);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],o)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){let t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}};var Gs=class{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.platformAuthProvider=c,this.correlationId=l||Re(),this.logger=o.clone(he.MSAL_SKU,yt,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e,t){return h(this,null,function*(){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return H.getAbsoluteUrl(t,ct())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ti(r,this.browserStorage)}getDiscoveredAuthority(e){return h(this,null,function*(){let{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r?.length?r==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(H.getDomainFromUrl(i),t.environment):i,c=Dt.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=yield m(Hd.createDiscoveredInstance,d.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw j(Ye.authorityMismatch);return l})}};function fl(n,e,t,r){return h(this,null,function*(){t.addQueueMeasurement(d.InitializeBaseRequest,n.correlationId);let o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s=_(C({},n),{correlationId:n.correlationId,authority:o,scopes:i});if(!s.authenticationScheme)s.authenticationScheme=U.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===U.SSH){if(!n.sshJwk)throw j(Ye.missingSshJwk);if(!n.sshKid)throw j(Ye.missingSshKid)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!oe.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield rf(n.claims)),s})}function V_(n,e,t,r,o){return h(this,null,function*(){r.addQueueMeasurement(d.InitializeSilentRequest,n.correlationId);let i=yield m(fl,d.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return _(C(C({},n),i),{account:e,forceRefresh:n.forceRefresh||!1})})}function _f(n,e){let t,r=n.httpMethod;if(e===ie.EAR){if(t=r||wt.POST,t!==wt.POST)throw j(Ye.invalidRequestMethodForEAR)}else t=r||wt.GET;if(n.authorizePostBodyParameters&&t!==wt.POST)throw j(Ye.invalidAuthorizePostBodyParameters);return t}var lt=class extends Gs{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=C({correlationId:this.correlationId||Re()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=H.getAbsoluteUrl(e.postLogoutRedirectUri,ct())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=H.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ct())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=H.getAbsoluteUrl(ct(),ct())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=yield m(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new ei(t,this.performanceClient)})}getClientConfiguration(e){return h(this,null,function*(){let{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=yield m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:he.MSAL_SKU,version:yt,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=jt.setRequestState(this.browserCrypto,e&&e.state||y.EMPTY_STRING,o),s=yield m(fl,d.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(_(C({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=_(C({},s),{redirectUri:r,state:i,nonce:e.nonce||Re(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),c=_(C({},a),{httpMethod:_f(a,this.config.auth.protocolMode)});if(e.loginHint||e.sid)return c;let l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),c.account=l),c})}};function j_(n,e){if(!e)return null;try{return jt.parseRequestState(n,e).libraryState.meta}catch{throw v(be.invalidState)}}function ai(n,e,t){let r=an.getDeserializedResponse(n);if(!r)throw an.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),E(ls)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),E(cs));return r}function $_(n,e,t){if(!n.state)throw E(br);let r=j_(e,n.state);if(!r)throw E(us);if(r.interactionType!==t)throw E(ds)}var zs=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,t){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.HandleCodeResponse,t.correlationId);let r;try{r=un.getAuthorizationCodePayload(e,t.state)}catch(o){throw o instanceof st&&o.subError===Gt?E(Gt):o}return m(this.handleCodeResponseFromServer.bind(this),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)})}handleCodeResponseFromServer(e,t,r=!0){return h(this,null,function*(){if(this.performanceClient.addQueueMeasurement(d.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield m(this.authModule.updateAuthority.bind(this.authModule),d.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return yield m(this.authModule.acquireToken.bind(this.authModule),d.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:Ve.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:Ve.UPN}:null}};var G_="ContentError",z_="PageException",Af="user_switch";var q_="USER_INTERACTION_REQUIRED",K_="USER_CANCEL",W_="NO_NETWORK",Q_="DISABLED",Y_="ACCOUNT_UNAVAILABLE",J_="UX_NOT_ALLOWED";var Nk=-2147186943,kk={[Af]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},bt=class n extends N{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=r}};function Pr(n){if(n.ext&&n.ext.status&&n.ext.status===Q_||n.ext&&n.ext.error&&n.ext.error===Nk)return!0;switch(n.errorCode){case G_:case z_:return!0;default:return!1}}function ci(n,e,t){if(t&&t.status)switch(t.status){case Y_:return Xo(ln.nativeAccountUnavailable);case q_:return new Ne(n,e);case K_:return E(Gt);case W_:return E(Hn);case J_:return Xo(ln.uxNotAllowed)}return new bt(n,kk[n]||e,t)}var qs=class extends lt{acquireToken(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(q.acquireTokenSilent_silentFlow),r=yield m(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new al(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(yield m(o.acquireCachedToken.bind(o),d.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof si&&i.errorCode===Rr&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t?.account)}};var xr=class extends Gs{constructor(e,t,r,o,i,s,a,c,l,u,f,p){super(e,t,r,o,i,s,c,l,p),this.apiId=a,this.accountId=u,this.platformAuthProvider=l,this.nativeStorageManager=f,this.silentCacheClient=new qs(e,this.nativeStorageManager,r,o,i,s,c,l,p);let g=this.platformAuthProvider.getExtensionName();this.skus=ti.makeExtraSkuString({libraryName:he.MSAL_SKU,libraryVersion:yt,extensionName:g,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=_(C({},e.extraParameters),{[On.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e,t){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let r=this.performanceClient.startMeasurement(d.NativeInteractionClientAcquireToken,this.correlationId),o=Ae.nowSeconds(),i=this.initializeServerTelemetryManager(this.apiId);try{let s=yield this.initializeNativeRequest(e);try{let c=yield this.acquireTokensFromCache(this.accountId,s);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch(c){if(t===ke.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),c;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let a=yield this.platformAuthProvider.sendMessage(s);return yield this.handleNativeResponse(a,s,o).then(c=>(r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),i.clearNativeBrokerErrorCode(),c)).catch(c=>{throw r.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError}),c})}catch(s){throw s instanceof bt&&i.setNativeBrokerErrorCode(s.errorCode),r.end({success:!1}),s}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:de.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return h(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),v(be.noAccountFound);let r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw v(be.noAccountFound);try{let o=this.createSilentCacheRequest(t,r),i=yield this.silentCacheClient.acquireToken(o),s=_(C({},r),{idTokenClaims:i?.idTokenClaims,idToken:i?.idToken});return _(C({},i),{account:s})}catch(o){throw o}})}acquireTokenRedirect(e,t){return h(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let r=qt(e,[]);delete r.onRedirectNavigate;let o=yield this.initializeNativeRequest(r);try{yield this.platformAuthProvider.sendMessage(o)}catch(a){if(a instanceof bt&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),Pr(a)))throw a}this.browserStorage.setTemporaryCache(pe.NATIVE_REQUEST,JSON.stringify(o),!0);let i={apiId:q.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(s,i)})}handleRedirectPromise(e,t){return h(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let a=r,{prompt:o}=a,i=qt(a,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(pe.NATIVE_REQUEST));let s=Ae.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let c=yield this.platformAuthProvider.sendMessage(i),l=yield this.handleNativeResponse(c,i,s);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),l}catch(c){throw c}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,r){return h(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=ve.extractTokenClaims(e.id_token,we),i=this.createHomeAccountIdentifier(e,o),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId)?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(i!==s&&e.account.id!==t.accountId)throw ci(Af);let a=yield this.getDiscoveredAuthority({requestAuthority:t.authority}),c=as(this.browserStorage,a,i,we,this.correlationId,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);let l=yield this.generateAuthenticationResult(e,t,o,c,a.canonicalAuthority,r);return yield this.cacheAccount(c,this.correlationId,ve.isKmsi(o)),yield this.cacheNativeTokens(e,t,i,o,e.access_token,l.tenantId,r),l})}createHomeAccountIdentifier(e,t){return ee.generateHomeAccountId(e.client_info||y.EMPTY_STRING,Je.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?de.fromString(t):de.fromString(e)}generatePopAccessToken(e,t){return h(this,null,function*(){if(t.tokenType===U.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let r=new at(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw v(be.keyIdMissing);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token})}generateAuthenticationResult(e,t,r,o,i,s){return h(this,null,function*(){let a=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(t.scope,e.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||y.EMPTY_STRING,f=l.TenantId||r.tid||y.EMPTY_STRING,p=jo(ee.getAccountInfo(o),void 0,r,e.id_token);p.nativeAccountId!==e.account.id&&(p.nativeAccountId=e.account.id);let g=yield this.generatePopAccessToken(e,t),I=t.tokenType===U.POP?U.POP:U.BEARER;return{authority:i,uniqueId:u,tenantId:f,scopes:c.asArray(),account:p,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:Ae.toDateFromSeconds(s+e.expires_in),tokenType:I,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e,t,r){return h(this,null,function*(){yield this.browserStorage.setAccount(e,this.correlationId,r),this.browserStorage.removeAccountContext(ee.getAccountInfo(e),t)})}cacheNativeTokens(e,t,r,o,i,s,a){let c=fe.createIdTokenEntity(r,t.authority,e.id_token||"",t.clientId,o.tid||""),l=t.tokenType===U.POP?y.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,f=this.generateScopes(e.scope,t.scope),p=fe.createAccessTokenEntity(r,t.authority,i,t.clientId,o.tid||s,f.printScopes(),u,0,we,void 0,t.tokenType,void 0,t.keyId),g={idToken:c,accessToken:p};return this.nativeStorageManager.saveCacheRecord(g,this.correlationId,ve.isKmsi(o),t.storeInCache)}getExpiresInValue(e,t){return e===U.POP?y.SHR_NONCE_VALIDITY:(typeof t=="string"?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return h(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=yield this.getCanonicalAuthority(e),a=e,{scopes:r}=a,o=qt(a,["scopes"]),i=new de(r||[]);i.appendScopes(gt);let s=_(C({},o),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:C(C({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(s.signPopToken&&e.popKid)throw E(Os);if(this.handleExtraBrokerParams(s),s.extraParameters=s.extraParameters||{},s.extraParameters.telemetry=Ze.MATS_TELEMETRY,e.authenticationScheme===U.POP){let c={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},l=new at(this.browserCrypto),u;if(s.keyId)u=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:s.keyId})),s.signPopToken=!1;else{let f=yield m(l.generateCnf.bind(l),d.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(c,this.logger);u=f.reqCnfString,s.keyId=f.kid,s.signPopToken=!0}s.reqCnf=u}return this.addRequestSKUs(s),s})}getCanonicalAuthority(e){return h(this,null,function*(){let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));let r=new H(t);return r.validateAsUri(),r})}getPrompt(e){switch(this.apiId){case q.ssoSilent:case q.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),ue.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case ue.NONE:case ue.CONSENT:case ue.LOGIN:case ue.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),E(Ns)}}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(On.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(On.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(On.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let r="",o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[On.BROKER_REDIRECT_URI],r=e.extraParameters[On.CLIENT_ID]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},this.correlationId)}};function Ey(n,e,t,r,o){return h(this,null,function*(){let i=un.getStandardAuthorizeRequestParameters(_(C({},n.auth),{authority:e}),t,r,o);if(_e.addLibraryInfo(i,{sku:he.MSAL_SKU,version:yt,os:"",cpu:""}),n.auth.protocolMode!==ie.OIDC&&_e.addApplicationTelemetry(i,n.telemetry.application),t.platformBroker&&(_e.addNativeBroker(i),o.addFields({isPlatformAuthorizeRequest:!0},t.correlationId),t.authenticationScheme===U.POP)){let s=new Bs(r,o),a=new at(s),c;t.popKid?c=s.encodeKid(t.popKid):c=(yield m(a.generateCnf.bind(a),d.PopTokenGenerateCnf,r,o,t.correlationId)(t,r)).reqCnfString,_e.addPopToken(i,c)}return _e.instrumentBrokerParams(i,t.correlationId,o),i})}function Ks(n,e,t,r,o){return h(this,null,function*(){if(!t.codeChallenge)throw j(Ye.pkceParamsMissing);let i=yield m(Ey,d.GetStandardParams,r,o,t.correlationId)(n,e,t,r,o);return _e.addResponseType(i,ic.CODE),_e.addCodeChallengeParams(i,t.codeChallenge,y.S256_CODE_CHALLENGE_METHOD),_e.addExtraQueryParameters(i,t.extraQueryParameters||{}),un.getAuthorizeUrl(e,i,n.auth.encodeExtraQueryParams,t.extraQueryParameters)})}function Ws(n,e,t,r,o,i){return h(this,null,function*(){if(!r.earJwk)throw E(ll);let s=yield Ey(e,t,r,o,i);_e.addResponseType(s,ic.IDTOKEN_TOKEN_REFRESHTOKEN),_e.addEARParameters(s,r.earJwk);let a=new Map;_e.addExtraQueryParameters(a,r.extraQueryParameters||{});let c=un.getAuthorizeUrl(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return Z_(n,c,s)})}function Qs(n,e,t,r,o,i){return h(this,null,function*(){let s=yield Ey(e,t,r,o,i);_e.addResponseType(s,ic.CODE),_e.addCodeChallengeParams(s,r.codeChallenge,r.codeChallengeMethod||y.S256_CODE_CHALLENGE_METHOD),_e.addPostBodyParameters(s,r.authorizePostBodyParameters||{});let a=new Map;_e.addExtraQueryParameters(a,r.extraQueryParameters||{});let c=un.getAuthorizeUrl(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return Z_(n,c,s)})}function Z_(n,e,t){let r=n.createElement("form");return r.method="post",r.action=e,t.forEach((o,i)=>{let s=n.createElement("input");s.hidden=!0,s.name=i,s.value=o,r.appendChild(s)}),n.body.appendChild(r),r}function X_(n,e,t,r,o,i,s,a,c,l){return h(this,null,function*(){if(a.verbose("Account id found, calling WAM for token"),!l)throw E(Nr);let u=new Bs(a,c),f=new xr(r,o,u,a,s,r.system.navigationClient,t,c,l,e,i,n.correlationId),{userRequestState:p}=jt.parseRequestState(u,n.state);return m(f.acquireToken.bind(f),d.NativeInteractionClientAcquireToken,a,c,n.correlationId)(_(C({},n),{state:p,prompt:void 0}))})}function li(n,e,t,r,o,i,s,a,c,l,u,f){return h(this,null,function*(){if(Un.removeThrottle(s,o.auth.clientId,n),e.accountId)return m(X_,d.HandleResponsePlatformBroker,l,u,n.correlationId)(n,e.accountId,r,o,s,a,c,l,u,f);let p=_(C({},n),{code:e.code||"",codeVerifier:t}),g=new zs(i,s,p,l,u);return yield m(g.handleCodeResponse.bind(g),d.HandleCodeResponse,l,u,n.correlationId)(e,n)})}function Ys(n,e,t,r,o,i,s,a,c,l,u){return h(this,null,function*(){if(Un.removeThrottle(i,r.auth.clientId,n),un.validateAuthorizationResponse(e,n.state),!e.ear_jwe)throw E(Kd);if(!n.earJwk)throw E(ll);let f=JSON.parse(yield m(p_,d.DecryptEarResponse,c,l,n.correlationId)(n.earJwk,e.ear_jwe));if(f.accountId)return m(X_,d.HandleResponsePlatformBroker,c,l,n.correlationId)(n,f.accountId,t,r,i,s,a,c,l,u);let p=new $t(r.auth.clientId,i,new Bs(c,l),c,null,null,l);p.validateTokenResponse(f);let g={code:"",state:n.state,nonce:n.nonce,client_info:f.client_info,cloud_graph_host_name:f.cloud_graph_host_name,cloud_instance_host_name:f.cloud_instance_host_name,cloud_instance_name:f.cloud_instance_name,msgraph_host:f.msgraph_host};return yield m(p.handleServerTokenResponse.bind(p),d.HandleServerTokenResponse,c,l,n.correlationId)(f,o,Ae.nowSeconds(),n,g,void 0,void 0,void 0,void 0)})}var Ok=32;function Fr(n,e,t){return h(this,null,function*(){n.addQueueMeasurement(d.GeneratePkceCodes,t);let r=Ee(Pk,d.GenerateCodeVerifier,e,n,t)(n,e,t),o=yield m(xk,d.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}})}function Pk(n,e,t){try{let r=new Uint8Array(Ok);return Ee(u_,d.GetRandomValues,e,n,t)(r),St(r)}catch{throw E(ni)}}function xk(n,e,t,r){return h(this,null,function*(){e.addQueueMeasurement(d.GenerateCodeChallengeFromVerifier,r);try{let o=yield m(ly,d.Sha256Digest,t,e,r)(n,e,r);return St(new Uint8Array(o))}catch{throw E(ni)}})}var wf=class n{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(d.NativeMessageHandlerHandshake),this.platformAuthType=Ze.PLATFORM_EXTENSION_PROVIDER}sendMessage(e){return h(this,null,function*(){this.logger.trace(this.platformAuthType+" - sendMessage called.");let t={method:xs.GetToken,request:e},r={channel:Ze.CHANNEL_ID,extensionId:this.extensionId,responseId:Re(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);let o=yield new Promise((s,a)=>{this.resolvers.set(r.responseId,{resolve:s,reject:a})});return this.validatePlatformBrokerResponse(o)})}static createProvider(e,t,r){return h(this,null,function*(){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{let o=new n(e,t,r,Ze.PREFERRED_EXTENSION_ID);return yield o.sendHandshakeRequest(),o}catch{let i=new n(e,t,r);return yield i.sendHandshakeRequest(),i}})}sendHandshakeRequest(){return h(this,null,function*(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:Ze.CHANNEL_ID,extensionId:this.extensionId,responseId:Re(),body:{method:xs.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(E(Rs)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==Ze.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===xs.HandshakeRequest){let r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(E(Ms))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");let t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{let i=t.body.method;if(i===xs.Response){if(!r)return;let s=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(ci(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(ci(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw Zi(fr.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===xs.HandshakeResponse){if(!o){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Zi(fr.unexpectedError,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Ze.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}};var Df=class n{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType=Ze.PLATFORM_DOM_PROVIDER}static createProvider(e,t,r){return h(this,null,function*(){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(yield window.navigator.platformAuthentication.getSupportedContracts(Ze.MICROSOFT_ENTRA_BROKERID))?.includes(Ze.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new n(e,t,r)})}getExtensionId(){return Ze.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return Ze.DOM_API_NAME}sendMessage(e){return h(this,null,function*(){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{let t=this.initializePlatformDOMRequest(e),r=yield window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(r)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}})}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");let T=e,{accountId:t,clientId:r,authority:o,scope:i,redirectUri:s,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:f}=T,p=qt(T,["accountId","clientId","authority","scope","redirectUri","correlationId","state","storeInCache","embeddedClientId","extraParameters"]),g=this.getDOMExtraParams(p);return{accountId:t,brokerId:this.getExtensionId(),authority:o,clientId:r,correlationId:a||this.correlationId,extraParameters:C(C({},f),g),isSecurityTokenService:!1,redirectUri:s,scope:i,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){let t=e;if(t.isSuccess===!1&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),ci(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw Zi(fr.unexpectedError,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){let t=Object.entries(e).reduce((o,[i,s])=>(o[i]=String(s),o),{});return C({},t)}};function eA(n,e,t,r){return h(this,null,function*(){n.trace("getPlatformAuthProvider called",t);let o=Fk();n.trace("Has client allowed platform auth via DOM API: "+o);let i;try{o&&(i=yield Df.createProvider(n,e,t)),i||(n.trace("Platform auth via DOM API not available, checking for extension"),i=yield wf.createProvider(n,r||yy,e))}catch(s){n.trace("Platform auth not available",s)}return i})}function Fk(){let n;try{return n=window[ne.SessionStorage],n?.getItem(b_)==="true"}catch{return!1}}function zn(n,e,t,r){if(e.trace("isPlatformAuthAllowed called"),!n.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!t)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case U.BEARER:case U.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}var Sf=class extends lt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=i}acquireToken(e,t){let r;try{if(r={popupName:this.generatePopupName(e.scopes||gt,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{let i=_(C({},e),{httpMethod:_f(e,this.config.auth.protocolMode)});return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(i,r,t)}}catch(o){return Promise.reject(o)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t,r){return h(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let o=yield m(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,R.Popup);t.popup&&uf(o.authority);let i=zn(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return o.platformBroker=i,this.config.auth.protocolMode===ie.EAR?this.executeEarFlow(o,t):this.executeCodeFlow(o,t,r)})}executeCodeFlow(e,t,r){return h(this,null,function*(){let o=e.correlationId,i=this.initializeServerTelemetryManager(q.acquireTokenPopup),s=r||(yield m(Fr,d.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o)),a=_(C({},e),{codeChallenge:s.challenge});try{let c=yield m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,o)({serverTelemetryManager:i,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});if(a.httpMethod===wt.POST)return yield this.executeCodeFlowWithPost(a,t,c,s.verifier);{let l=yield m(Ks,d.GetAuthCodeUrl,this.logger,this.performanceClient,o)(this.config,c.authority,a,this.logger,this.performanceClient),u=this.initiateAuthRequest(l,t);this.eventHandler.emitEvent(S.POPUP_OPENED,R.Popup,{popupWindow:u},null);let f=yield this.monitorPopupForHash(u,t.popupWindowParent),p=Ee(ai,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,this.config.auth.OIDCOptions.serverResponseType,this.logger);return yield m(li,d.HandleResponseCode,this.logger,this.performanceClient,o)(e,p,s.verifier,q.acquireTokenPopup,this.config,c,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(c){throw t.popup?.close(),c instanceof N&&(c.setCorrelationId(this.correlationId),i.cacheFailedRequest(c)),c}})}executeEarFlow(e,t){return h(this,null,function*(){let r=e.correlationId,o=yield m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),i=yield m(Ls,d.GenerateEarKey,this.logger,this.performanceClient,r)(),s=_(C({},e),{earJwk:i}),a=t.popup||this.openPopup("about:blank",t);(yield Ws(a.document,this.config,o,s,this.logger,this.performanceClient)).submit();let l=yield m(this.monitorPopupForHash.bind(this),d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,t.popupWindowParent),u=Ee(ai,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return m(Ys,d.HandleResponseEar,this.logger,this.performanceClient,r)(s,u,q.acquireTokenPopup,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}executeCodeFlowWithPost(e,t,r,o){return h(this,null,function*(){let i=e.correlationId,s=yield m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=t.popup||this.openPopup("about:blank",t);(yield Qs(a.document,this.config,s,e,this.logger,this.performanceClient)).submit();let l=yield m(this.monitorPopupForHash.bind(this),d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,i)(a,t.popupWindowParent),u=Ee(ai,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return m(li,d.HandleResponseCode,this.logger,this.performanceClient,i)(e,u,o,q.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}logoutPopupAsync(e,t,r,o){return h(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(S.LOGOUT_START,R.Popup,e);let i=this.initializeServerTelemetryManager(q.logoutPopup);try{yield this.clearCacheOnLogout(this.correlationId,e.account);let s=yield m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===ie.OIDC){if(this.eventHandler.emitEvent(S.LOGOUT_SUCCESS,R.Popup,e),o){let l={apiId:q.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=H.getAbsoluteUrl(o,ct());yield this.navigationClient.navigateInternal(u,l)}t.popup?.close();return}}let a=s.getLogoutUri(e);this.eventHandler.emitEvent(S.LOGOUT_SUCCESS,R.Popup,e);let c=this.openPopup(a,t);if(this.eventHandler.emitEvent(S.POPUP_OPENED,R.Popup,{popupWindow:c},null),yield this.monitorPopupForHash(c,t.popupWindowParent).catch(()=>{}),o){let l={apiId:q.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=H.getAbsoluteUrl(o,ct());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${u}`),yield this.navigationClient.navigateInternal(u,l)}else this.logger.verbose("No main window navigation requested")}catch(s){throw t.popup?.close(),s instanceof N&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),this.eventHandler.emitEvent(S.LOGOUT_FAILURE,R.Popup,null,s),this.eventHandler.emitEvent(S.LOGOUT_END,R.Popup),s}this.eventHandler.emitEvent(S.LOGOUT_END,R.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),E(dn)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(E(Gt));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="",c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===tn.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw E(ps);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),E(hs)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){let i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=r.popupSize?.width,u=r.popupSize?.height,f=r.popupPosition?.top,p=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=he.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=he.POPUP_HEIGHT),(!f||f<0||f>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),f=Math.max(0,c/2-he.POPUP_HEIGHT/2+s)),(!p||p<0||p>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),p=Math.max(0,a/2-he.POPUP_WIDTH/2+i)),o.open(e,t,`width=${l}, height=${u}, top=${f}, left=${p}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${he.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${he.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};function Lk(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var bf=class extends lt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){return h(this,null,function*(){let t=yield m(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,R.Redirect);t.platformBroker=zn(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);let r=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(S.RESTORE_FROM_BFCACHE,R.Redirect))},o=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${o}`),this.browserStorage.setTemporaryCache(pe.ORIGIN_URI,o,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===ie.EAR?yield this.executeEarFlow(t):yield this.executeCodeFlow(t,e.onRedirectNavigate)}catch(i){throw i instanceof N&&i.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),i}})}executeCodeFlow(e,t){return h(this,null,function*(){let r=e.correlationId,o=this.initializeServerTelemetryManager(q.acquireTokenRedirect),i=yield m(Fr,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s=_(C({},e),{codeChallenge:i.challenge});this.browserStorage.cacheAuthorizeRequest(s,i.verifier);try{if(s.httpMethod===wt.POST)return yield this.executeCodeFlowWithPost(s);{let a=yield m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:s.authority,requestAzureCloudOptions:s.azureCloudOptions,requestExtraQueryParameters:s.extraQueryParameters,account:s.account}),c=yield m(Ks,d.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,s,this.logger,this.performanceClient);return yield this.initiateAuthRequest(c,t)}}catch(a){throw a instanceof N&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),a}})}executeEarFlow(e){return h(this,null,function*(){let t=e.correlationId,r=yield m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=yield m(Ls,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=_(C({},e),{earJwk:o});return this.browserStorage.cacheAuthorizeRequest(i),(yield Ws(document,this.config,r,i,this.logger,this.performanceClient)).submit(),new Promise((a,c)=>{setTimeout(()=>{c(E(ii,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})})}executeCodeFlowWithPost(e){return h(this,null,function*(){let t=e.correlationId,r=yield m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(yield Qs(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((i,s)=>{setTimeout(()=>{s(E(ii,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})})}handleRedirectPromise(e="",t,r,o){return h(this,null,function*(){let i=this.initializeServerTelemetryManager(q.handleRedirectPromise);try{let[s,a]=this.getRedirectResponse(e||"");if(!s)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),Lk()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let c=this.browserStorage.getTemporaryCache(pe.ORIGIN_URI,!0)||y.EMPTY_STRING,l=an.normalizeUrlForComparison(c),u=an.normalizeUrlForComparison(window.location.href);if(l===u&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&y_(c),yield this.handleResponse(s,t,r,i);if(this.config.auth.navigateToLoginRequestUrl){if(!cf()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(pe.URL_HASH,a,!0);let f={apiId:q.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},p=!0;if(!c||c==="null"){let g=C_();this.browserStorage.setTemporaryCache(pe.ORIGIN_URI,g,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),p=yield this.navigationClient.navigateInternal(g,f)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),p=yield this.navigationClient.navigateInternal(c,f);if(!p)return yield this.handleResponse(s,t,r,i)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(s,t,r,i);return null}catch(s){throw s instanceof N&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),s}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===tn.QUERY?t=window.location.search:t=window.location.hash);let r=an.getDeserializedResponse(t);if(r){try{$_(r,this.browserCrypto,R.Redirect)}catch(i){return i instanceof N&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return af(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}let o=this.browserStorage.getTemporaryCache(pe.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(pe.URL_HASH)),o&&(r=an.getDeserializedResponse(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,t,r,o){return h(this,null,function*(){if(!e.state)throw E(br);if(e.ear_jwe){let a=yield m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return m(Ys,d.HandleResponseEar,this.logger,this.performanceClient,t.correlationId)(t,e,q.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}let s=yield m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority});return m(li,d.HandleResponseCode,this.logger,this.performanceClient,t.correlationId)(t,e,r,q.acquireTokenRedirect,this.config,s,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}initiateAuthRequest(e,t){return h(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let r={apiId:q.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=t||this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),o(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),E(dn)})}logout(e){return h(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(q.logout);try{this.eventHandler.emitEvent(S.LOGOUT_START,R.Redirect,e),yield this.clearCacheOnLogout(this.correlationId,t.account);let o={apiId:q.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=yield m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(i.authority.protocolMode===ie.OIDC)try{i.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.eventHandler.emitEvent(S.LOGOUT_SUCCESS,R.Redirect,t);return}}let s=i.getLogoutUri(t);if(this.eventHandler.emitEvent(S.LOGOUT_SUCCESS,R.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,zt.SIGNOUT),yield this.navigationClient.navigateExternal(s,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,zt.SIGNOUT),yield this.navigationClient.navigateExternal(s,o);return}}catch(o){throw o instanceof N&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.eventHandler.emitEvent(S.LOGOUT_FAILURE,R.Redirect,null,o),this.eventHandler.emitEvent(S.LOGOUT_END,R.Redirect),o}this.eventHandler.emitEvent(S.LOGOUT_END,R.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return H.getAbsoluteUrl(t,ct())}};function tA(n,e,t,r,o){return h(this,null,function*(){if(e.addQueueMeasurement(d.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),E(dn);return o?m(Uk,d.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Ee(Hk,d.SilentHandlerLoadFrameSync,t,e,r)(n)})}function nA(n,e,t,r,o){return h(this,null,function*(){let i=Rf();if(!i.contentDocument)throw"No document associated with iframe!";return(yield Qs(i.contentDocument,n,e,t,r,o)).submit(),i})}function rA(n,e,t,r,o){return h(this,null,function*(){let i=Rf();if(!i.contentDocument)throw"No document associated with iframe!";return(yield Ws(i.contentDocument,n,e,t,r,o)).submit(),i})}function Iy(n,e,t,r,o,i,s){return h(this,null,function*(){return r.addQueueMeasurement(d.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<hf&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${hf}ms). This may result in timeouts.`);let l=window.setTimeout(()=>{window.clearInterval(u),c(E(gs))},e),u=window.setInterval(()=>{let f="",p=n.contentWindow;try{f=p?p.location.href:""}catch{}if(!f||f==="about:blank")return;let g="";p&&(s===tn.QUERY?g=p.location.search:g=p.location.hash),window.clearTimeout(l),window.clearInterval(u),a(g)},t)}).finally(()=>{Ee(Bk,d.RemoveHiddenIframe,o,r,i)(n)})})}function Uk(n,e,t,r){return t.addQueueMeasurement(d.SilentHandlerLoadFrame,r),new Promise((o,i)=>{let s=Rf();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function Hk(n){let e=Rf();return e.src=n,e}function Rf(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),n.setAttribute("allow","local-network-access *"),document.body.appendChild(n),n}function Bk(n){document.body===n.parentNode&&document.body.removeChild(n)}var Mf=class extends lt{constructor(e,t,r,o,i,s,a,c,l,u,f){super(e,t,r,o,i,s,c,u,f),this.apiId=a,this.nativeStorage=l}acquireToken(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=C({},e);t.prompt?t.prompt!==ue.NONE&&t.prompt!==ue.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${ue.NONE}`),t.prompt=ue.NONE):t.prompt=ue.NONE;let r=yield m(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,R.Silent);return r.platformBroker=zn(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),uf(r.authority),this.config.auth.protocolMode===ie.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)})}executeCodeFlow(e){return h(this,null,function*(){let t,r=this.initializeServerTelemetryManager(this.apiId);try{return t=yield m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),yield m(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(o){if(o instanceof N&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),!t||!(o instanceof N)||o.errorCode!==he.INVALID_GRANT_ERROR)throw o;return this.performanceClient.addFields({retryError:o.errorCode},this.correlationId),yield m(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,e)}})}executeEarFlow(e){return h(this,null,function*(){let t=e.correlationId,r=yield m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=yield m(Ls,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=_(C({},e),{earJwk:o}),s=yield m(rA,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,t)(this.config,r,i,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=yield m(Iy,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,t)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,a),l=Ee(ai,d.DeserializeResponse,this.logger,this.performanceClient,t)(c,a,this.logger);return m(Ys,d.HandleResponseEar,this.logger,this.performanceClient,t)(i,l,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}logout(){return Promise.reject(E(fn))}silentTokenHelper(e,t){return h(this,null,function*(){let r=t.correlationId;this.performanceClient.addQueueMeasurement(d.SilentIframeClientTokenHelper,r);let o=yield m(Fr,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),i=_(C({},t),{codeChallenge:o.challenge}),s;if(t.httpMethod===wt.POST)s=yield m(nA,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient);else{let u=yield m(Ks,d.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient);s=yield m(tA,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(u,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}let a=this.config.auth.OIDCOptions.serverResponseType,c=yield m(Iy,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,a),l=Ee(ai,d.DeserializeResponse,this.logger,this.performanceClient,r)(c,a,this.logger);return m(li,d.HandleResponseCode,this.logger,this.performanceClient,r)(t,l,o.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)})}};var Nf=class extends lt{acquireToken(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.SilentRefreshClientAcquireToken,e.correlationId);let t=yield m(fl,d.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r=C(C({},e),t);e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));let o=this.initializeServerTelemetryManager(q.acquireTokenSilent_silentFlow),i=yield this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return m(i.acquireTokenByRefreshToken.bind(i),d.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})})}logout(){return Promise.reject(E(fn))}createRefreshTokenClient(e){return h(this,null,function*(){let t=yield m(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new sl(t,this.performanceClient)})}};var kf=class{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){return h(this,null,function*(){if(!this.isBrowserEnvironment)throw E(hn);let o=e.correlationId||Re(),i=t.id_token?ve.extractTokenClaims(t.id_token,we):void 0,s=ve.isKmsi(i||{}),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},c=e.authority?new Dt(Dt.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,a,this.logger,e.correlationId||Re()):void 0,l=yield this.loadAccount(e,r.clientInfo||t.client_info||"",o,i,c),u=yield this.loadIdToken(t,l.homeAccountId,l.environment,l.realm,o,s),f=yield this.loadAccessToken(e,t,l.homeAccountId,l.environment,l.realm,r,o,s),p=yield this.loadRefreshToken(t,l.homeAccountId,l.environment,o,s);return this.generateAuthenticationResult(e,{account:l,idToken:u,accessToken:f,refreshToken:p},i,c)})}loadAccount(e,t,r,o,i){return h(this,null,function*(){if(this.logger.verbose("TokenCache - loading account"),e.account){let l=ee.createFromAccountInfo(e.account);return yield this.storage.setAccount(l,r,ve.isKmsi(o||{})),l}else if(!i||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),E(As);let s=ee.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=as(this.storage,i,s,we,r,o,t,i.hostnameAndPort,a,void 0,void 0,this.logger);return yield this.storage.setAccount(c,r,ve.isKmsi(o||{})),c})}loadIdToken(e,t,r,o,i,s){return h(this,null,function*(){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let a=fe.createIdTokenEntity(t,r,e.id_token,this.config.auth.clientId,o);return yield this.storage.setIdTokenCredential(a,i,s),a})}loadAccessToken(e,t,r,o,i,s,a,c){return h(this,null,function*(){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let l=t.scope?de.fromString(t.scope):new de(e.scopes),u=s.expiresOn||t.expires_in+Ae.nowSeconds(),f=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Ae.nowSeconds(),p=fe.createAccessTokenEntity(r,o,t.access_token,this.config.auth.clientId,i,l.printScopes(),u,f,we);return yield this.storage.setAccessTokenCredential(p,a,c),p})}loadRefreshToken(e,t,r,o,i){return h(this,null,function*(){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let s=fe.createRefreshTokenEntity(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return yield this.storage.setRefreshTokenCredential(s,o,i),s})}generateAuthenticationResult(e,t,r,o){let i="",s=[],a=null,c;t?.accessToken&&(i=t.accessToken.secret,s=de.fromString(t.accessToken.target).asArray(),a=Ae.toDateFromSeconds(t.accessToken.expiresOn),c=Ae.toDateFromSeconds(t.accessToken.extendedExpiresOn));let l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:ee.getAccountInfo(l),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}};var Of=class extends ei{constructor(e){super(e),this.includeRedirectUri=!1}};var Pf=class extends lt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){return h(this,null,function*(){if(!e.code)throw E(ws);let t=yield m(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,R.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{let o=_(C({},t),{code:e.code}),i=yield m(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new Of(i);this.logger.verbose("Auth code client created");let a=new zs(s,this.browserStorage,o,this.logger,this.performanceClient);return yield m(a.handleCodeResponseFromServer.bind(a),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof N&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}})}logout(){return Promise.reject(E(fn))}};function oA(n,e,t){let r=window.msal?.clientIds||[],o=r.length,i=r.filter(s=>s===n).length;i>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:o,sameClientIdInstanceCount:i})}function xf(n,e,t){try{lf(n)}catch(r){throw e.end({success:!1},r,t),r}}var Js=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Bs(this.logger,this.performanceClient):Cr,this.eventHandler=new Tf(this.logger),this.browserStorage=this.isBrowserEnvironment?new $s(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,Km(this.config.auth)):O_(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);let t={cacheLocation:ne.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:ne.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new $s(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new kf(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(e,t){return h(this,null,function*(){let r=new n(e);return yield r.initialize(t),r})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e,t){return h(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(S.INITIALIZE_END);return}let r=e?.correlationId||this.getRequestCorrelationId(),o=this.config.system.allowPlatformBroker,i=this.performanceClient.startMeasurement(d.InitializeClientApplication,r);if(this.eventHandler.emitEvent(S.INITIALIZE_START),!t)try{this.logMultipleInstances(i)}catch{}if(yield m(this.browserStorage.initialize.bind(this.browserStorage),d.InitializeCache,this.logger,this.performanceClient,r)(r),o)try{this.platformAuthProvider=yield eA(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(s){this.logger.verbose(s)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Ee(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),d.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(r)),this.initialized=!0,this.eventHandler.emitEvent(S.INITIALIZE_END),i.end({allowPlatformBroker:o,success:!0})})}handleRedirectPromise(e){return h(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),gy(this.initialized),this.isBrowserEnvironment){let t=e||"",r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return h(this,null,function*(){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===zt.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);let r=this.getAllAccounts(),o=this.browserStorage.getCachedNativeRequest(),i=o&&this.platformAuthProvider&&!e,s;this.eventHandler.emitEvent(S.HANDLE_REDIRECT_START,R.Redirect);let a;try{if(i&&this.platformAuthProvider){s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,o?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),s.add({isPlatformBrokerRequest:!0});let c=new xr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,q.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,o.accountId,this.nativeInternalStorage,o.correlationId);a=m(c.handleRedirectPromise.bind(c),d.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{let[c,l]=this.browserStorage.getCachedRequest(),u=c.correlationId;s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,u),this.logger.trace("handleRedirectPromise - acquiring token from web flow");let f=this.createRedirectClient(u);a=m(f.handleRedirectPromise.bind(f),d.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,c,l,s)}}catch(c){throw this.browserStorage.resetRequestCache(),c}return a.then(c=>(c?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(S.LOGIN_SUCCESS,R.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_SUCCESS,R.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0},void 0,c.account)):s.event.errorCode?s.end({success:!1},void 0):s.discard(),this.eventHandler.emitEvent(S.HANDLE_REDIRECT_END,R.Redirect),c)).catch(c=>{this.browserStorage.resetRequestCache();let l=c;throw r.length>0?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_FAILURE,R.Redirect,null,l):this.eventHandler.emitEvent(S.LOGIN_FAILURE,R.Redirect,null,l),this.eventHandler.emitEvent(S.HANDLE_REDIRECT_END,R.Redirect),s.end({success:!1},l),c})})}acquireTokenRedirect(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenPreRedirect,t);r.add({scenarioId:e.scenarioId});let o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{let a=typeof o=="function"?o(s):void 0;return r.add({navigateCallbackResult:a!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let c=typeof s=="function"?s(a):void 0;return r.add({navigateCallbackResult:c!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,c}}let i=this.getAllAccounts().length>0;try{my(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,zt.SIGNIN),i?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_START,R.Redirect,e):this.eventHandler.emitEvent(S.LOGIN_START,R.Redirect,e);let s;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?s=new xr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,q.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(c=>{if(r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof bt&&Pr(c))return this.platformAuthProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof Ne)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw c}):s=this.createRedirectClient(t).acquireToken(e),yield s}catch(s){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(d.AcquireTokenRedirect,t).end({success:!1},s,e.account):r.end({success:!1},s,e.account),i?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_FAILURE,R.Redirect,null,s):this.eventHandler.emitEvent(S.LOGIN_FAILURE,R.Redirect,null,s),s}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",t),xf(this.initialized,r,e.account),this.browserStorage.setInteractionInProgress(!0,zt.SIGNIN)}catch(a){return Promise.reject(a)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_START,R.Popup,e):this.eventHandler.emitEvent(S.LOGIN_START,R.Popup,e);let i,s=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(_(C({},e),{correlationId:t}),q.acquireTokenPopup).then(a=>(r.end({success:!0},void 0,a.account),a)).catch(a=>{if(r.add({brokerErrorName:a.name,brokerErrorCode:a.errorCode}),a instanceof bt&&Pr(a))return this.platformAuthProvider=void 0,this.createPopupClient(t).acquireToken(e,s);if(a instanceof Ne)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,s);throw a})):i=this.createPopupClient(t).acquireToken(e,s),i.then(a=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(S.LOGIN_SUCCESS,R.Popup,a):this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_SUCCESS,R.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length},void 0,a.account),a)).catch(a=>(o.length>0?this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_FAILURE,R.Popup,null,a):this.eventHandler.emitEvent(S.LOGIN_FAILURE,R.Popup,null,a),r.end({success:!1},a,e.account),Promise.reject(a))).finally(()=>h(this,null,function*(){this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&(yield this.preGeneratePkceCodes(t))}))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e),r=_(C({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(d.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId}),xf(this.initialized,this.ssoSilentMeasurement,e.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(S.SSO_SILENT_START,R.Silent,r);let o;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),o=this.acquireTokenNative(r,q.ssoSilent).catch(i=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i instanceof bt&&Pr(i))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw i})):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(i=>(this.eventHandler.emitEvent(S.SSO_SILENT_SUCCESS,R.Silent,i),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length},void 0,i.account),i)).catch(i=>{throw this.eventHandler.emitEvent(S.SSO_SILENT_FAILURE,R.Silent,null,i),this.ssoSilentMeasurement?.end({success:!1},i,e.account),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenByCode,t);xf(this.initialized,r),this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_BY_CODE_START,R.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw E(Ss);if(e.code){let o=e.code,i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(_(C({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_BY_CODE_SUCCESS,R.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length},void 0,s.account),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_BY_CODE_FAILURE,R.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),yield i}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});let o=yield this.acquireTokenNative(_(C({},e),{correlationId:t}),q.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof bt&&Pr(i)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i});return r.end({success:!0},void 0,o.account),o}else throw E(bs);else throw E(Ds)}catch(o){throw this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_BY_CODE_FAILURE,R.Silent,null,o),r.end({success:!1},o),o}})}acquireTokenByCodeAsync(e){return h(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(d.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return h(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenFromCache,e.correlationId),t){case ke.Default:case ke.AccessToken:case ke.AccessTokenAndRefreshToken:let r=this.createSilentCacheClient(e.correlationId);return m(r.acquireToken.bind(r),d.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw v(be.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return h(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenByRefreshToken,e.correlationId),t){case ke.Default:case ke.AccessTokenAndRefreshToken:case ke.RefreshToken:case ke.RefreshTokenAndNetwork:let r=this.createSilentRefreshClient(e.correlationId);return m(r.acquireToken.bind(r),d.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw v(be.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return h(this,null,function*(){this.performanceClient.addQueueMeasurement(d.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return m(t.acquireToken.bind(t),d.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(C({correlationId:t},e))})}logoutRedirect(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);return my(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,zt.SIGNOUT),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return lf(this.initialized),this.browserStorage.setInteractionInProgress(!0,zt.SIGNOUT),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}clearCache(e){return h(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){let t=this.getRequestCorrelationId();return P_(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){let t=this.getRequestCorrelationId();return x_(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){let t=this.getRequestCorrelationId();return F_(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){let t=this.getRequestCorrelationId();return L_(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){let t=this.getRequestCorrelationId();return U_(e,this.logger,this.browserStorage,t)}setActiveAccount(e){let t=this.getRequestCorrelationId();H_(e,this.browserStorage,t)}getActiveAccount(){let e=this.getRequestCorrelationId();return B_(this.browserStorage,e)}hydrateCache(e,t){return h(this,null,function*(){this.logger.verbose("hydrateCache called");let r=ee.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return yield this.browserStorage.setAccount(r,e.correlationId,ve.isKmsi(e.idTokenClaims)),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,r,o){return h(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw E(Nr);return new xr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,o)})}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!zn(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case ue.NONE:case ue.CONSENT:case ue.LOGIN:case ue.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Sf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new bf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new Mf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,q.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new qs(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new Nf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new Pf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,q.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return py(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==ne.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==ne.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?Re():y.EMPTY_STRING}loginRedirect(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(C({correlationId:t},e||ny))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(C({correlationId:t},e||ny))}acquireTokenSilent(e){return h(this,null,function*(){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),xf(this.initialized,r,e.account),this.logger.verbose("acquireTokenSilent called",t);let o=e.account||this.getActiveAccount();if(!o)throw E(vs);return this.acquireTokenSilentDeduped(e,o,t).then(i=>(r.end({success:!0,fromCache:i.fromCache,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length},void 0,i.account),_(C({},i),{state:e.state,correlationId:t}))).catch(i=>{throw i instanceof N&&i.setCorrelationId(t),r.end({success:!1},i,o),i})})}acquireTokenSilentDeduped(e,t,r){return h(this,null,function*(){let o=Ln(this.config.auth.clientId,_(C({},e),{authority:e.authority||this.config.auth.authority,correlationId:r}),t.homeAccountId),i=JSON.stringify(o),s=this.activeSilentTokenRequests.get(i);if(typeof s>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);let a=m(this.acquireTokenSilentAsync.bind(this),d.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)(_(C({},e),{correlationId:r}),t);return this.activeSilentTokenRequests.set(i,a),a.finally(()=>{this.activeSilentTokenRequests.delete(i)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),s})}acquireTokenSilentAsync(e,t){return h(this,null,function*(){let r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(d.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_START,R.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);let o=yield m(V_,d.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||ke.Default;return this.acquireTokenSilentNoIframe(o,i).catch(a=>h(this,null,function*(){if(Vk(a,i))if(this.activeIframeRequest)if(i!==ke.Skip){let[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,o.correlationId);let f=this.performanceClient.startMeasurement(d.AwaitConcurrentIframe,o.correlationId);f.add({awaitIframeCorrelationId:u});let p=yield l;if(f.end({success:p}),p)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),m(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),m(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a})).then(a=>(this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_SUCCESS,R.Silent,a),this.performanceClient.addFields({fromCache:a.fromCache},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_FAILURE,R.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})})}acquireTokenSilentNoIframe(e,t){return h(this,null,function*(){return zn(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,q.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(r=>h(this,null,function*(){throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof bt&&Pr(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,v(be.tokenRefreshRequired)):r}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===ke.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),m(this.acquireTokenFromCache.bind(this),d.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===ke.AccessToken)throw r;return this.eventHandler.emitEvent(S.ACQUIRE_TOKEN_NETWORK_START,R.Silent,e),m(this.acquireTokenByRefreshToken.bind(this),d.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}preGeneratePkceCodes(e){return h(this,null,function*(){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=yield m(Fr,d.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()})}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");let t=this.pkceCode?C({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){let t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),oA(t,e,this.logger)}};function Vk(n,e){let t=!(n instanceof Ne&&n.subError!==ln.badToken),r=n.errorCode===he.INVALID_GRANT_ERROR||n.errorCode===be.tokenRefreshRequired,o=t&&r||n.errorCode===ln.noTokensFound||n.errorCode===ln.refreshTokenExpired,i=r_.includes(e);return o&&i}function iA(n,e){return h(this,null,function*(){let t=new mf(n);return yield t.initialize(),Js.createController(t,e)})}var hl=class n{static createPublicClientApplication(e){return h(this,null,function*(){let t=yield iA(e);return new n(e,t)})}constructor(e,t){this.isBroker=!1,this.controller=t||new Js(new mf(e))}initialize(e){return h(this,null,function*(){return this.controller.initialize(e,this.isBroker)})}acquireTokenPopup(e){return h(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return h(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var jk={auth:{clientId:"d754916c-6408-4ecd-9dfd-68d64993ecae",authority:"https://login.microsoftonline.com/0784cbd8-29cf-49ad-ae0e-4ebd47bf32d1",redirectUri:window.location.origin},cache:{cacheLocation:ne.LocalStorage,storeAuthStateInCookie:!1},system:{loggerOptions:{logLevel:Z.Warning,loggerCallback:()=>{}}}},sA={tinyTicketsApi:{endpoint:"https://tinytickets-api-hbh5h6etb4hvfjgw.centralindia-01.azurewebsites.net",scopes:["api://f2cea967-6192-44ae-aedc-1e6b6a994e5e/access_as_user"]}},ui=new hl(jk);var aA=class n{login(){return ui.loginRedirect({scopes:["User.Read",...sA.tinyTicketsApi.scopes]})}logout(){return ui.logoutRedirect()}getAccount(){let e=ui.getAllAccounts();return e.length?e[0]:void 0}getToken(e){return h(this,null,function*(){let t=this.getAccount();if(!t)return ui.loginRedirect({scopes:e});try{return yield ui.acquireTokenSilent({account:t,scopes:e})}catch{return ui.acquireTokenRedirect({scopes:e})}})}isLoggedIn(){return!!this.getAccount()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};export{Me as a,vA as b,z as c,Zf as d,Xf as e,Nt as f,oa as g,ia as h,Wt as i,$l as j,RA as k,MA as l,Br as m,tt as n,UA as o,Vr as p,Kl as q,BA as r,jr as s,tC as t,th as u,sa as v,nh as w,rh as x,jA as y,oh as z,$A as A,GA as B,zA as C,Ql as D,qA as E,KA as F,b as G,ua as H,W as I,YA as J,M as K,ae as L,D as M,Yr as N,kh as O,nt as P,wi as Q,NC as R,kC as S,Qn as T,sr as U,ro as V,Kr as W,xt as X,vw as Y,oo as Z,ar as _,Pa as $,Bu as aa,Xw as ba,eD as ca,Kv as da,nD as ea,rD as fa,Pi as ga,uD as ha,ND as ia,ba as ja,Mu as ka,Kp as la,ot as ma,ze as na,Ma as oa,Y as pa,Ua as qa,WE as ra,QE as sa,pb as ta,qe as ua,ZE as va,Rb as wa,Ui as xa,tI as ya,Hi as za,oI as Aa,lg as Ba,ug as Ca,iI as Da,sI as Ea,aI as Fa,Nb as Ga,Ba as Ha,uI as Ia,Fb as Ja,Lb as Ka,eR as La,fI as Ma,hI as Na,gI as Oa,oR as Pa,mI as Qa,dR as Ra,hR as Sa,gR as Ta,mR as Ua,CR as Va,en as Wa,rG as Xa,vg as Ya,oG as Za,fo as _a,$R as $a,Tg as ab,OI as bb,WI as cb,iM as db,cM as eb,lM as fb,Sg as gb,Qa as hb,mz as ib,sT as jb,NM as kb,kM as lb,ET as mb,gq as nb,mq as ob,aN as pb,uN as qb,Cq as rb,hN as sb,vq as tb,sA as ub,ui as vb,aA as wb};
